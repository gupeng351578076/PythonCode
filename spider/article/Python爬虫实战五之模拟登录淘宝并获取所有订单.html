<!DOCTYPE HTML>
<html>
<head>
<meta charset="UTF-8">
<meta name="baidu-tc-verification" content="0fb041a64ee71333c957d8c784961cc8" />
<meta property="qc:admins" content="145637425211673116375" />
<meta http-equiv="X-UA-Compatible" content="IE=10,IE=9,IE=8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimum-scale=1.0, maximum-scale=1.0">
<title>Python爬虫实战五之模拟登录淘宝并获取所有订单 | 静觅</title>
<script>
window._deel = {name: '静觅',url: 'https://cuiqingcai.com/wp-content/themes/Yusi', ajaxpager: 'on', commenton: 1, roll: [0,0]}
</script>

<!-- All in One SEO Pack 2.3.12.2.1 by Michael Torbert of Semper Fi Web Design[392,435] -->
<meta name="description"  content="经过多次尝试，模拟登录淘宝终于成功了，实在是不容易，淘宝的登录加密和验证太复杂了，煞费苦心，在此写出来和大家一起分享，希望大家支持。 温馨提示 更新时间，2016-02-01，现在淘宝换成了滑块验证了，比较难解决这个问题，以下的代码没法用了，仅作学习参考研究之用吧。 本篇内容 1." />

<meta name="keywords"  content="python,爬虫" />

<!-- /all in one seo pack -->
<link rel='dns-prefetch' href='//libs.baidu.com' />
<link rel='dns-prefetch' href='//s.w.org' />
		<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2.2.1\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2.2.1\/svg\/","svgExt":".svg","source":{"concatemoji":"https:\/\/cuiqingcai.com\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.7.3"}};
			!function(a,b,c){function d(a){var b,c,d,e,f=String.fromCharCode;if(!k||!k.fillText)return!1;switch(k.clearRect(0,0,j.width,j.height),k.textBaseline="top",k.font="600 32px Arial",a){case"flag":return k.fillText(f(55356,56826,55356,56819),0,0),!(j.toDataURL().length<3e3)&&(k.clearRect(0,0,j.width,j.height),k.fillText(f(55356,57331,65039,8205,55356,57096),0,0),b=j.toDataURL(),k.clearRect(0,0,j.width,j.height),k.fillText(f(55356,57331,55356,57096),0,0),c=j.toDataURL(),b!==c);case"emoji4":return k.fillText(f(55357,56425,55356,57341,8205,55357,56507),0,0),d=j.toDataURL(),k.clearRect(0,0,j.width,j.height),k.fillText(f(55357,56425,55356,57341,55357,56507),0,0),e=j.toDataURL(),d!==e}return!1}function e(a){var c=b.createElement("script");c.src=a,c.defer=c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g,h,i,j=b.createElement("canvas"),k=j.getContext&&j.getContext("2d");for(i=Array("flag","emoji4"),c.supports={everything:!0,everythingExceptFlag:!0},h=0;h<i.length;h++)c.supports[i[h]]=d(i[h]),c.supports.everything=c.supports.everything&&c.supports[i[h]],"flag"!==i[h]&&(c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&c.supports[i[h]]);c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&!c.supports.flag,c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.everything||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);
		</script>
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
<link rel='stylesheet' id='crayon-css'  href='https://cuiqingcai.com/wp-content/plugins/crayon-syntax-highlighter/css/min/crayon.min.css?ver=_2.7.2_beta' type='text/css' media='all' />
<link rel='stylesheet' id='crayon-theme-github-css'  href='https://cuiqingcai.com/wp-content/plugins/crayon-syntax-highlighter/themes/github/github.css?ver=_2.7.2_beta' type='text/css' media='all' />
<link rel='stylesheet' id='crayon-font-monaco-css'  href='https://cuiqingcai.com/wp-content/plugins/crayon-syntax-highlighter/fonts/monaco.css?ver=_2.7.2_beta' type='text/css' media='all' />
<link rel='stylesheet' id='page-list-style-css'  href='https://cuiqingcai.com/wp-content/plugins/sitemap/css/page-list.css?ver=4.3' type='text/css' media='all' />
<link rel='stylesheet' id='style-css'  href='https://cuiqingcai.com/wp-content/themes/Yusi/style.css?ver=33' type='text/css' media='all' />
<script type='text/javascript' src='//libs.baidu.com/jquery/1.8.3/jquery.min.js?ver=1.0'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var CrayonSyntaxSettings = {"version":"_2.7.2_beta","is_admin":"0","ajaxurl":"https:\/\/cuiqingcai.com\/wp-admin\/admin-ajax.php","prefix":"crayon-","setting":"crayon-setting","selected":"crayon-setting-selected","changed":"crayon-setting-changed","special":"crayon-setting-special","orig_value":"data-orig-value","debug":""};
var CrayonSyntaxStrings = {"copy":"\u4f7f\u7528 %s \u590d\u5236\uff0c\u4f7f\u7528 %s \u7c98\u8d34\u3002","minimize":"\u70b9\u51fb\u5c55\u5f00\u4ee3\u7801"};
/* ]]> */
</script>
<script type='text/javascript' src='https://cuiqingcai.com/wp-content/plugins/crayon-syntax-highlighter/js/min/crayon.min.js?ver=_2.7.2_beta'></script>
<script type='text/javascript' src='https://cuiqingcai.com/wp-content/themes/Yusi/js/jquery.fitvids.js?ver=2.0.110526'></script>
<link rel='https://api.w.org/' href='https://cuiqingcai.com/wp-json/' />
<link rel='prev' title='WordPress解决修改style.css不生效问题三步走！' href='https://cuiqingcai.com/1070.html' />
<link rel='next' title='PHP高级特性一之正则表达式用法' href='https://cuiqingcai.com/1186.html' />
<link rel="canonical" href="https://cuiqingcai.com/1076.html" />
<link rel='shortlink' href='https://cuiqingcai.com/?p=1076' />
<link rel="alternate" type="application/json+oembed" href="https://cuiqingcai.com/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fcuiqingcai.com%2F1076.html" />
<link rel="alternate" type="text/xml+oembed" href="https://cuiqingcai.com/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fcuiqingcai.com%2F1076.html&#038;format=xml" />
<meta name="keywords" content="Python, 爬虫, Python">
<meta name="description" content="经过多次尝试，模拟登录淘宝终于成功了，实在是不容易，淘宝的登录加密和验证太复杂了，煞费苦心，在此写出来和大家一起分享，希望大家支持。 温馨提示 更新时间，2016-02-01，现在淘宝换成了滑块验证了，比较难解决这个问题，以下的代码没法用了，仅作学习参考研究之用吧。 本篇内容 1. python模拟登录淘宝网页  2. 获取登录用户的所有订单详情  3. 学会应对出现验证码的情况  4. 体会一下复杂的模拟登录机制 探索部分成果 1. ">
        <script type="text/javascript">
            jQuery(document).ready( function() {
                jQuery('.video').fitVids();
            });
        </script><!--[if lt IE 9]><script src="https://cuiqingcai.com/wp-content/themes/Yusi/js/html5.js"></script><![endif]-->

<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?3ef185224776ec2561c9f7066ead4f24";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>
<meta name="360-site-verification" content="bdc579accc68a98f1258ebcce2266afa" />
<script type="text/javascript" name="baidu-tc-cerfication" data-appid="5411405" src="//apps.bdimg.com/cloudaapi/lightapp.js"></script>
<link rel="shortcut icon" type="image/x-icon" href="https://cuiqingcai.com/fav.png" />
<script type="text/javascript" src="https://cuiqingcai.com/wp-content/themes/Yusi/js/main.js"></script>
<script type="text/javascript">

</script>
</head>
<body class="post-template-default single single-post postid-1076 single-format-standard">

<header id="header" class="header">
<div class="container-inner">
 <div class="yusi-logo">
                    <a href="/">
                        <h1>
                                                        <span class="yusi-mono">静觅</span>
                                                        <span class="yusi-bloger">崔庆才的个人博客</span>
                                                    </h1>
                    </a>
    </div>
</div>

	<div id="nav-header" class="navbar">
		
		<ul class="nav">
			<li id="menu-item-44" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-44"><a href="https://cuiqingcai.com">首页</a></li>
<li id="menu-item-14" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children menu-item-14"><a href="https://cuiqingcai.com/category/life">生活笔记</a>
<ul class="sub-menu">
	<li id="menu-item-19" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-19"><a href="https://cuiqingcai.com/category/life/notes">个人随笔</a></li>
	<li id="menu-item-18" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-18"><a href="https://cuiqingcai.com/category/life/daily">个人日记</a></li>
	<li id="menu-item-15" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-15"><a href="https://cuiqingcai.com/category/life/presatation">个人展示</a></li>
</ul>
</li>
<li id="menu-item-7" class="menu-item menu-item-type-taxonomy menu-item-object-category current-post-ancestor menu-item-has-children menu-item-7"><a href="https://cuiqingcai.com/category/technique">技术杂谈</a>
<ul class="sub-menu">
	<li id="menu-item-9" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-9"><a href="https://cuiqingcai.com/category/technique/cc">C/C++</a></li>
	<li id="menu-item-11" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-11"><a href="https://cuiqingcai.com/category/technique/java">Java</a></li>
	<li id="menu-item-17" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-17"><a href="https://cuiqingcai.com/category/technique/php">PHP</a></li>
	<li id="menu-item-153" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-153"><a href="https://cuiqingcai.com/category/technique/html">HTML</a></li>
	<li id="menu-item-960" class="menu-item menu-item-type-taxonomy menu-item-object-category current-post-ancestor current-menu-parent current-post-parent menu-item-960"><a href="https://cuiqingcai.com/category/technique/python">Python</a></li>
	<li id="menu-item-1277" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-1277"><a href="https://cuiqingcai.com/category/technique/javascript">JS</a></li>
	<li id="menu-item-16" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-16"><a href="https://cuiqingcai.com/category/technique/other">Other</a></li>
</ul>
</li>
<li id="menu-item-418" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-418"><a href="https://cuiqingcai.com/category/resources">福利专区</a></li>
<li id="menu-item-851" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-851"><a href="https://cuiqingcai.com/about">关于自己</a></li>
<li id="menu-item-251" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-251"><a href="https://cuiqingcai.com/message">给我留言</a></li>
<li id="menu-item-1131" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1131"><a href="https://cuiqingcai.com/donate">赞助作者</a></li>
<li id="menu-item-4571" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4571"><a href="https://cuiqingcai.com/exchange">技术交流</a></li>
<li style="float:right;">
                    <div class="toggle-search"><i class="fa fa-search"></i></div>
<div class="search-expand" style="display: none;"><div class="search-expand-inner"><form method="get" class="searchform themeform" onsubmit="location.href='https://cuiqingcai.com/?s=' + encodeURIComponent(this.s.value).replace(/%20/g, '+'); return false;" action="/"><div> <input type="ext" class="search" name="s" onblur="if(this.value=='')this.value='search...';" onfocus="if(this.value=='search...')this.value='';" value="search..."></div></form></div></div>
</li>
		</ul>
	</div>
	</div>
</header>
<section class="container"><div class="speedbar">
					<div class="pull-right">
				<i class="fa fa-user"></i> <a href="/wp-login.php?action=register">投稿</a>&nbsp;&nbsp;&nbsp;   <i class="fa fa-power-off"></i> <a href="https://cuiqingcai.com/wp-login.php">登录</a>			</div>
				<div class="toptip"><strong class="text-success"><i class="fa fa-volume-up"></i> </strong>   博主录制的Python3爬虫视频教程已发布！详情请戳<a href="https://cuiqingcai.com/4320.html">Python3爬虫视频教程</a>！希望大家支持！非常感谢！</div>
	</div>
	<div class="content-wrap">
	<div class="content">
<div class="breadcrumbs"><a title="返回首页" href="https://cuiqingcai.com"><i class="fa fa-home"></i></a> <small>></small> <a href="https://cuiqingcai.com/category/technique">技术杂谈</a> <small>></small> <a href="https://cuiqingcai.com/category/technique/python">Python</a> <small>></small> <span class="muted">Python爬虫实战五之模拟登录淘宝并获取所有订单</span></div>
				<header class="article-header">
			<h1 class="article-title"><a href="https://cuiqingcai.com/1076.html">Python爬虫实战五之模拟登录淘宝并获取所有订单</a></h1>
			<div class="meta">
				<span id="mute-category" class="muted"><i class="fa fa-list-alt"></i><a href="https://cuiqingcai.com/category/technique/python"> Python</a></span>				<span class="muted"><i class="fa fa-user"></i> <a href="https://cuiqingcai.com/author/cqcre">崔庆才</a></span>
				<time class="muted"><i class="fa fa-clock-o"></i> 3年前 (2015-02-23)</time>
				<span class="muted"><i class="fa fa-eye"></i> 101574浏览</span>
				<span class="muted"><i class="fa fa-comments-o"></i> <a href="https://cuiqingcai.com/1076.html#comments">136评论</a></span>							</div>
		</header>
<div class="banner banner-post"><a href="https://edu.hellobi.com/course/157"><img src="https://qiniu.cuiqingcai.com/wp-content/uploads/2017/04/横图：崔庆才-自己动手，丰衣足食！Python3网络爬虫实战案例.png" /></a>
</div>		<article class="article-content">
			<p>经过多次尝试，模拟登录淘宝终于成功了，实在是不容易，淘宝的登录加密和验证太复杂了，煞费苦心，在此写出来和大家一起分享，希望大家支持。</p>
<h2>温馨提示</h2>
<p>更新时间，2016-02-01，现在淘宝换成了滑块验证了，比较难解决这个问题，以下的代码没法用了，仅作学习参考研究之用吧。</p>
<h2>本篇内容</h2>
<p>1. python模拟登录淘宝网页</p>
<p>2. 获取登录用户的所有订单详情</p>
<p>3. 学会应对出现验证码的情况</p>
<p>4. 体会一下复杂的模拟登录机制</p>
<h2>探索部分成果</h2>
<p>1. 淘宝的密码用了AES加密算法，最终将密码转化为256位，在POST时，传输的是256位长度的密码。</p>
<p>2. 淘宝在登录时必须要输入验证码，在经过几次尝试失败后最终获取了验证码图片让用户手动输入来验证。</p>
<p>3. 淘宝另外有复杂且每天在变的 ua 加密算法，在程序中我们需要提前获取某一 ua 码才可进行模拟登录。</p>
<p>4. 在获取最后的登录 st 码时，历经了多次请求和正则表达式提取，且 st 码只可使用一次。</p>
<h2>整体思路梳理</h2>
<p>1. 手动到浏览器获取 ua 码以及 加密后的密码，只获取一次即可，一劳永逸。</p>
<p>2. 向登录界面发送登录请求，POST 一系列参数，包括 ua 码以及密码等等，获得响应，提取验证码图像。</p>
<p>3. 用户输入手动验证码，重新加入验证码数据再次用 POST 方式发出请求，获得响应，提取 J_Htoken。</p>
<p>4. 利用 J_Htoken 向 alipay 发出请求，获得响应，提取 st 码。</p>
<p>5. 利用 st 码和用户名，重新发出登录请求，获得响应，提取重定向网址，存储 cookie。</p>
<p>6. 利用 cookie 向其他个人页面如订单页面发出请求，获得响应，提取订单详情。</p>
<p>是不是没看懂？没事，下面我将一点点说明自己模拟登录的过程，希望大家可以理解。</p>
<h2>前期准备</h2>
<p>由于淘宝的 ua 算法和 aes 密码加密算法太复杂了，ua 算法在淘宝每天都是在变化的，不过，这个内容你获取之后一直用即可，经过测试之后没有问题，一劳永逸。</p>
<p>那么 ua 和 aes 密码怎样获取呢？</p>
<p>我们就从浏览器里面直接获取吧，打开浏览器，找到淘宝的登录界面，按 F12 或者浏览器右键审查元素。</p>
<p>在这里我用的是火狐浏览器，首先记得在浏览器中设置一下显示持续日志，要不然页面跳转了你就看不到之前抓取的信息了。在这里截图如下：</p>
<p><a href="http://qiniu.cuiqingcai.com/wp-content/uploads/2015/02/20150225013600.jpg"><img class="alignnone size-full wp-image-1084" src="http://qiniu.cuiqingcai.com/wp-content/uploads/2015/02/20150225013600.jpg" alt="20150225013600" width="1343" height="734" srcset="https://qiniu.cuiqingcai.com/wp-content/uploads/2015/02/20150225013600.jpg 1343w, https://qiniu.cuiqingcai.com/wp-content/uploads/2015/02/20150225013600-300x164.jpg 300w, https://qiniu.cuiqingcai.com/wp-content/uploads/2015/02/20150225013600-1024x560.jpg 1024w" sizes="(max-width: 1343px) 100vw, 1343px" /></a></p>
<p>&nbsp;</p>
<p>好，那么接下来我们就从浏览器中获取 ua 和 aes 密码</p>
<p>点击网络选项卡，这时都是空的，什么数据也没有截取。这时你就在网页上登录一下试试吧，输入用户名啊，密码啊，有必要时需要输入验证码，点击登录。</p>
<p><a href="http://qiniu.cuiqingcai.com/wp-content/uploads/2015/02/QQ截图20150225014124.jpg"><img class="alignnone size-full wp-image-1085" src="http://qiniu.cuiqingcai.com/wp-content/uploads/2015/02/QQ截图20150225014124.jpg" alt="QQ截图20150225014124" width="1304" height="499" srcset="https://qiniu.cuiqingcai.com/wp-content/uploads/2015/02/QQ截图20150225014124.jpg 1304w, https://qiniu.cuiqingcai.com/wp-content/uploads/2015/02/QQ截图20150225014124-300x115.jpg 300w, https://qiniu.cuiqingcai.com/wp-content/uploads/2015/02/QQ截图20150225014124-1024x392.jpg 1024w" sizes="(max-width: 1304px) 100vw, 1304px" /></a></p>
<p>等跳转成功后，你就可以看到好多日志记录了，点击图中的那一行 login.taobo.com，然后查看参数，你就会发现表单数据了，其中就包括 ua 还有下面的 password2，把这俩复制下来，我们之后要用到的。这就是我们需要的 ua 还有 aes 加密后的密码。</p>
<p><a href="http://qiniu.cuiqingcai.com/wp-content/uploads/2015/02/QQ截图20150225014019.jpg"><img class="alignnone size-full wp-image-1086" src="http://qiniu.cuiqingcai.com/wp-content/uploads/2015/02/QQ截图20150225014019.jpg" alt="QQ截图20150225014019" width="1345" height="401" srcset="https://qiniu.cuiqingcai.com/wp-content/uploads/2015/02/QQ截图20150225014019.jpg 1345w, https://qiniu.cuiqingcai.com/wp-content/uploads/2015/02/QQ截图20150225014019-300x89.jpg 300w, https://qiniu.cuiqingcai.com/wp-content/uploads/2015/02/QQ截图20150225014019-1024x305.jpg 1024w" sizes="(max-width: 1345px) 100vw, 1345px" /></a></p>
<p>恩，读到这里，你应该获取到了属于自己的 ua 和 password2 两个内容。</p>
<h2>输入验证码并获取J_HToken</h2>
<p>经过博主本人亲自验证，有时候，在模拟登录时你并不需要输入验证码，它直接返回的结果就是前面所说的下一步用到的 J_Token，而有时候你则会需要输入验证码，等你手动输入验证码之后，重新请求登录一次。</p>
<p>博主是边写程序边更新文章的，现在写完了是否有必要输入验证码的检验以及在浏览器中呈现验证码。</p>
<p>代码如下</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->

		<div id="crayon-5a69274d8f1ea052724256" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; float: left; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="切换是否显示行编号"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="纯文本显示代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="切换自动换行"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="点击展开代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="复制代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="在新窗口中显示代码"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea  class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
__author__ = 'CQC'
# -*- coding:utf-8 -*-

import urllib
import urllib2
import cookielib
import re
import webbrowser

#模拟登录淘宝类
class Taobao:

    #初始化方法
    def __init__(self):
        #登录的URL
        self.loginURL = "https://login.taobao.com/member/login.jhtml"
        #代理IP地址，防止自己的IP被封禁
        self.proxyURL = 'http://120.193.146.97:843'
        #登录POST数据时发送的头部信息
        self.loginHeaders =  {
            'Host':'login.taobao.com',
            'User-Agent' : 'Mozilla/5.0 (Windows NT 6.1; WOW64; rv:35.0) Gecko/20100101 Firefox/35.0',
            'Referer' : 'https://login.taobao.com/member/login.jhtml',
            'Content-Type': 'application/x-www-form-urlencoded',
            'Connection' : 'Keep-Alive'
        }
        #用户名
        self.username = 'cqcre'
        #ua字符串，经过淘宝ua算法计算得出，包含了时间戳,浏览器,屏幕分辨率,随机数,鼠标移动,鼠标点击,其实还有键盘输入记录,鼠标移动的记录、点击的记录等等的信息
        self.ua = '191UW5TcyMNYQwiAiwTR3tCf0J/QnhEcUpkMmQ=|Um5Ockt0TXdPc011TXVKdyE=|U2xMHDJ+H2QJZwBxX39Rb1d5WXcrSixAJ1kjDVsN|VGhXd1llXGNaYFhkWmJaYl1gV2pIdUtyTXRKfkN4Qn1FeEF6R31TBQ==|VWldfS0TMw8xDjYWKhAwHiUdOA9wCDEVaxgkATdcNU8iDFoM|VmNDbUMV|V2NDbUMV|WGRYeCgGZhtmH2VScVI2UT5fORtmD2gCawwuRSJHZAFsCWMOdVYyVTpbPR99HWAFYVMpUDUFORshHiQdJR0jAT0JPQc/BDoFPgooFDZtVBR5Fn9VOwt2EWhCOVQ4WSJPJFkHXhgoSDVIMRgnHyFqQ3xEezceIRkmahRqFDZLIkUvRiEDaA9qQ3xEezcZORc5bzk=|WWdHFy0TMw8vEy0UIQE0ADgYJBohGjoAOw4uEiwXLAw2DThu9a==|WmBAED5+KnIbdRh1GXgFQSZbGFdrUm1UblZqVGxQa1ZiTGxQcEp1I3U=|W2NDEz19KXENZwJjHkY7Ui9OJQsre09zSWlXY1oMLBExHzERLxsuE0UT|XGZGFjh4LHQdcx5zH34DRyBdHlFtVGtSaFBsUmpWbVBkSmpXd05zTnMlcw==|XWdHFzl5LXUJYwZnGkI/VitKIQ8vEzMKNws3YTc=|XmdaZ0d6WmVFeUB8XGJaYEB4TGxWbk5yTndXa0tyT29Ta0t1QGBeZDI='
        #密码，在这里不能输入真实密码，淘宝对此密码进行了加密处理，256位，此处为加密后的密码
        self.password2 = '7511aa68sx629e45de220d29174f1066537a73420ef6dbb5b46f202396703a2d56b0312df8769d886e6ca63d587fdbb99ee73927e8c07d9c88cd02182e1a21edc13fb8e140a4a2a4b5c253bf38484bd0e08199e03eb9bf7b365a5c673c03407d812b91394f0d3c7564042e3f2b11d156aeea37ad6460118914125ab8f8ac466f'
        self.post = post = {
            'ua':self.ua,
            'TPL_checkcode':'',
            'CtrlVersion': '1,0,0,7',
            'TPL_password':'',
            'TPL_redirect_url':'http://i.taobao.com/my_taobao.htm?nekot=udm8087E1424147022443',
            'TPL_username':self.username,
            'loginsite':'0',
            'newlogin':'0',
            'from':'tb',
            'fc':'default',
            'style':'default',
            'css_style':'',
            'tid':'XOR_1_000000000000000000000000000000_625C4720470A0A050976770A',
            'support':'000001',
            'loginType':'4',
            'minititle':'',
            'minipara':'',
            'umto':'NaN',
            'pstrong':'3',
            'llnick':'',
            'sign':'',
            'need_sign':'',
            'isIgnore':'',
            'full_redirect':'',
            'popid':'',
            'callback':'',
            'guf':'',
            'not_duplite_str':'',
            'need_user_id':'',
            'poy':'',
            'gvfdcname':'10',
            'gvfdcre':'',
            'from_encoding ':'',
            'sub':'',
            'TPL_password_2':self.password2,
            'loginASR':'1',
            'loginASRSuc':'1',
            'allp':'',
            'oslanguage':'zh-CN',
            'sr':'1366*768',
            'osVer':'windows|6.1',
            'naviVer':'firefox|35'
        }
        #将POST的数据进行编码转换
        self.postData = urllib.urlencode(self.post)
        #设置代理
        self.proxy = urllib2.ProxyHandler({'http':self.proxyURL})
        #设置cookie
        self.cookie = cookielib.LWPCookieJar()
        #设置cookie处理器
        self.cookieHandler = urllib2.HTTPCookieProcessor(self.cookie)
        #设置登录时用到的opener，它的open方法相当于urllib2.urlopen
        self.opener = urllib2.build_opener(self.cookieHandler,self.proxy,urllib2.HTTPHandler)


    #得到是否需要输入验证码，这次请求的相应有时会不同，有时需要验证有时不需要
    def needIdenCode(self):
        #第一次登录获取验证码尝试，构建request
        request = urllib2.Request(self.loginURL,self.postData,self.loginHeaders)
        #得到第一次登录尝试的相应
        response = self.opener.open(request)
        #获取其中的内容
        content = response.read().decode('gbk')
        #获取状态吗
        status = response.getcode()
        #状态码为200，获取成功
        if status == 200:
            print u"获取请求成功"
            #\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801这六个字是请输入验证码的utf-8编码
            pattern = re.compile(u'\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801',re.S)
            result = re.search(pattern,content)
            #如果找到该字符，代表需要输入验证码
            if result:
                print u"此次安全验证异常，您需要输入验证码"
                return content
            #否则不需要
            else:
                print u"此次安全验证通过，您这次不需要输入验证码"
                return False
        else:
            print u"获取请求失败"

    #得到验证码图片
    def getIdenCode(self,page):
        #得到验证码的图片
        pattern = re.compile('&lt;img id="J_StandardCode_m.*?data-src="(.*?)"',re.S)
        #匹配的结果
        matchResult = re.search(pattern,page)
        #已经匹配得到内容，并且验证码图片链接不为空
        if matchResult and matchResult.group(1):
            print matchResult.group(1)
            return matchResult.group(1)
        else:
            print u"没有找到验证码内容"
            return False

    #程序运行主干
    def main(self):
        #是否需要验证码，是则得到页面内容，不是则返回False
        needResult = self.needIdenCode()
        if not needResult == False:
            print u"您需要手动输入验证码"
            idenCode = self.getIdenCode(needResult)
            #得到了验证码的链接
            if not idenCode == False:
                print u"验证码获取成功"
                print u"请在浏览器中输入您看到的验证码"
                webbrowser.open_new_tab(idenCode)
            #验证码链接为空，无效验证码
            else:
                print u"验证码获取失败，请重试"
        else:
            print u"不需要输入验证码"



taobao = Taobao()
taobao.main()</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5a69274d8f1ea052724256-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1ea052724256-2">2</div><div class="crayon-num" data-line="crayon-5a69274d8f1ea052724256-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1ea052724256-4">4</div><div class="crayon-num" data-line="crayon-5a69274d8f1ea052724256-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1ea052724256-6">6</div><div class="crayon-num" data-line="crayon-5a69274d8f1ea052724256-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1ea052724256-8">8</div><div class="crayon-num" data-line="crayon-5a69274d8f1ea052724256-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1ea052724256-10">10</div><div class="crayon-num" data-line="crayon-5a69274d8f1ea052724256-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1ea052724256-12">12</div><div class="crayon-num" data-line="crayon-5a69274d8f1ea052724256-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1ea052724256-14">14</div><div class="crayon-num" data-line="crayon-5a69274d8f1ea052724256-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1ea052724256-16">16</div><div class="crayon-num" data-line="crayon-5a69274d8f1ea052724256-17">17</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1ea052724256-18">18</div><div class="crayon-num" data-line="crayon-5a69274d8f1ea052724256-19">19</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1ea052724256-20">20</div><div class="crayon-num" data-line="crayon-5a69274d8f1ea052724256-21">21</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1ea052724256-22">22</div><div class="crayon-num" data-line="crayon-5a69274d8f1ea052724256-23">23</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1ea052724256-24">24</div><div class="crayon-num" data-line="crayon-5a69274d8f1ea052724256-25">25</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1ea052724256-26">26</div><div class="crayon-num" data-line="crayon-5a69274d8f1ea052724256-27">27</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1ea052724256-28">28</div><div class="crayon-num" data-line="crayon-5a69274d8f1ea052724256-29">29</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1ea052724256-30">30</div><div class="crayon-num" data-line="crayon-5a69274d8f1ea052724256-31">31</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1ea052724256-32">32</div><div class="crayon-num" data-line="crayon-5a69274d8f1ea052724256-33">33</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1ea052724256-34">34</div><div class="crayon-num" data-line="crayon-5a69274d8f1ea052724256-35">35</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1ea052724256-36">36</div><div class="crayon-num" data-line="crayon-5a69274d8f1ea052724256-37">37</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1ea052724256-38">38</div><div class="crayon-num" data-line="crayon-5a69274d8f1ea052724256-39">39</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1ea052724256-40">40</div><div class="crayon-num" data-line="crayon-5a69274d8f1ea052724256-41">41</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1ea052724256-42">42</div><div class="crayon-num" data-line="crayon-5a69274d8f1ea052724256-43">43</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1ea052724256-44">44</div><div class="crayon-num" data-line="crayon-5a69274d8f1ea052724256-45">45</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1ea052724256-46">46</div><div class="crayon-num" data-line="crayon-5a69274d8f1ea052724256-47">47</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1ea052724256-48">48</div><div class="crayon-num" data-line="crayon-5a69274d8f1ea052724256-49">49</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1ea052724256-50">50</div><div class="crayon-num" data-line="crayon-5a69274d8f1ea052724256-51">51</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1ea052724256-52">52</div><div class="crayon-num" data-line="crayon-5a69274d8f1ea052724256-53">53</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1ea052724256-54">54</div><div class="crayon-num" data-line="crayon-5a69274d8f1ea052724256-55">55</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1ea052724256-56">56</div><div class="crayon-num" data-line="crayon-5a69274d8f1ea052724256-57">57</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1ea052724256-58">58</div><div class="crayon-num" data-line="crayon-5a69274d8f1ea052724256-59">59</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1ea052724256-60">60</div><div class="crayon-num" data-line="crayon-5a69274d8f1ea052724256-61">61</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1ea052724256-62">62</div><div class="crayon-num" data-line="crayon-5a69274d8f1ea052724256-63">63</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1ea052724256-64">64</div><div class="crayon-num" data-line="crayon-5a69274d8f1ea052724256-65">65</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1ea052724256-66">66</div><div class="crayon-num" data-line="crayon-5a69274d8f1ea052724256-67">67</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1ea052724256-68">68</div><div class="crayon-num" data-line="crayon-5a69274d8f1ea052724256-69">69</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1ea052724256-70">70</div><div class="crayon-num" data-line="crayon-5a69274d8f1ea052724256-71">71</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1ea052724256-72">72</div><div class="crayon-num" data-line="crayon-5a69274d8f1ea052724256-73">73</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1ea052724256-74">74</div><div class="crayon-num" data-line="crayon-5a69274d8f1ea052724256-75">75</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1ea052724256-76">76</div><div class="crayon-num" data-line="crayon-5a69274d8f1ea052724256-77">77</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1ea052724256-78">78</div><div class="crayon-num" data-line="crayon-5a69274d8f1ea052724256-79">79</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1ea052724256-80">80</div><div class="crayon-num" data-line="crayon-5a69274d8f1ea052724256-81">81</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1ea052724256-82">82</div><div class="crayon-num" data-line="crayon-5a69274d8f1ea052724256-83">83</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1ea052724256-84">84</div><div class="crayon-num" data-line="crayon-5a69274d8f1ea052724256-85">85</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1ea052724256-86">86</div><div class="crayon-num" data-line="crayon-5a69274d8f1ea052724256-87">87</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1ea052724256-88">88</div><div class="crayon-num" data-line="crayon-5a69274d8f1ea052724256-89">89</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1ea052724256-90">90</div><div class="crayon-num" data-line="crayon-5a69274d8f1ea052724256-91">91</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1ea052724256-92">92</div><div class="crayon-num" data-line="crayon-5a69274d8f1ea052724256-93">93</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1ea052724256-94">94</div><div class="crayon-num" data-line="crayon-5a69274d8f1ea052724256-95">95</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1ea052724256-96">96</div><div class="crayon-num" data-line="crayon-5a69274d8f1ea052724256-97">97</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1ea052724256-98">98</div><div class="crayon-num" data-line="crayon-5a69274d8f1ea052724256-99">99</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1ea052724256-100">100</div><div class="crayon-num" data-line="crayon-5a69274d8f1ea052724256-101">101</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1ea052724256-102">102</div><div class="crayon-num" data-line="crayon-5a69274d8f1ea052724256-103">103</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1ea052724256-104">104</div><div class="crayon-num" data-line="crayon-5a69274d8f1ea052724256-105">105</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1ea052724256-106">106</div><div class="crayon-num" data-line="crayon-5a69274d8f1ea052724256-107">107</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1ea052724256-108">108</div><div class="crayon-num" data-line="crayon-5a69274d8f1ea052724256-109">109</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1ea052724256-110">110</div><div class="crayon-num" data-line="crayon-5a69274d8f1ea052724256-111">111</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1ea052724256-112">112</div><div class="crayon-num" data-line="crayon-5a69274d8f1ea052724256-113">113</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1ea052724256-114">114</div><div class="crayon-num" data-line="crayon-5a69274d8f1ea052724256-115">115</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1ea052724256-116">116</div><div class="crayon-num" data-line="crayon-5a69274d8f1ea052724256-117">117</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1ea052724256-118">118</div><div class="crayon-num" data-line="crayon-5a69274d8f1ea052724256-119">119</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1ea052724256-120">120</div><div class="crayon-num" data-line="crayon-5a69274d8f1ea052724256-121">121</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1ea052724256-122">122</div><div class="crayon-num" data-line="crayon-5a69274d8f1ea052724256-123">123</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1ea052724256-124">124</div><div class="crayon-num" data-line="crayon-5a69274d8f1ea052724256-125">125</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1ea052724256-126">126</div><div class="crayon-num" data-line="crayon-5a69274d8f1ea052724256-127">127</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1ea052724256-128">128</div><div class="crayon-num" data-line="crayon-5a69274d8f1ea052724256-129">129</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1ea052724256-130">130</div><div class="crayon-num" data-line="crayon-5a69274d8f1ea052724256-131">131</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1ea052724256-132">132</div><div class="crayon-num" data-line="crayon-5a69274d8f1ea052724256-133">133</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1ea052724256-134">134</div><div class="crayon-num" data-line="crayon-5a69274d8f1ea052724256-135">135</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1ea052724256-136">136</div><div class="crayon-num" data-line="crayon-5a69274d8f1ea052724256-137">137</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1ea052724256-138">138</div><div class="crayon-num" data-line="crayon-5a69274d8f1ea052724256-139">139</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1ea052724256-140">140</div><div class="crayon-num" data-line="crayon-5a69274d8f1ea052724256-141">141</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1ea052724256-142">142</div><div class="crayon-num" data-line="crayon-5a69274d8f1ea052724256-143">143</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1ea052724256-144">144</div><div class="crayon-num" data-line="crayon-5a69274d8f1ea052724256-145">145</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1ea052724256-146">146</div><div class="crayon-num" data-line="crayon-5a69274d8f1ea052724256-147">147</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1ea052724256-148">148</div><div class="crayon-num" data-line="crayon-5a69274d8f1ea052724256-149">149</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1ea052724256-150">150</div><div class="crayon-num" data-line="crayon-5a69274d8f1ea052724256-151">151</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5a69274d8f1ea052724256-1"><span class="crayon-v">__author__</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'CQC'</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1ea052724256-2"><span class="crayon-p"># -*- coding:utf-8 -*-</span></div><div class="crayon-line" id="crayon-5a69274d8f1ea052724256-3">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1ea052724256-4"><span class="crayon-e">import </span><span class="crayon-e">urllib</span></div><div class="crayon-line" id="crayon-5a69274d8f1ea052724256-5"><span class="crayon-e">import </span><span class="crayon-e">urllib2</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1ea052724256-6"><span class="crayon-e">import </span><span class="crayon-e">cookielib</span></div><div class="crayon-line" id="crayon-5a69274d8f1ea052724256-7"><span class="crayon-e">import </span><span class="crayon-e">re</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1ea052724256-8"><span class="crayon-e">import </span><span class="crayon-v">webbrowser</span></div><div class="crayon-line" id="crayon-5a69274d8f1ea052724256-9">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1ea052724256-10"><span class="crayon-p">#模拟登录淘宝类</span></div><div class="crayon-line" id="crayon-5a69274d8f1ea052724256-11"><span class="crayon-t">class</span><span class="crayon-h"> </span><span class="crayon-v">Taobao</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1ea052724256-12">&nbsp;</div><div class="crayon-line" id="crayon-5a69274d8f1ea052724256-13"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#初始化方法</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1ea052724256-14"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">def </span><span class="crayon-e">__init__</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5a69274d8f1ea052724256-15"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#登录的URL</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1ea052724256-16"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">loginURL</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">"https://login.taobao.com/member/login.jhtml"</span></div><div class="crayon-line" id="crayon-5a69274d8f1ea052724256-17"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#代理IP地址，防止自己的IP被封禁</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1ea052724256-18"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">proxyURL</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'http://120.193.146.97:843'</span></div><div class="crayon-line" id="crayon-5a69274d8f1ea052724256-19"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#登录POST数据时发送的头部信息</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1ea052724256-20"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">loginHeaders</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a69274d8f1ea052724256-21"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'Host'</span><span class="crayon-o">:</span><span class="crayon-s">'login.taobao.com'</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1ea052724256-22"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'User-Agent'</span><span class="crayon-h"> </span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">'Mozilla/5.0 (Windows NT 6.1; WOW64; rv:35.0) Gecko/20100101 Firefox/35.0'</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5a69274d8f1ea052724256-23"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'Referer'</span><span class="crayon-h"> </span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">'https://login.taobao.com/member/login.jhtml'</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1ea052724256-24"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'Content-Type'</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">'application/x-www-form-urlencoded'</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5a69274d8f1ea052724256-25"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'Connection'</span><span class="crayon-h"> </span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">'Keep-Alive'</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1ea052724256-26"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-5a69274d8f1ea052724256-27"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#用户名</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1ea052724256-28"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">username</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'cqcre'</span></div><div class="crayon-line" id="crayon-5a69274d8f1ea052724256-29"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#ua字符串，经过淘宝ua算法计算得出，包含了时间戳,浏览器,屏幕分辨率,随机数,鼠标移动,鼠标点击,其实还有键盘输入记录,鼠标移动的记录、点击的记录等等的信息</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1ea052724256-30"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">ua</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'191UW5TcyMNYQwiAiwTR3tCf0J/QnhEcUpkMmQ=|Um5Ockt0TXdPc011TXVKdyE=|U2xMHDJ+H2QJZwBxX39Rb1d5WXcrSixAJ1kjDVsN|VGhXd1llXGNaYFhkWmJaYl1gV2pIdUtyTXRKfkN4Qn1FeEF6R31TBQ==|VWldfS0TMw8xDjYWKhAwHiUdOA9wCDEVaxgkATdcNU8iDFoM|VmNDbUMV|V2NDbUMV|WGRYeCgGZhtmH2VScVI2UT5fORtmD2gCawwuRSJHZAFsCWMOdVYyVTpbPR99HWAFYVMpUDUFORshHiQdJR0jAT0JPQc/BDoFPgooFDZtVBR5Fn9VOwt2EWhCOVQ4WSJPJFkHXhgoSDVIMRgnHyFqQ3xEezceIRkmahRqFDZLIkUvRiEDaA9qQ3xEezcZORc5bzk=|WWdHFy0TMw8vEy0UIQE0ADgYJBohGjoAOw4uEiwXLAw2DThu9a==|WmBAED5+KnIbdRh1GXgFQSZbGFdrUm1UblZqVGxQa1ZiTGxQcEp1I3U=|W2NDEz19KXENZwJjHkY7Ui9OJQsre09zSWlXY1oMLBExHzERLxsuE0UT|XGZGFjh4LHQdcx5zH34DRyBdHlFtVGtSaFBsUmpWbVBkSmpXd05zTnMlcw==|XWdHFzl5LXUJYwZnGkI/VitKIQ8vEzMKNws3YTc=|XmdaZ0d6WmVFeUB8XGJaYEB4TGxWbk5yTndXa0tyT29Ta0t1QGBeZDI='</span></div><div class="crayon-line" id="crayon-5a69274d8f1ea052724256-31"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#密码，在这里不能输入真实密码，淘宝对此密码进行了加密处理，256位，此处为加密后的密码</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1ea052724256-32"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">password2</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'7511aa68sx629e45de220d29174f1066537a73420ef6dbb5b46f202396703a2d56b0312df8769d886e6ca63d587fdbb99ee73927e8c07d9c88cd02182e1a21edc13fb8e140a4a2a4b5c253bf38484bd0e08199e03eb9bf7b365a5c673c03407d812b91394f0d3c7564042e3f2b11d156aeea37ad6460118914125ab8f8ac466f'</span></div><div class="crayon-line" id="crayon-5a69274d8f1ea052724256-33"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">post</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">post</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1ea052724256-34"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'ua'</span><span class="crayon-o">:</span><span class="crayon-v">self</span><span class="crayon-sy">.</span><span class="crayon-v">ua</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5a69274d8f1ea052724256-35"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'TPL_checkcode'</span><span class="crayon-o">:</span><span class="crayon-s">''</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1ea052724256-36"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'CtrlVersion'</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">'1,0,0,7'</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5a69274d8f1ea052724256-37"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'TPL_password'</span><span class="crayon-o">:</span><span class="crayon-s">''</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1ea052724256-38"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'TPL_redirect_url'</span><span class="crayon-o">:</span><span class="crayon-s">'http://i.taobao.com/my_taobao.htm?nekot=udm8087E1424147022443'</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5a69274d8f1ea052724256-39"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'TPL_username'</span><span class="crayon-o">:</span><span class="crayon-v">self</span><span class="crayon-sy">.</span><span class="crayon-v">username</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1ea052724256-40"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'loginsite'</span><span class="crayon-o">:</span><span class="crayon-s">'0'</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5a69274d8f1ea052724256-41"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'newlogin'</span><span class="crayon-o">:</span><span class="crayon-s">'0'</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1ea052724256-42"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'from'</span><span class="crayon-o">:</span><span class="crayon-s">'tb'</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5a69274d8f1ea052724256-43"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'fc'</span><span class="crayon-o">:</span><span class="crayon-s">'default'</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1ea052724256-44"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'style'</span><span class="crayon-o">:</span><span class="crayon-s">'default'</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5a69274d8f1ea052724256-45"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'css_style'</span><span class="crayon-o">:</span><span class="crayon-s">''</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1ea052724256-46"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'tid'</span><span class="crayon-o">:</span><span class="crayon-s">'XOR_1_000000000000000000000000000000_625C4720470A0A050976770A'</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5a69274d8f1ea052724256-47"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'support'</span><span class="crayon-o">:</span><span class="crayon-s">'000001'</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1ea052724256-48"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'loginType'</span><span class="crayon-o">:</span><span class="crayon-s">'4'</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5a69274d8f1ea052724256-49"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'minititle'</span><span class="crayon-o">:</span><span class="crayon-s">''</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1ea052724256-50"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'minipara'</span><span class="crayon-o">:</span><span class="crayon-s">''</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5a69274d8f1ea052724256-51"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'umto'</span><span class="crayon-o">:</span><span class="crayon-s">'NaN'</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1ea052724256-52"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'pstrong'</span><span class="crayon-o">:</span><span class="crayon-s">'3'</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5a69274d8f1ea052724256-53"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'llnick'</span><span class="crayon-o">:</span><span class="crayon-s">''</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1ea052724256-54"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'sign'</span><span class="crayon-o">:</span><span class="crayon-s">''</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5a69274d8f1ea052724256-55"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'need_sign'</span><span class="crayon-o">:</span><span class="crayon-s">''</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1ea052724256-56"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'isIgnore'</span><span class="crayon-o">:</span><span class="crayon-s">''</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5a69274d8f1ea052724256-57"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'full_redirect'</span><span class="crayon-o">:</span><span class="crayon-s">''</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1ea052724256-58"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'popid'</span><span class="crayon-o">:</span><span class="crayon-s">''</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5a69274d8f1ea052724256-59"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'callback'</span><span class="crayon-o">:</span><span class="crayon-s">''</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1ea052724256-60"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'guf'</span><span class="crayon-o">:</span><span class="crayon-s">''</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5a69274d8f1ea052724256-61"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'not_duplite_str'</span><span class="crayon-o">:</span><span class="crayon-s">''</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1ea052724256-62"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'need_user_id'</span><span class="crayon-o">:</span><span class="crayon-s">''</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5a69274d8f1ea052724256-63"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'poy'</span><span class="crayon-o">:</span><span class="crayon-s">''</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1ea052724256-64"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'gvfdcname'</span><span class="crayon-o">:</span><span class="crayon-s">'10'</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5a69274d8f1ea052724256-65"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'gvfdcre'</span><span class="crayon-o">:</span><span class="crayon-s">''</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1ea052724256-66"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'from_encoding '</span><span class="crayon-o">:</span><span class="crayon-s">''</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5a69274d8f1ea052724256-67"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'sub'</span><span class="crayon-o">:</span><span class="crayon-s">''</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1ea052724256-68"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'TPL_password_2'</span><span class="crayon-o">:</span><span class="crayon-v">self</span><span class="crayon-sy">.</span><span class="crayon-v">password2</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5a69274d8f1ea052724256-69"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'loginASR'</span><span class="crayon-o">:</span><span class="crayon-s">'1'</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1ea052724256-70"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'loginASRSuc'</span><span class="crayon-o">:</span><span class="crayon-s">'1'</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5a69274d8f1ea052724256-71"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'allp'</span><span class="crayon-o">:</span><span class="crayon-s">''</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1ea052724256-72"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'oslanguage'</span><span class="crayon-o">:</span><span class="crayon-s">'zh-CN'</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5a69274d8f1ea052724256-73"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'sr'</span><span class="crayon-o">:</span><span class="crayon-s">'1366*768'</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1ea052724256-74"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'osVer'</span><span class="crayon-o">:</span><span class="crayon-s">'windows|6.1'</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5a69274d8f1ea052724256-75"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'naviVer'</span><span class="crayon-o">:</span><span class="crayon-s">'firefox|35'</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1ea052724256-76"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-5a69274d8f1ea052724256-77"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#将POST的数据进行编码转换</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1ea052724256-78"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">postData</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">urllib</span><span class="crayon-sy">.</span><span class="crayon-e">urlencode</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">post</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5a69274d8f1ea052724256-79"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#设置代理</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1ea052724256-80"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">proxy</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">urllib2</span><span class="crayon-sy">.</span><span class="crayon-e">ProxyHandler</span><span class="crayon-sy">(</span><span class="crayon-sy">{</span><span class="crayon-s">'http'</span><span class="crayon-o">:</span><span class="crayon-v">self</span><span class="crayon-sy">.</span><span class="crayon-v">proxyURL</span><span class="crayon-sy">}</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5a69274d8f1ea052724256-81"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#设置cookie</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1ea052724256-82"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">cookie</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">cookielib</span><span class="crayon-sy">.</span><span class="crayon-e">LWPCookieJar</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5a69274d8f1ea052724256-83"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#设置cookie处理器</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1ea052724256-84"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">cookieHandler</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">urllib2</span><span class="crayon-sy">.</span><span class="crayon-e">HTTPCookieProcessor</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">cookie</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5a69274d8f1ea052724256-85"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#设置登录时用到的opener，它的open方法相当于urllib2.urlopen</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1ea052724256-86"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">opener</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">urllib2</span><span class="crayon-sy">.</span><span class="crayon-e">build_opener</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">cookieHandler</span><span class="crayon-sy">,</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">proxy</span><span class="crayon-sy">,</span><span class="crayon-v">urllib2</span><span class="crayon-sy">.</span><span class="crayon-v">HTTPHandler</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5a69274d8f1ea052724256-87">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1ea052724256-88">&nbsp;</div><div class="crayon-line" id="crayon-5a69274d8f1ea052724256-89"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#得到是否需要输入验证码，这次请求的相应有时会不同，有时需要验证有时不需要</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1ea052724256-90"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">def </span><span class="crayon-e">needIdenCode</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5a69274d8f1ea052724256-91"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#第一次登录获取验证码尝试，构建request</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1ea052724256-92"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">request</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">urllib2</span><span class="crayon-sy">.</span><span class="crayon-e">Request</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">loginURL</span><span class="crayon-sy">,</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">postData</span><span class="crayon-sy">,</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">loginHeaders</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5a69274d8f1ea052724256-93"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#得到第一次登录尝试的相应</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1ea052724256-94"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">response</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">opener</span><span class="crayon-sy">.</span><span class="crayon-e">open</span><span class="crayon-sy">(</span><span class="crayon-v">request</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5a69274d8f1ea052724256-95"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#获取其中的内容</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1ea052724256-96"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">content</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">response</span><span class="crayon-sy">.</span><span class="crayon-e">read</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-e">decode</span><span class="crayon-sy">(</span><span class="crayon-s">'gbk'</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5a69274d8f1ea052724256-97"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#获取状态吗</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1ea052724256-98"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">status</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">response</span><span class="crayon-sy">.</span><span class="crayon-e">getcode</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5a69274d8f1ea052724256-99"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#状态码为200，获取成功</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1ea052724256-100"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">status</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-cn">200</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5a69274d8f1ea052724256-101"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">print</span><span class="crayon-h"> </span><span class="crayon-i">u</span><span class="crayon-s">"获取请求成功"</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1ea052724256-102"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801这六个字是请输入验证码的utf-8编码</span></div><div class="crayon-line" id="crayon-5a69274d8f1ea052724256-103"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">pattern</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">re</span><span class="crayon-sy">.</span><span class="crayon-e">compile</span><span class="crayon-sy">(</span><span class="crayon-i">u</span><span class="crayon-s">'\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801'</span><span class="crayon-sy">,</span><span class="crayon-v">re</span><span class="crayon-sy">.</span><span class="crayon-v">S</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1ea052724256-104"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">result</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">re</span><span class="crayon-sy">.</span><span class="crayon-e">search</span><span class="crayon-sy">(</span><span class="crayon-v">pattern</span><span class="crayon-sy">,</span><span class="crayon-v">content</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5a69274d8f1ea052724256-105"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#如果找到该字符，代表需要输入验证码</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1ea052724256-106"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">result</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5a69274d8f1ea052724256-107"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">print</span><span class="crayon-h"> </span><span class="crayon-i">u</span><span class="crayon-s">"此次安全验证异常，您需要输入验证码"</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1ea052724256-108"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">content</span></div><div class="crayon-line" id="crayon-5a69274d8f1ea052724256-109"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#否则不需要</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1ea052724256-110"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">else</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5a69274d8f1ea052724256-111"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">print</span><span class="crayon-h"> </span><span class="crayon-i">u</span><span class="crayon-s">"此次安全验证通过，您这次不需要输入验证码"</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1ea052724256-112"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-t">False</span></div><div class="crayon-line" id="crayon-5a69274d8f1ea052724256-113"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">else</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1ea052724256-114"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">print</span><span class="crayon-h"> </span><span class="crayon-i">u</span><span class="crayon-s">"获取请求失败"</span></div><div class="crayon-line" id="crayon-5a69274d8f1ea052724256-115">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1ea052724256-116"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#得到验证码图片</span></div><div class="crayon-line" id="crayon-5a69274d8f1ea052724256-117"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">def </span><span class="crayon-e">getIdenCode</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">,</span><span class="crayon-v">page</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1ea052724256-118"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#得到验证码的图片</span></div><div class="crayon-line" id="crayon-5a69274d8f1ea052724256-119"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">pattern</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">re</span><span class="crayon-sy">.</span><span class="crayon-e">compile</span><span class="crayon-sy">(</span><span class="crayon-s">'&lt;img id="J_StandardCode_m.*?data-src="(.*?)"'</span><span class="crayon-sy">,</span><span class="crayon-v">re</span><span class="crayon-sy">.</span><span class="crayon-v">S</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1ea052724256-120"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#匹配的结果</span></div><div class="crayon-line" id="crayon-5a69274d8f1ea052724256-121"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">matchResult</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">re</span><span class="crayon-sy">.</span><span class="crayon-e">search</span><span class="crayon-sy">(</span><span class="crayon-v">pattern</span><span class="crayon-sy">,</span><span class="crayon-v">page</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1ea052724256-122"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#已经匹配得到内容，并且验证码图片链接不为空</span></div><div class="crayon-line" id="crayon-5a69274d8f1ea052724256-123"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-e">matchResult </span><span class="crayon-st">and</span><span class="crayon-h"> </span><span class="crayon-v">matchResult</span><span class="crayon-sy">.</span><span class="crayon-e">group</span><span class="crayon-sy">(</span><span class="crayon-cn">1</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1ea052724256-124"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">print </span><span class="crayon-v">matchResult</span><span class="crayon-sy">.</span><span class="crayon-e">group</span><span class="crayon-sy">(</span><span class="crayon-cn">1</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5a69274d8f1ea052724256-125"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">matchResult</span><span class="crayon-sy">.</span><span class="crayon-e">group</span><span class="crayon-sy">(</span><span class="crayon-cn">1</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1ea052724256-126"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">else</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5a69274d8f1ea052724256-127"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">print</span><span class="crayon-h"> </span><span class="crayon-i">u</span><span class="crayon-s">"没有找到验证码内容"</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1ea052724256-128"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-t">False</span></div><div class="crayon-line" id="crayon-5a69274d8f1ea052724256-129">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1ea052724256-130"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#程序运行主干</span></div><div class="crayon-line" id="crayon-5a69274d8f1ea052724256-131"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">def </span><span class="crayon-e">main</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1ea052724256-132"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#是否需要验证码，是则得到页面内容，不是则返回False</span></div><div class="crayon-line" id="crayon-5a69274d8f1ea052724256-133"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">needResult</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-e">needIdenCode</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1ea052724256-134"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-st">not</span><span class="crayon-h"> </span><span class="crayon-v">needResult</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-t">False</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5a69274d8f1ea052724256-135"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">print</span><span class="crayon-h"> </span><span class="crayon-i">u</span><span class="crayon-s">"您需要手动输入验证码"</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1ea052724256-136"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">idenCode</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-e">getIdenCode</span><span class="crayon-sy">(</span><span class="crayon-v">needResult</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5a69274d8f1ea052724256-137"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#得到了验证码的链接</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1ea052724256-138"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-st">not</span><span class="crayon-h"> </span><span class="crayon-v">idenCode</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-t">False</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5a69274d8f1ea052724256-139"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">print</span><span class="crayon-h"> </span><span class="crayon-i">u</span><span class="crayon-s">"验证码获取成功"</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1ea052724256-140"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">print</span><span class="crayon-h"> </span><span class="crayon-i">u</span><span class="crayon-s">"请在浏览器中输入您看到的验证码"</span></div><div class="crayon-line" id="crayon-5a69274d8f1ea052724256-141"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">webbrowser</span><span class="crayon-sy">.</span><span class="crayon-e">open_new_tab</span><span class="crayon-sy">(</span><span class="crayon-v">idenCode</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1ea052724256-142"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#验证码链接为空，无效验证码</span></div><div class="crayon-line" id="crayon-5a69274d8f1ea052724256-143"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">else</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1ea052724256-144"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">print</span><span class="crayon-h"> </span><span class="crayon-i">u</span><span class="crayon-s">"验证码获取失败，请重试"</span></div><div class="crayon-line" id="crayon-5a69274d8f1ea052724256-145"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">else</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1ea052724256-146"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">print</span><span class="crayon-h"> </span><span class="crayon-i">u</span><span class="crayon-s">"不需要输入验证码"</span></div><div class="crayon-line" id="crayon-5a69274d8f1ea052724256-147">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1ea052724256-148">&nbsp;</div><div class="crayon-line" id="crayon-5a69274d8f1ea052724256-149">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1ea052724256-150"><span class="crayon-v">taobao</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">Taobao</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5a69274d8f1ea052724256-151"><span class="crayon-v">taobao</span><span class="crayon-sy">.</span><span class="crayon-e">main</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0066 seconds] -->
<p>恩，请把里面的 ua 和 password2 还有用户名换成自己的进行尝试，用我的可能会产生错误的。</p>
<p>运行结果</p>
<p><a href="http://qiniu.cuiqingcai.com/wp-content/uploads/2015/02/QQ截图20150225015508.jpg"><img class="alignnone size-full wp-image-1087" src="http://qiniu.cuiqingcai.com/wp-content/uploads/2015/02/QQ截图20150225015508.jpg" alt="QQ截图20150225015508" width="830" height="145" srcset="https://qiniu.cuiqingcai.com/wp-content/uploads/2015/02/QQ截图20150225015508.jpg 830w, https://qiniu.cuiqingcai.com/wp-content/uploads/2015/02/QQ截图20150225015508-300x52.jpg 300w" sizes="(max-width: 830px) 100vw, 830px" /></a></p>
<p>然后会蹦出浏览器，显示了验证码的内容，这个需要你来手动输入。</p>
<p>在这里有小伙伴向我反映有这么个错误</p>
<p><a href="http://qiniu.cuiqingcai.com/wp-content/uploads/2015/02/QQ图片20150227181617.png"><img class="alignnone size-full wp-image-1184" src="http://qiniu.cuiqingcai.com/wp-content/uploads/2015/02/QQ图片20150227181617.png" alt="QQ图片20150227181617" width="644" height="370" srcset="https://qiniu.cuiqingcai.com/wp-content/uploads/2015/02/QQ图片20150227181617.png 644w, https://qiniu.cuiqingcai.com/wp-content/uploads/2015/02/QQ图片20150227181617-300x172.png 300w" sizes="(max-width: 644px) 100vw, 644px" /></a></p>
<p>经过查证，竟然是版本问题，博主本人用的是 2.7.7，而小伙伴用的是 2.7.9。后来换成 2.7.7 就好了&#8230;，我也是醉了，希望有相同错误的小伙伴，可以尝试换一下版本&#8230;</p>
<p>好啦，运行时会弹出浏览器，如图</p>
<p><a href="http://qiniu.cuiqingcai.com/wp-content/uploads/2015/02/QQ截图20150225015717.jpg"><img class="alignnone size-full wp-image-1088" src="http://qiniu.cuiqingcai.com/wp-content/uploads/2015/02/QQ截图20150225015717.jpg" alt="QQ截图20150225015717" width="1017" height="131" srcset="https://qiniu.cuiqingcai.com/wp-content/uploads/2015/02/QQ截图20150225015717.jpg 1017w, https://qiniu.cuiqingcai.com/wp-content/uploads/2015/02/QQ截图20150225015717-300x39.jpg 300w" sizes="(max-width: 1017px) 100vw, 1017px" /></a></p>
<p>那么，我们现在需要手动输入验证码，重新向登录界面发出登录请求，之前的post数据内容加入验证码这一项，重新请求一次，如果请求成功，则会返回下一步我们需要的 J_HToken，如果验证码输入错误，则会返回验证码输入错误的选项。好，下面，我已经写到了获取J_HToken的进度，代码如下，现在运行程序，会蹦出浏览器，然后提示你输入验证码，用户手动输入之后，则会返回一个页面，我们提取出 J_Htoken即可。</p>
<p>注意，到现在为止，你还没有登录成功，只是获取到了J_HToken的值。</p>
<p>目前写到的代码如下</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->

		<div id="crayon-5a69274d8f1f9750057481" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; float: left; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="切换是否显示行编号"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="纯文本显示代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="切换自动换行"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="点击展开代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="复制代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="在新窗口中显示代码"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea  class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
__author__ = 'CQC'
# -*- coding:utf-8 -*-

import urllib
import urllib2
import cookielib
import re
import webbrowser

#模拟登录淘宝类
class Taobao:

    #初始化方法
    def __init__(self):
        #登录的URL
        self.loginURL = "https://login.taobao.com/member/login.jhtml"
        #代理IP地址，防止自己的IP被封禁
        self.proxyURL = 'http://120.193.146.97:843'
        #登录POST数据时发送的头部信息
        self.loginHeaders =  {
            'Host':'login.taobao.com',
            'User-Agent' : 'Mozilla/5.0 (Windows NT 6.1; WOW64; rv:35.0) Gecko/20100101 Firefox/35.0',
            'Referer' : 'https://login.taobao.com/member/login.jhtml',
            'Content-Type': 'application/x-www-form-urlencoded',
            'Connection' : 'Keep-Alive'
        }
        #用户名
        self.username = 'cqcre'
        #ua字符串，经过淘宝ua算法计算得出，包含了时间戳,浏览器,屏幕分辨率,随机数,鼠标移动,鼠标点击,其实还有键盘输入记录,鼠标移动的记录、点击的记录等等的信息
        self.ua = '191UW5TcyMNYQwiAiwTR3tCf0J/QnhEcUpkMmQ=|Um5Ockt0TXdPc011TXVKdyE=|U2xMHDJ+H2QJZwBxX39Rb1d5WXcrSixAJ1kjDVsN|VGhXd1llXGNaYFhkWmJaYl1gV2pIdUtyTXRKfkN4Qn1FeEF6R31TBQ==|VWldfS0TMw8xDjYWKhAwHiUdOA9wCDEVaxgkATdcNU8iDFoM|VmNDbUMV|V2NDbUMV|WGRYeCgGZhtmH2VScVI2UT5fORtmD2gCawwuRSJHZAFsCWMOdVYyVTpbPR99HWAFYVMpUDUFORshHiQdJR0jAT0JPQc/BDoFPgooFDZtVBR5Fn9VOwt2EWhCOVQ4WSJPJFkHXhgoSDVIMRgnHyFqQ3xEezceIRkmahRqFDZLIkUvRiEDaA9qQ3xEezcZORc5bzk=|WWdHFy0TMw8vEy0UIQE0ADgYJBohGjoAOw4uEiwXLAw2DThuOA==|WmBAED5+KnIbdRh1GXgFQSZbGFdrUm1UblZqVGxQa1ZiTGxQcEp1I3U=|W2NDEz19KXENZwJjHkY7Ui9OJQsre09zSWlXY1oMLBExHzERLxsuE0UT|XGZGFjh4LHQdcx5zH34DRyBdHlFtVGtSaFBsUmpWbVBkSmpXd05zTnMlcw==|XWdHFzl5LXUJYwZnGkI/VitKIQ8vEzMKNws3YTc=|XmdaZ0d6WmVFeUB8XGJaYEB4TGxWbk5yTndXa0tyT29Ta0t1QGBeZDI='
        #密码，在这里不能输入真实密码，淘宝对此密码进行了加密处理，256位，此处为加密后的密码
        self.password2 = '7511aa6854629e45de220d29174f1066537a73420ef6dbb5b46f202396703a2d56b0312df8769d886e6ca63d587fdbb99ee73927e8c07d9c88cd02182e1a21edc13fb8e0a4a2a4b5c253bf38484bd0e08199e03eb9bf7b365a5c673c03407d812b91394f0d3c7564042e3f2b11d156aeea37ad6460118914125ab8f8ac466f'
        self.post = post = {
            'ua':self.ua,
            'TPL_checkcode':'',
            'CtrlVersion': '1,0,0,7',
            'TPL_password':'',
            'TPL_redirect_url':'http://i.taobao.com/my_taobao.htm?nekot=udm8087E1424147022443',
            'TPL_username':self.username,
            'loginsite':'0',
            'newlogin':'0',
            'from':'tb',
            'fc':'default',
            'style':'default',
            'css_style':'',
            'tid':'XOR_1_000000000000000000000000000000_625C4720470A0A050976770A',
            'support':'000001',
            'loginType':'4',
            'minititle':'',
            'minipara':'',
            'umto':'NaN',
            'pstrong':'3',
            'llnick':'',
            'sign':'',
            'need_sign':'',
            'isIgnore':'',
            'full_redirect':'',
            'popid':'',
            'callback':'',
            'guf':'',
            'not_duplite_str':'',
            'need_user_id':'',
            'poy':'',
            'gvfdcname':'10',
            'gvfdcre':'',
            'from_encoding ':'',
            'sub':'',
            'TPL_password_2':self.password2,
            'loginASR':'1',
            'loginASRSuc':'1',
            'allp':'',
            'oslanguage':'zh-CN',
            'sr':'1366*768',
            'osVer':'windows|6.1',
            'naviVer':'firefox|35'
        }
        #将POST的数据进行编码转换
        self.postData = urllib.urlencode(self.post)
        #设置代理
        self.proxy = urllib2.ProxyHandler({'http':self.proxyURL})
        #设置cookie
        self.cookie = cookielib.LWPCookieJar()
        #设置cookie处理器
        self.cookieHandler = urllib2.HTTPCookieProcessor(self.cookie)
        #设置登录时用到的opener，它的open方法相当于urllib2.urlopen
        self.opener = urllib2.build_opener(self.cookieHandler,self.proxy,urllib2.HTTPHandler)


    #得到是否需要输入验证码，这次请求的相应有时会不同，有时需要验证有时不需要
    def needCheckCode(self):
        #第一次登录获取验证码尝试，构建request
        request = urllib2.Request(self.loginURL,self.postData,self.loginHeaders)
        #得到第一次登录尝试的相应
        response = self.opener.open(request)
        #获取其中的内容
        content = response.read().decode('gbk')
        #获取状态吗
        status = response.getcode()
        #状态码为200，获取成功
        if status == 200:
            print u"获取请求成功"
            #\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801这六个字是请输入验证码的utf-8编码
            pattern = re.compile(u'\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801',re.S)
            result = re.search(pattern,content)
            print content
            #如果找到该字符，代表需要输入验证码
            if result:
                print u"此次安全验证异常，您需要输入验证码"
                return content
            #否则不需要
            else:
                #返回结果直接带有J_HToken字样，表明直接验证通过
                tokenPattern = re.compile('id="J_HToken"')
                tokenMatch = re.search(tokenPattern,content)
                if tokenMatch:
                    print u"此次安全验证通过，您这次不需要输入验证码"
                    return False
        else:
            print u"获取请求失败"
            return None

    #得到验证码图片
    def getCheckCode(self,page):
        #得到验证码的图片
        pattern = re.compile('&lt;img id="J_StandardCode_m.*?data-src="(.*?)"',re.S)
        #匹配的结果
        matchResult = re.search(pattern,page)
        #已经匹配得到内容，并且验证码图片链接不为空
        if matchResult and matchResult.group(1):
            print matchResult.group(1)
            return matchResult.group(1)
        else:
            print u"没有找到验证码内容"
            return False


    #输入验证码，重新请求，如果验证成功，则返回J_HToken
    def loginWithCheckCode(self):
        #提示用户输入验证码
        checkcode = raw_input('请输入验证码:')
        #将验证码重新添加到post的数据中
        self.post['TPL_checkcode'] = checkcode
        #对post数据重新进行编码
        self.postData = urllib.urlencode(self.post)
        try:
            #再次构建请求，加入验证码之后的第二次登录尝试
            request = urllib2.Request(self.loginURL,self.postData,self.loginHeaders)
            #得到第一次登录尝试的相应
            response = self.opener.open(request)
            #获取其中的内容
            content = response.read().decode('gbk')
            #检测验证码错误的正则表达式，\u9a8c\u8bc1\u7801\u9519\u8bef 是验证码错误五个字的编码
            pattern = re.compile(u'\u9a8c\u8bc1\u7801\u9519\u8bef',re.S)
            result = re.search(pattern,content)
            #如果返回页面包括了，验证码错误五个字
            if result:
                print u"验证码输入错误"
                return False
            else:
                #返回结果直接带有J_HToken字样，说明验证码输入成功，成功跳转到了获取HToken的界面
                tokenPattern = re.compile('id="J_HToken" value="(.*?)"')
                tokenMatch = re.search(tokenPattern,content)
                #如果匹配成功，找到了J_HToken
                if tokenMatch:
                    print u"验证码输入正确"
                    print tokenMatch.group(1)
                    return tokenMatch.group(1)
                else:
                    #匹配失败，J_Token获取失败
                    print u"J_Token获取失败"
                    return False
        except urllib2.HTTPError, e:
            print u"连接服务器出错，错误原因",e.reason
            return False

    #程序运行主干
    def main(self):
        #是否需要验证码，是则得到页面内容，不是则返回False
        needResult = self.needCheckCode()
        #请求获取失败，得到的结果是None
        if not needResult ==None:
            if not needResult == False:
                print u"您需要手动输入验证码"
                idenCode = self.getCheckCode(needResult)
                #得到了验证码的链接
                if not idenCode == False:
                    print u"验证码获取成功"
                    print u"请在浏览器中输入您看到的验证码"
                    webbrowser.open_new_tab(idenCode)
                    J_HToken = self.loginWithCheckCode()
                    print "J_HToken",J_HToken
                #验证码链接为空，无效验证码
                else:
                    print u"验证码获取失败，请重试"
            else:
                print u"不需要输入验证码"
        else:
            print u"请求登录页面失败，无法确认是否需要验证码"



taobao = Taobao()
taobao.main()</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5a69274d8f1f9750057481-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1f9750057481-2">2</div><div class="crayon-num" data-line="crayon-5a69274d8f1f9750057481-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1f9750057481-4">4</div><div class="crayon-num" data-line="crayon-5a69274d8f1f9750057481-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1f9750057481-6">6</div><div class="crayon-num" data-line="crayon-5a69274d8f1f9750057481-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1f9750057481-8">8</div><div class="crayon-num" data-line="crayon-5a69274d8f1f9750057481-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1f9750057481-10">10</div><div class="crayon-num" data-line="crayon-5a69274d8f1f9750057481-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1f9750057481-12">12</div><div class="crayon-num" data-line="crayon-5a69274d8f1f9750057481-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1f9750057481-14">14</div><div class="crayon-num" data-line="crayon-5a69274d8f1f9750057481-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1f9750057481-16">16</div><div class="crayon-num" data-line="crayon-5a69274d8f1f9750057481-17">17</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1f9750057481-18">18</div><div class="crayon-num" data-line="crayon-5a69274d8f1f9750057481-19">19</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1f9750057481-20">20</div><div class="crayon-num" data-line="crayon-5a69274d8f1f9750057481-21">21</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1f9750057481-22">22</div><div class="crayon-num" data-line="crayon-5a69274d8f1f9750057481-23">23</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1f9750057481-24">24</div><div class="crayon-num" data-line="crayon-5a69274d8f1f9750057481-25">25</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1f9750057481-26">26</div><div class="crayon-num" data-line="crayon-5a69274d8f1f9750057481-27">27</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1f9750057481-28">28</div><div class="crayon-num" data-line="crayon-5a69274d8f1f9750057481-29">29</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1f9750057481-30">30</div><div class="crayon-num" data-line="crayon-5a69274d8f1f9750057481-31">31</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1f9750057481-32">32</div><div class="crayon-num" data-line="crayon-5a69274d8f1f9750057481-33">33</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1f9750057481-34">34</div><div class="crayon-num" data-line="crayon-5a69274d8f1f9750057481-35">35</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1f9750057481-36">36</div><div class="crayon-num" data-line="crayon-5a69274d8f1f9750057481-37">37</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1f9750057481-38">38</div><div class="crayon-num" data-line="crayon-5a69274d8f1f9750057481-39">39</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1f9750057481-40">40</div><div class="crayon-num" data-line="crayon-5a69274d8f1f9750057481-41">41</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1f9750057481-42">42</div><div class="crayon-num" data-line="crayon-5a69274d8f1f9750057481-43">43</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1f9750057481-44">44</div><div class="crayon-num" data-line="crayon-5a69274d8f1f9750057481-45">45</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1f9750057481-46">46</div><div class="crayon-num" data-line="crayon-5a69274d8f1f9750057481-47">47</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1f9750057481-48">48</div><div class="crayon-num" data-line="crayon-5a69274d8f1f9750057481-49">49</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1f9750057481-50">50</div><div class="crayon-num" data-line="crayon-5a69274d8f1f9750057481-51">51</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1f9750057481-52">52</div><div class="crayon-num" data-line="crayon-5a69274d8f1f9750057481-53">53</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1f9750057481-54">54</div><div class="crayon-num" data-line="crayon-5a69274d8f1f9750057481-55">55</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1f9750057481-56">56</div><div class="crayon-num" data-line="crayon-5a69274d8f1f9750057481-57">57</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1f9750057481-58">58</div><div class="crayon-num" data-line="crayon-5a69274d8f1f9750057481-59">59</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1f9750057481-60">60</div><div class="crayon-num" data-line="crayon-5a69274d8f1f9750057481-61">61</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1f9750057481-62">62</div><div class="crayon-num" data-line="crayon-5a69274d8f1f9750057481-63">63</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1f9750057481-64">64</div><div class="crayon-num" data-line="crayon-5a69274d8f1f9750057481-65">65</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1f9750057481-66">66</div><div class="crayon-num" data-line="crayon-5a69274d8f1f9750057481-67">67</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1f9750057481-68">68</div><div class="crayon-num" data-line="crayon-5a69274d8f1f9750057481-69">69</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1f9750057481-70">70</div><div class="crayon-num" data-line="crayon-5a69274d8f1f9750057481-71">71</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1f9750057481-72">72</div><div class="crayon-num" data-line="crayon-5a69274d8f1f9750057481-73">73</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1f9750057481-74">74</div><div class="crayon-num" data-line="crayon-5a69274d8f1f9750057481-75">75</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1f9750057481-76">76</div><div class="crayon-num" data-line="crayon-5a69274d8f1f9750057481-77">77</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1f9750057481-78">78</div><div class="crayon-num" data-line="crayon-5a69274d8f1f9750057481-79">79</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1f9750057481-80">80</div><div class="crayon-num" data-line="crayon-5a69274d8f1f9750057481-81">81</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1f9750057481-82">82</div><div class="crayon-num" data-line="crayon-5a69274d8f1f9750057481-83">83</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1f9750057481-84">84</div><div class="crayon-num" data-line="crayon-5a69274d8f1f9750057481-85">85</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1f9750057481-86">86</div><div class="crayon-num" data-line="crayon-5a69274d8f1f9750057481-87">87</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1f9750057481-88">88</div><div class="crayon-num" data-line="crayon-5a69274d8f1f9750057481-89">89</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1f9750057481-90">90</div><div class="crayon-num" data-line="crayon-5a69274d8f1f9750057481-91">91</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1f9750057481-92">92</div><div class="crayon-num" data-line="crayon-5a69274d8f1f9750057481-93">93</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1f9750057481-94">94</div><div class="crayon-num" data-line="crayon-5a69274d8f1f9750057481-95">95</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1f9750057481-96">96</div><div class="crayon-num" data-line="crayon-5a69274d8f1f9750057481-97">97</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1f9750057481-98">98</div><div class="crayon-num" data-line="crayon-5a69274d8f1f9750057481-99">99</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1f9750057481-100">100</div><div class="crayon-num" data-line="crayon-5a69274d8f1f9750057481-101">101</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1f9750057481-102">102</div><div class="crayon-num" data-line="crayon-5a69274d8f1f9750057481-103">103</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1f9750057481-104">104</div><div class="crayon-num" data-line="crayon-5a69274d8f1f9750057481-105">105</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1f9750057481-106">106</div><div class="crayon-num" data-line="crayon-5a69274d8f1f9750057481-107">107</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1f9750057481-108">108</div><div class="crayon-num" data-line="crayon-5a69274d8f1f9750057481-109">109</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1f9750057481-110">110</div><div class="crayon-num" data-line="crayon-5a69274d8f1f9750057481-111">111</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1f9750057481-112">112</div><div class="crayon-num" data-line="crayon-5a69274d8f1f9750057481-113">113</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1f9750057481-114">114</div><div class="crayon-num" data-line="crayon-5a69274d8f1f9750057481-115">115</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1f9750057481-116">116</div><div class="crayon-num" data-line="crayon-5a69274d8f1f9750057481-117">117</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1f9750057481-118">118</div><div class="crayon-num" data-line="crayon-5a69274d8f1f9750057481-119">119</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1f9750057481-120">120</div><div class="crayon-num" data-line="crayon-5a69274d8f1f9750057481-121">121</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1f9750057481-122">122</div><div class="crayon-num" data-line="crayon-5a69274d8f1f9750057481-123">123</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1f9750057481-124">124</div><div class="crayon-num" data-line="crayon-5a69274d8f1f9750057481-125">125</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1f9750057481-126">126</div><div class="crayon-num" data-line="crayon-5a69274d8f1f9750057481-127">127</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1f9750057481-128">128</div><div class="crayon-num" data-line="crayon-5a69274d8f1f9750057481-129">129</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1f9750057481-130">130</div><div class="crayon-num" data-line="crayon-5a69274d8f1f9750057481-131">131</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1f9750057481-132">132</div><div class="crayon-num" data-line="crayon-5a69274d8f1f9750057481-133">133</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1f9750057481-134">134</div><div class="crayon-num" data-line="crayon-5a69274d8f1f9750057481-135">135</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1f9750057481-136">136</div><div class="crayon-num" data-line="crayon-5a69274d8f1f9750057481-137">137</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1f9750057481-138">138</div><div class="crayon-num" data-line="crayon-5a69274d8f1f9750057481-139">139</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1f9750057481-140">140</div><div class="crayon-num" data-line="crayon-5a69274d8f1f9750057481-141">141</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1f9750057481-142">142</div><div class="crayon-num" data-line="crayon-5a69274d8f1f9750057481-143">143</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1f9750057481-144">144</div><div class="crayon-num" data-line="crayon-5a69274d8f1f9750057481-145">145</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1f9750057481-146">146</div><div class="crayon-num" data-line="crayon-5a69274d8f1f9750057481-147">147</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1f9750057481-148">148</div><div class="crayon-num" data-line="crayon-5a69274d8f1f9750057481-149">149</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1f9750057481-150">150</div><div class="crayon-num" data-line="crayon-5a69274d8f1f9750057481-151">151</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1f9750057481-152">152</div><div class="crayon-num" data-line="crayon-5a69274d8f1f9750057481-153">153</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1f9750057481-154">154</div><div class="crayon-num" data-line="crayon-5a69274d8f1f9750057481-155">155</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1f9750057481-156">156</div><div class="crayon-num" data-line="crayon-5a69274d8f1f9750057481-157">157</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1f9750057481-158">158</div><div class="crayon-num" data-line="crayon-5a69274d8f1f9750057481-159">159</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1f9750057481-160">160</div><div class="crayon-num" data-line="crayon-5a69274d8f1f9750057481-161">161</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1f9750057481-162">162</div><div class="crayon-num" data-line="crayon-5a69274d8f1f9750057481-163">163</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1f9750057481-164">164</div><div class="crayon-num" data-line="crayon-5a69274d8f1f9750057481-165">165</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1f9750057481-166">166</div><div class="crayon-num" data-line="crayon-5a69274d8f1f9750057481-167">167</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1f9750057481-168">168</div><div class="crayon-num" data-line="crayon-5a69274d8f1f9750057481-169">169</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1f9750057481-170">170</div><div class="crayon-num" data-line="crayon-5a69274d8f1f9750057481-171">171</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1f9750057481-172">172</div><div class="crayon-num" data-line="crayon-5a69274d8f1f9750057481-173">173</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1f9750057481-174">174</div><div class="crayon-num" data-line="crayon-5a69274d8f1f9750057481-175">175</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1f9750057481-176">176</div><div class="crayon-num" data-line="crayon-5a69274d8f1f9750057481-177">177</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1f9750057481-178">178</div><div class="crayon-num" data-line="crayon-5a69274d8f1f9750057481-179">179</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1f9750057481-180">180</div><div class="crayon-num" data-line="crayon-5a69274d8f1f9750057481-181">181</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1f9750057481-182">182</div><div class="crayon-num" data-line="crayon-5a69274d8f1f9750057481-183">183</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1f9750057481-184">184</div><div class="crayon-num" data-line="crayon-5a69274d8f1f9750057481-185">185</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1f9750057481-186">186</div><div class="crayon-num" data-line="crayon-5a69274d8f1f9750057481-187">187</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1f9750057481-188">188</div><div class="crayon-num" data-line="crayon-5a69274d8f1f9750057481-189">189</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1f9750057481-190">190</div><div class="crayon-num" data-line="crayon-5a69274d8f1f9750057481-191">191</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1f9750057481-192">192</div><div class="crayon-num" data-line="crayon-5a69274d8f1f9750057481-193">193</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1f9750057481-194">194</div><div class="crayon-num" data-line="crayon-5a69274d8f1f9750057481-195">195</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1f9750057481-196">196</div><div class="crayon-num" data-line="crayon-5a69274d8f1f9750057481-197">197</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1f9750057481-198">198</div><div class="crayon-num" data-line="crayon-5a69274d8f1f9750057481-199">199</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1f9750057481-200">200</div><div class="crayon-num" data-line="crayon-5a69274d8f1f9750057481-201">201</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f1f9750057481-202">202</div><div class="crayon-num" data-line="crayon-5a69274d8f1f9750057481-203">203</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5a69274d8f1f9750057481-1"><span class="crayon-v">__author__</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'CQC'</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1f9750057481-2"><span class="crayon-p"># -*- coding:utf-8 -*-</span></div><div class="crayon-line" id="crayon-5a69274d8f1f9750057481-3">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1f9750057481-4"><span class="crayon-e">import </span><span class="crayon-e">urllib</span></div><div class="crayon-line" id="crayon-5a69274d8f1f9750057481-5"><span class="crayon-e">import </span><span class="crayon-e">urllib2</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1f9750057481-6"><span class="crayon-e">import </span><span class="crayon-e">cookielib</span></div><div class="crayon-line" id="crayon-5a69274d8f1f9750057481-7"><span class="crayon-e">import </span><span class="crayon-e">re</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1f9750057481-8"><span class="crayon-e">import </span><span class="crayon-v">webbrowser</span></div><div class="crayon-line" id="crayon-5a69274d8f1f9750057481-9">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1f9750057481-10"><span class="crayon-p">#模拟登录淘宝类</span></div><div class="crayon-line" id="crayon-5a69274d8f1f9750057481-11"><span class="crayon-t">class</span><span class="crayon-h"> </span><span class="crayon-v">Taobao</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1f9750057481-12">&nbsp;</div><div class="crayon-line" id="crayon-5a69274d8f1f9750057481-13"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#初始化方法</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1f9750057481-14"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">def </span><span class="crayon-e">__init__</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5a69274d8f1f9750057481-15"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#登录的URL</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1f9750057481-16"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">loginURL</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">"https://login.taobao.com/member/login.jhtml"</span></div><div class="crayon-line" id="crayon-5a69274d8f1f9750057481-17"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#代理IP地址，防止自己的IP被封禁</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1f9750057481-18"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">proxyURL</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'http://120.193.146.97:843'</span></div><div class="crayon-line" id="crayon-5a69274d8f1f9750057481-19"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#登录POST数据时发送的头部信息</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1f9750057481-20"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">loginHeaders</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a69274d8f1f9750057481-21"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'Host'</span><span class="crayon-o">:</span><span class="crayon-s">'login.taobao.com'</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1f9750057481-22"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'User-Agent'</span><span class="crayon-h"> </span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">'Mozilla/5.0 (Windows NT 6.1; WOW64; rv:35.0) Gecko/20100101 Firefox/35.0'</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5a69274d8f1f9750057481-23"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'Referer'</span><span class="crayon-h"> </span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">'https://login.taobao.com/member/login.jhtml'</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1f9750057481-24"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'Content-Type'</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">'application/x-www-form-urlencoded'</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5a69274d8f1f9750057481-25"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'Connection'</span><span class="crayon-h"> </span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">'Keep-Alive'</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1f9750057481-26"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-5a69274d8f1f9750057481-27"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#用户名</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1f9750057481-28"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">username</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'cqcre'</span></div><div class="crayon-line" id="crayon-5a69274d8f1f9750057481-29"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#ua字符串，经过淘宝ua算法计算得出，包含了时间戳,浏览器,屏幕分辨率,随机数,鼠标移动,鼠标点击,其实还有键盘输入记录,鼠标移动的记录、点击的记录等等的信息</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1f9750057481-30"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">ua</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'191UW5TcyMNYQwiAiwTR3tCf0J/QnhEcUpkMmQ=|Um5Ockt0TXdPc011TXVKdyE=|U2xMHDJ+H2QJZwBxX39Rb1d5WXcrSixAJ1kjDVsN|VGhXd1llXGNaYFhkWmJaYl1gV2pIdUtyTXRKfkN4Qn1FeEF6R31TBQ==|VWldfS0TMw8xDjYWKhAwHiUdOA9wCDEVaxgkATdcNU8iDFoM|VmNDbUMV|V2NDbUMV|WGRYeCgGZhtmH2VScVI2UT5fORtmD2gCawwuRSJHZAFsCWMOdVYyVTpbPR99HWAFYVMpUDUFORshHiQdJR0jAT0JPQc/BDoFPgooFDZtVBR5Fn9VOwt2EWhCOVQ4WSJPJFkHXhgoSDVIMRgnHyFqQ3xEezceIRkmahRqFDZLIkUvRiEDaA9qQ3xEezcZORc5bzk=|WWdHFy0TMw8vEy0UIQE0ADgYJBohGjoAOw4uEiwXLAw2DThuOA==|WmBAED5+KnIbdRh1GXgFQSZbGFdrUm1UblZqVGxQa1ZiTGxQcEp1I3U=|W2NDEz19KXENZwJjHkY7Ui9OJQsre09zSWlXY1oMLBExHzERLxsuE0UT|XGZGFjh4LHQdcx5zH34DRyBdHlFtVGtSaFBsUmpWbVBkSmpXd05zTnMlcw==|XWdHFzl5LXUJYwZnGkI/VitKIQ8vEzMKNws3YTc=|XmdaZ0d6WmVFeUB8XGJaYEB4TGxWbk5yTndXa0tyT29Ta0t1QGBeZDI='</span></div><div class="crayon-line" id="crayon-5a69274d8f1f9750057481-31"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#密码，在这里不能输入真实密码，淘宝对此密码进行了加密处理，256位，此处为加密后的密码</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1f9750057481-32"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">password2</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'7511aa6854629e45de220d29174f1066537a73420ef6dbb5b46f202396703a2d56b0312df8769d886e6ca63d587fdbb99ee73927e8c07d9c88cd02182e1a21edc13fb8e0a4a2a4b5c253bf38484bd0e08199e03eb9bf7b365a5c673c03407d812b91394f0d3c7564042e3f2b11d156aeea37ad6460118914125ab8f8ac466f'</span></div><div class="crayon-line" id="crayon-5a69274d8f1f9750057481-33"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">post</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">post</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1f9750057481-34"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'ua'</span><span class="crayon-o">:</span><span class="crayon-v">self</span><span class="crayon-sy">.</span><span class="crayon-v">ua</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5a69274d8f1f9750057481-35"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'TPL_checkcode'</span><span class="crayon-o">:</span><span class="crayon-s">''</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1f9750057481-36"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'CtrlVersion'</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">'1,0,0,7'</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5a69274d8f1f9750057481-37"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'TPL_password'</span><span class="crayon-o">:</span><span class="crayon-s">''</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1f9750057481-38"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'TPL_redirect_url'</span><span class="crayon-o">:</span><span class="crayon-s">'http://i.taobao.com/my_taobao.htm?nekot=udm8087E1424147022443'</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5a69274d8f1f9750057481-39"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'TPL_username'</span><span class="crayon-o">:</span><span class="crayon-v">self</span><span class="crayon-sy">.</span><span class="crayon-v">username</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1f9750057481-40"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'loginsite'</span><span class="crayon-o">:</span><span class="crayon-s">'0'</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5a69274d8f1f9750057481-41"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'newlogin'</span><span class="crayon-o">:</span><span class="crayon-s">'0'</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1f9750057481-42"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'from'</span><span class="crayon-o">:</span><span class="crayon-s">'tb'</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5a69274d8f1f9750057481-43"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'fc'</span><span class="crayon-o">:</span><span class="crayon-s">'default'</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1f9750057481-44"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'style'</span><span class="crayon-o">:</span><span class="crayon-s">'default'</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5a69274d8f1f9750057481-45"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'css_style'</span><span class="crayon-o">:</span><span class="crayon-s">''</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1f9750057481-46"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'tid'</span><span class="crayon-o">:</span><span class="crayon-s">'XOR_1_000000000000000000000000000000_625C4720470A0A050976770A'</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5a69274d8f1f9750057481-47"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'support'</span><span class="crayon-o">:</span><span class="crayon-s">'000001'</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1f9750057481-48"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'loginType'</span><span class="crayon-o">:</span><span class="crayon-s">'4'</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5a69274d8f1f9750057481-49"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'minititle'</span><span class="crayon-o">:</span><span class="crayon-s">''</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1f9750057481-50"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'minipara'</span><span class="crayon-o">:</span><span class="crayon-s">''</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5a69274d8f1f9750057481-51"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'umto'</span><span class="crayon-o">:</span><span class="crayon-s">'NaN'</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1f9750057481-52"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'pstrong'</span><span class="crayon-o">:</span><span class="crayon-s">'3'</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5a69274d8f1f9750057481-53"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'llnick'</span><span class="crayon-o">:</span><span class="crayon-s">''</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1f9750057481-54"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'sign'</span><span class="crayon-o">:</span><span class="crayon-s">''</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5a69274d8f1f9750057481-55"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'need_sign'</span><span class="crayon-o">:</span><span class="crayon-s">''</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1f9750057481-56"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'isIgnore'</span><span class="crayon-o">:</span><span class="crayon-s">''</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5a69274d8f1f9750057481-57"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'full_redirect'</span><span class="crayon-o">:</span><span class="crayon-s">''</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1f9750057481-58"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'popid'</span><span class="crayon-o">:</span><span class="crayon-s">''</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5a69274d8f1f9750057481-59"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'callback'</span><span class="crayon-o">:</span><span class="crayon-s">''</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1f9750057481-60"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'guf'</span><span class="crayon-o">:</span><span class="crayon-s">''</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5a69274d8f1f9750057481-61"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'not_duplite_str'</span><span class="crayon-o">:</span><span class="crayon-s">''</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1f9750057481-62"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'need_user_id'</span><span class="crayon-o">:</span><span class="crayon-s">''</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5a69274d8f1f9750057481-63"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'poy'</span><span class="crayon-o">:</span><span class="crayon-s">''</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1f9750057481-64"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'gvfdcname'</span><span class="crayon-o">:</span><span class="crayon-s">'10'</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5a69274d8f1f9750057481-65"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'gvfdcre'</span><span class="crayon-o">:</span><span class="crayon-s">''</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1f9750057481-66"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'from_encoding '</span><span class="crayon-o">:</span><span class="crayon-s">''</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5a69274d8f1f9750057481-67"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'sub'</span><span class="crayon-o">:</span><span class="crayon-s">''</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1f9750057481-68"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'TPL_password_2'</span><span class="crayon-o">:</span><span class="crayon-v">self</span><span class="crayon-sy">.</span><span class="crayon-v">password2</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5a69274d8f1f9750057481-69"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'loginASR'</span><span class="crayon-o">:</span><span class="crayon-s">'1'</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1f9750057481-70"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'loginASRSuc'</span><span class="crayon-o">:</span><span class="crayon-s">'1'</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5a69274d8f1f9750057481-71"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'allp'</span><span class="crayon-o">:</span><span class="crayon-s">''</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1f9750057481-72"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'oslanguage'</span><span class="crayon-o">:</span><span class="crayon-s">'zh-CN'</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5a69274d8f1f9750057481-73"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'sr'</span><span class="crayon-o">:</span><span class="crayon-s">'1366*768'</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1f9750057481-74"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'osVer'</span><span class="crayon-o">:</span><span class="crayon-s">'windows|6.1'</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5a69274d8f1f9750057481-75"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'naviVer'</span><span class="crayon-o">:</span><span class="crayon-s">'firefox|35'</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1f9750057481-76"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-5a69274d8f1f9750057481-77"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#将POST的数据进行编码转换</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1f9750057481-78"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">postData</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">urllib</span><span class="crayon-sy">.</span><span class="crayon-e">urlencode</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">post</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5a69274d8f1f9750057481-79"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#设置代理</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1f9750057481-80"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">proxy</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">urllib2</span><span class="crayon-sy">.</span><span class="crayon-e">ProxyHandler</span><span class="crayon-sy">(</span><span class="crayon-sy">{</span><span class="crayon-s">'http'</span><span class="crayon-o">:</span><span class="crayon-v">self</span><span class="crayon-sy">.</span><span class="crayon-v">proxyURL</span><span class="crayon-sy">}</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5a69274d8f1f9750057481-81"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#设置cookie</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1f9750057481-82"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">cookie</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">cookielib</span><span class="crayon-sy">.</span><span class="crayon-e">LWPCookieJar</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5a69274d8f1f9750057481-83"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#设置cookie处理器</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1f9750057481-84"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">cookieHandler</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">urllib2</span><span class="crayon-sy">.</span><span class="crayon-e">HTTPCookieProcessor</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">cookie</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5a69274d8f1f9750057481-85"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#设置登录时用到的opener，它的open方法相当于urllib2.urlopen</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1f9750057481-86"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">opener</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">urllib2</span><span class="crayon-sy">.</span><span class="crayon-e">build_opener</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">cookieHandler</span><span class="crayon-sy">,</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">proxy</span><span class="crayon-sy">,</span><span class="crayon-v">urllib2</span><span class="crayon-sy">.</span><span class="crayon-v">HTTPHandler</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5a69274d8f1f9750057481-87">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1f9750057481-88">&nbsp;</div><div class="crayon-line" id="crayon-5a69274d8f1f9750057481-89"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#得到是否需要输入验证码，这次请求的相应有时会不同，有时需要验证有时不需要</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1f9750057481-90"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">def </span><span class="crayon-e">needCheckCode</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5a69274d8f1f9750057481-91"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#第一次登录获取验证码尝试，构建request</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1f9750057481-92"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">request</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">urllib2</span><span class="crayon-sy">.</span><span class="crayon-e">Request</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">loginURL</span><span class="crayon-sy">,</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">postData</span><span class="crayon-sy">,</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">loginHeaders</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5a69274d8f1f9750057481-93"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#得到第一次登录尝试的相应</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1f9750057481-94"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">response</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">opener</span><span class="crayon-sy">.</span><span class="crayon-e">open</span><span class="crayon-sy">(</span><span class="crayon-v">request</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5a69274d8f1f9750057481-95"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#获取其中的内容</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1f9750057481-96"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">content</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">response</span><span class="crayon-sy">.</span><span class="crayon-e">read</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-e">decode</span><span class="crayon-sy">(</span><span class="crayon-s">'gbk'</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5a69274d8f1f9750057481-97"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#获取状态吗</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1f9750057481-98"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">status</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">response</span><span class="crayon-sy">.</span><span class="crayon-e">getcode</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5a69274d8f1f9750057481-99"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#状态码为200，获取成功</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1f9750057481-100"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">status</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-cn">200</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5a69274d8f1f9750057481-101"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">print</span><span class="crayon-h"> </span><span class="crayon-i">u</span><span class="crayon-s">"获取请求成功"</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1f9750057481-102"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801这六个字是请输入验证码的utf-8编码</span></div><div class="crayon-line" id="crayon-5a69274d8f1f9750057481-103"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">pattern</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">re</span><span class="crayon-sy">.</span><span class="crayon-e">compile</span><span class="crayon-sy">(</span><span class="crayon-i">u</span><span class="crayon-s">'\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801'</span><span class="crayon-sy">,</span><span class="crayon-v">re</span><span class="crayon-sy">.</span><span class="crayon-v">S</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1f9750057481-104"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">result</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">re</span><span class="crayon-sy">.</span><span class="crayon-e">search</span><span class="crayon-sy">(</span><span class="crayon-v">pattern</span><span class="crayon-sy">,</span><span class="crayon-v">content</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5a69274d8f1f9750057481-105"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">print </span><span class="crayon-v">content</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1f9750057481-106"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#如果找到该字符，代表需要输入验证码</span></div><div class="crayon-line" id="crayon-5a69274d8f1f9750057481-107"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">result</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1f9750057481-108"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">print</span><span class="crayon-h"> </span><span class="crayon-i">u</span><span class="crayon-s">"此次安全验证异常，您需要输入验证码"</span></div><div class="crayon-line" id="crayon-5a69274d8f1f9750057481-109"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">content</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1f9750057481-110"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#否则不需要</span></div><div class="crayon-line" id="crayon-5a69274d8f1f9750057481-111"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">else</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1f9750057481-112"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#返回结果直接带有J_HToken字样，表明直接验证通过</span></div><div class="crayon-line" id="crayon-5a69274d8f1f9750057481-113"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">tokenPattern</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">re</span><span class="crayon-sy">.</span><span class="crayon-e">compile</span><span class="crayon-sy">(</span><span class="crayon-s">'id="J_HToken"'</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1f9750057481-114"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">tokenMatch</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">re</span><span class="crayon-sy">.</span><span class="crayon-e">search</span><span class="crayon-sy">(</span><span class="crayon-v">tokenPattern</span><span class="crayon-sy">,</span><span class="crayon-v">content</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5a69274d8f1f9750057481-115"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">tokenMatch</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1f9750057481-116"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">print</span><span class="crayon-h"> </span><span class="crayon-i">u</span><span class="crayon-s">"此次安全验证通过，您这次不需要输入验证码"</span></div><div class="crayon-line" id="crayon-5a69274d8f1f9750057481-117"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-t">False</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1f9750057481-118"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">else</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5a69274d8f1f9750057481-119"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">print</span><span class="crayon-h"> </span><span class="crayon-i">u</span><span class="crayon-s">"获取请求失败"</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1f9750057481-120"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">None</span></div><div class="crayon-line" id="crayon-5a69274d8f1f9750057481-121">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1f9750057481-122"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#得到验证码图片</span></div><div class="crayon-line" id="crayon-5a69274d8f1f9750057481-123"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">def </span><span class="crayon-e">getCheckCode</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">,</span><span class="crayon-v">page</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1f9750057481-124"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#得到验证码的图片</span></div><div class="crayon-line" id="crayon-5a69274d8f1f9750057481-125"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">pattern</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">re</span><span class="crayon-sy">.</span><span class="crayon-e">compile</span><span class="crayon-sy">(</span><span class="crayon-s">'&lt;img id="J_StandardCode_m.*?data-src="(.*?)"'</span><span class="crayon-sy">,</span><span class="crayon-v">re</span><span class="crayon-sy">.</span><span class="crayon-v">S</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1f9750057481-126"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#匹配的结果</span></div><div class="crayon-line" id="crayon-5a69274d8f1f9750057481-127"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">matchResult</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">re</span><span class="crayon-sy">.</span><span class="crayon-e">search</span><span class="crayon-sy">(</span><span class="crayon-v">pattern</span><span class="crayon-sy">,</span><span class="crayon-v">page</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1f9750057481-128"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#已经匹配得到内容，并且验证码图片链接不为空</span></div><div class="crayon-line" id="crayon-5a69274d8f1f9750057481-129"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-e">matchResult </span><span class="crayon-st">and</span><span class="crayon-h"> </span><span class="crayon-v">matchResult</span><span class="crayon-sy">.</span><span class="crayon-e">group</span><span class="crayon-sy">(</span><span class="crayon-cn">1</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1f9750057481-130"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">print </span><span class="crayon-v">matchResult</span><span class="crayon-sy">.</span><span class="crayon-e">group</span><span class="crayon-sy">(</span><span class="crayon-cn">1</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5a69274d8f1f9750057481-131"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">matchResult</span><span class="crayon-sy">.</span><span class="crayon-e">group</span><span class="crayon-sy">(</span><span class="crayon-cn">1</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1f9750057481-132"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">else</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5a69274d8f1f9750057481-133"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">print</span><span class="crayon-h"> </span><span class="crayon-i">u</span><span class="crayon-s">"没有找到验证码内容"</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1f9750057481-134"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-t">False</span></div><div class="crayon-line" id="crayon-5a69274d8f1f9750057481-135">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1f9750057481-136">&nbsp;</div><div class="crayon-line" id="crayon-5a69274d8f1f9750057481-137"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#输入验证码，重新请求，如果验证成功，则返回J_HToken</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1f9750057481-138"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">def </span><span class="crayon-e">loginWithCheckCode</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5a69274d8f1f9750057481-139"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#提示用户输入验证码</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1f9750057481-140"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">checkcode</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">raw_input</span><span class="crayon-sy">(</span><span class="crayon-s">'请输入验证码:'</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5a69274d8f1f9750057481-141"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#将验证码重新添加到post的数据中</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1f9750057481-142"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">post</span><span class="crayon-sy">[</span><span class="crayon-s">'TPL_checkcode'</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">checkcode</span></div><div class="crayon-line" id="crayon-5a69274d8f1f9750057481-143"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#对post数据重新进行编码</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1f9750057481-144"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">postData</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">urllib</span><span class="crayon-sy">.</span><span class="crayon-e">urlencode</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">post</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5a69274d8f1f9750057481-145"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">try</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1f9750057481-146"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#再次构建请求，加入验证码之后的第二次登录尝试</span></div><div class="crayon-line" id="crayon-5a69274d8f1f9750057481-147"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">request</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">urllib2</span><span class="crayon-sy">.</span><span class="crayon-e">Request</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">loginURL</span><span class="crayon-sy">,</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">postData</span><span class="crayon-sy">,</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">loginHeaders</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1f9750057481-148"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#得到第一次登录尝试的相应</span></div><div class="crayon-line" id="crayon-5a69274d8f1f9750057481-149"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">response</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">opener</span><span class="crayon-sy">.</span><span class="crayon-e">open</span><span class="crayon-sy">(</span><span class="crayon-v">request</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1f9750057481-150"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#获取其中的内容</span></div><div class="crayon-line" id="crayon-5a69274d8f1f9750057481-151"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">content</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">response</span><span class="crayon-sy">.</span><span class="crayon-e">read</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-e">decode</span><span class="crayon-sy">(</span><span class="crayon-s">'gbk'</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1f9750057481-152"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#检测验证码错误的正则表达式，\u9a8c\u8bc1\u7801\u9519\u8bef 是验证码错误五个字的编码</span></div><div class="crayon-line" id="crayon-5a69274d8f1f9750057481-153"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">pattern</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">re</span><span class="crayon-sy">.</span><span class="crayon-e">compile</span><span class="crayon-sy">(</span><span class="crayon-i">u</span><span class="crayon-s">'\u9a8c\u8bc1\u7801\u9519\u8bef'</span><span class="crayon-sy">,</span><span class="crayon-v">re</span><span class="crayon-sy">.</span><span class="crayon-v">S</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1f9750057481-154"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">result</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">re</span><span class="crayon-sy">.</span><span class="crayon-e">search</span><span class="crayon-sy">(</span><span class="crayon-v">pattern</span><span class="crayon-sy">,</span><span class="crayon-v">content</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5a69274d8f1f9750057481-155"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#如果返回页面包括了，验证码错误五个字</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1f9750057481-156"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">result</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5a69274d8f1f9750057481-157"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">print</span><span class="crayon-h"> </span><span class="crayon-i">u</span><span class="crayon-s">"验证码输入错误"</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1f9750057481-158"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-t">False</span></div><div class="crayon-line" id="crayon-5a69274d8f1f9750057481-159"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">else</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1f9750057481-160"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#返回结果直接带有J_HToken字样，说明验证码输入成功，成功跳转到了获取HToken的界面</span></div><div class="crayon-line" id="crayon-5a69274d8f1f9750057481-161"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">tokenPattern</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">re</span><span class="crayon-sy">.</span><span class="crayon-e">compile</span><span class="crayon-sy">(</span><span class="crayon-s">'id="J_HToken" value="(.*?)"'</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1f9750057481-162"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">tokenMatch</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">re</span><span class="crayon-sy">.</span><span class="crayon-e">search</span><span class="crayon-sy">(</span><span class="crayon-v">tokenPattern</span><span class="crayon-sy">,</span><span class="crayon-v">content</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5a69274d8f1f9750057481-163"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#如果匹配成功，找到了J_HToken</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1f9750057481-164"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">tokenMatch</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5a69274d8f1f9750057481-165"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">print</span><span class="crayon-h"> </span><span class="crayon-i">u</span><span class="crayon-s">"验证码输入正确"</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1f9750057481-166"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">print </span><span class="crayon-v">tokenMatch</span><span class="crayon-sy">.</span><span class="crayon-e">group</span><span class="crayon-sy">(</span><span class="crayon-cn">1</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5a69274d8f1f9750057481-167"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">tokenMatch</span><span class="crayon-sy">.</span><span class="crayon-e">group</span><span class="crayon-sy">(</span><span class="crayon-cn">1</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1f9750057481-168"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">else</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5a69274d8f1f9750057481-169"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#匹配失败，J_Token获取失败</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1f9750057481-170"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">print</span><span class="crayon-h"> </span><span class="crayon-i">u</span><span class="crayon-s">"J_Token获取失败"</span></div><div class="crayon-line" id="crayon-5a69274d8f1f9750057481-171"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-t">False</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1f9750057481-172"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">except </span><span class="crayon-v">urllib2</span><span class="crayon-sy">.</span><span class="crayon-v">HTTPError</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">e</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5a69274d8f1f9750057481-173"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">print</span><span class="crayon-h"> </span><span class="crayon-i">u</span><span class="crayon-s">"连接服务器出错，错误原因"</span><span class="crayon-sy">,</span><span class="crayon-v">e</span><span class="crayon-sy">.</span><span class="crayon-e">reason</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1f9750057481-174"><span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-t">False</span></div><div class="crayon-line" id="crayon-5a69274d8f1f9750057481-175">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1f9750057481-176"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#程序运行主干</span></div><div class="crayon-line" id="crayon-5a69274d8f1f9750057481-177"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">def </span><span class="crayon-e">main</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1f9750057481-178"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#是否需要验证码，是则得到页面内容，不是则返回False</span></div><div class="crayon-line" id="crayon-5a69274d8f1f9750057481-179"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">needResult</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-e">needCheckCode</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1f9750057481-180"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#请求获取失败，得到的结果是None</span></div><div class="crayon-line" id="crayon-5a69274d8f1f9750057481-181"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-st">not</span><span class="crayon-h"> </span><span class="crayon-v">needResult</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-v">None</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1f9750057481-182"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-st">not</span><span class="crayon-h"> </span><span class="crayon-v">needResult</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-t">False</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5a69274d8f1f9750057481-183"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">print</span><span class="crayon-h"> </span><span class="crayon-i">u</span><span class="crayon-s">"您需要手动输入验证码"</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1f9750057481-184"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">idenCode</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-e">getCheckCode</span><span class="crayon-sy">(</span><span class="crayon-v">needResult</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5a69274d8f1f9750057481-185"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#得到了验证码的链接</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1f9750057481-186"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-st">not</span><span class="crayon-h"> </span><span class="crayon-v">idenCode</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-t">False</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5a69274d8f1f9750057481-187"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">print</span><span class="crayon-h"> </span><span class="crayon-i">u</span><span class="crayon-s">"验证码获取成功"</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1f9750057481-188"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">print</span><span class="crayon-h"> </span><span class="crayon-i">u</span><span class="crayon-s">"请在浏览器中输入您看到的验证码"</span></div><div class="crayon-line" id="crayon-5a69274d8f1f9750057481-189"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">webbrowser</span><span class="crayon-sy">.</span><span class="crayon-e">open_new_tab</span><span class="crayon-sy">(</span><span class="crayon-v">idenCode</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1f9750057481-190"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">J_HToken</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-e">loginWithCheckCode</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5a69274d8f1f9750057481-191"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">print</span><span class="crayon-h"> </span><span class="crayon-s">"J_HToken"</span><span class="crayon-sy">,</span><span class="crayon-v">J_HToken</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1f9750057481-192"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#验证码链接为空，无效验证码</span></div><div class="crayon-line" id="crayon-5a69274d8f1f9750057481-193"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">else</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1f9750057481-194"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">print</span><span class="crayon-h"> </span><span class="crayon-i">u</span><span class="crayon-s">"验证码获取失败，请重试"</span></div><div class="crayon-line" id="crayon-5a69274d8f1f9750057481-195"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">else</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1f9750057481-196"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">print</span><span class="crayon-h"> </span><span class="crayon-i">u</span><span class="crayon-s">"不需要输入验证码"</span></div><div class="crayon-line" id="crayon-5a69274d8f1f9750057481-197"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">else</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1f9750057481-198"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">print</span><span class="crayon-h"> </span><span class="crayon-i">u</span><span class="crayon-s">"请求登录页面失败，无法确认是否需要验证码"</span></div><div class="crayon-line" id="crayon-5a69274d8f1f9750057481-199">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1f9750057481-200">&nbsp;</div><div class="crayon-line" id="crayon-5a69274d8f1f9750057481-201">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f1f9750057481-202"><span class="crayon-v">taobao</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">Taobao</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5a69274d8f1f9750057481-203"><span class="crayon-v">taobao</span><span class="crayon-sy">.</span><span class="crayon-e">main</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0091 seconds] -->
<p>现在的运行结果是这样的，我们已经可以得到 J_HToken 了，离成功又迈进了一步。</p>
<p><a href="http://qiniu.cuiqingcai.com/wp-content/uploads/2015/02/QQ截图20150225200329.jpg"><img class="alignnone size-full wp-image-1091" src="http://qiniu.cuiqingcai.com/wp-content/uploads/2015/02/QQ截图20150225200329.jpg" alt="QQ截图20150225200329" width="767" height="209" srcset="https://qiniu.cuiqingcai.com/wp-content/uploads/2015/02/QQ截图20150225200329.jpg 767w, https://qiniu.cuiqingcai.com/wp-content/uploads/2015/02/QQ截图20150225200329-300x82.jpg 300w" sizes="(max-width: 767px) 100vw, 767px" /></a></p>
<p>好，到现在为止，我们应该可以获取到J_HToken的值啦。</p>
<h2>利用J_HToken获取st</h2>
<p>st也是一个经计算得到的code，可以这么理解，st是淘宝后台利用J_HToken以及其他数据经过计算之后得到的，可以利用st和用户名直接用get方式登录，所以st可以理解为一个秘钥。这个st值只会使用一次，如果第二次用get方式登录则会失效。所以它是一次性使用的。</p>
<p>下面J_HToken计算st的方法如下</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->

		<div id="crayon-5a69274d8f203909015794" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; float: left; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="切换是否显示行编号"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="纯文本显示代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="切换自动换行"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="点击展开代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="复制代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="在新窗口中显示代码"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea  class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
#通过token获得st
def getSTbyToken(self,token):
    tokenURL = 'https://passport.alipay.com/mini_apply_st.js?site=0&amp;token=%s&amp;callback=stCallback6' % token
    request = urllib2.Request(tokenURL)
    response = urllib2.urlopen(request)
    #处理st，获得用户淘宝主页的登录地址
    pattern = re.compile('{"st":"(.*?)"}',re.S)
    result = re.search(pattern,response.read())
    #如果成功匹配
    if result:
        print u"成功获取st码"
        #获取st的值
        st = result.group(1)
        return st
    else:
        print u"未匹配到st"
        return False</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5a69274d8f203909015794-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f203909015794-2">2</div><div class="crayon-num" data-line="crayon-5a69274d8f203909015794-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f203909015794-4">4</div><div class="crayon-num" data-line="crayon-5a69274d8f203909015794-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f203909015794-6">6</div><div class="crayon-num" data-line="crayon-5a69274d8f203909015794-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f203909015794-8">8</div><div class="crayon-num" data-line="crayon-5a69274d8f203909015794-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f203909015794-10">10</div><div class="crayon-num" data-line="crayon-5a69274d8f203909015794-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f203909015794-12">12</div><div class="crayon-num" data-line="crayon-5a69274d8f203909015794-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f203909015794-14">14</div><div class="crayon-num" data-line="crayon-5a69274d8f203909015794-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f203909015794-16">16</div><div class="crayon-num" data-line="crayon-5a69274d8f203909015794-17">17</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5a69274d8f203909015794-1"><span class="crayon-p">#通过token获得st</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f203909015794-2"><span class="crayon-e">def </span><span class="crayon-e">getSTbyToken</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">,</span><span class="crayon-v">token</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5a69274d8f203909015794-3"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">tokenURL</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'https://passport.alipay.com/mini_apply_st.js?site=0&amp;token=%s&amp;callback=stCallback6'</span><span class="crayon-h"> </span><span class="crayon-o">%</span><span class="crayon-h"> </span><span class="crayon-e">token</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f203909015794-4"><span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">request</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">urllib2</span><span class="crayon-sy">.</span><span class="crayon-e">Request</span><span class="crayon-sy">(</span><span class="crayon-v">tokenURL</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5a69274d8f203909015794-5"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">response</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">urllib2</span><span class="crayon-sy">.</span><span class="crayon-e">urlopen</span><span class="crayon-sy">(</span><span class="crayon-v">request</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f203909015794-6"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#处理st，获得用户淘宝主页的登录地址</span></div><div class="crayon-line" id="crayon-5a69274d8f203909015794-7"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">pattern</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">re</span><span class="crayon-sy">.</span><span class="crayon-e">compile</span><span class="crayon-sy">(</span><span class="crayon-s">'{"st":"(.*?)"}'</span><span class="crayon-sy">,</span><span class="crayon-v">re</span><span class="crayon-sy">.</span><span class="crayon-v">S</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f203909015794-8"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">result</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">re</span><span class="crayon-sy">.</span><span class="crayon-e">search</span><span class="crayon-sy">(</span><span class="crayon-v">pattern</span><span class="crayon-sy">,</span><span class="crayon-v">response</span><span class="crayon-sy">.</span><span class="crayon-e">read</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5a69274d8f203909015794-9"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#如果成功匹配</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f203909015794-10"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">result</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5a69274d8f203909015794-11"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">print</span><span class="crayon-h"> </span><span class="crayon-i">u</span><span class="crayon-s">"成功获取st码"</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f203909015794-12"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#获取st的值</span></div><div class="crayon-line" id="crayon-5a69274d8f203909015794-13"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">st</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">result</span><span class="crayon-sy">.</span><span class="crayon-e">group</span><span class="crayon-sy">(</span><span class="crayon-cn">1</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f203909015794-14"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-e">st</span></div><div class="crayon-line" id="crayon-5a69274d8f203909015794-15"><span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">else</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f203909015794-16"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">print</span><span class="crayon-h"> </span><span class="crayon-i">u</span><span class="crayon-s">"未匹配到st"</span></div><div class="crayon-line" id="crayon-5a69274d8f203909015794-17"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-t">False</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0010 seconds] -->
<p></p>
<h2> 直接利用st登录</h2>
<p>得到st之后，基本上就大功告成啦，一段辛苦终于没有白费，你可以直接构建get方式请求的URL，直接访问这个URL便可以实现登录。</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->

		<div id="crayon-5a69274d8f207890994178" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; float: left; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="切换是否显示行编号"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="纯文本显示代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="切换自动换行"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="点击展开代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="复制代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="在新窗口中显示代码"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea  class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
stURL = 'https://login.taobao.com/member/vst.htm?st=%s&amp;TPL_username=%s' % (st,username)</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5a69274d8f207890994178-1">1</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5a69274d8f207890994178-1"><span class="crayon-v">stURL</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'https://login.taobao.com/member/vst.htm?st=%s&amp;TPL_username=%s'</span><span class="crayon-h"> </span><span class="crayon-o">%</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">st</span><span class="crayon-sy">,</span><span class="crayon-v">username</span><span class="crayon-sy">)</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0002 seconds] -->
<p>比如</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->

		<div id="crayon-5a69274d8f20a754360509" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; float: left; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="切换是否显示行编号"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="纯文本显示代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="切换自动换行"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="点击展开代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="复制代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="在新窗口中显示代码"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea  class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
 https://login.taobao.com/member/vst.htm?st=1uynJELa4hKfsfWU3OjPJCw&amp;TPL_username=cqcre</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5a69274d8f20a754360509-1">1</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5a69274d8f20a754360509-1"> <span class="crayon-v">https</span><span class="crayon-o">:</span><span class="crayon-c">//login.taobao.com/member/vst.htm?st=1uynJELa4hKfsfWU3OjPJCw&amp;TPL_username=cqcre</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0001 seconds] -->
<p>直接访问该链接即可实现登录，不过我这个应该已经失效了吧~</p>
<p>代码在这先不贴了，剩下的一起贴了~</p>
<h2>获取已买到的宝贝页面</h2>
<p>已买到的宝贝的页面地址是</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->

		<div id="crayon-5a69274d8f20c096348815" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; float: left; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="切换是否显示行编号"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="纯文本显示代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="切换自动换行"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="点击展开代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="复制代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="在新窗口中显示代码"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea  class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
http://buyer.trade.taobao.com/trade/itemlist/list_bought_items.htm</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5a69274d8f20c096348815-1">1</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5a69274d8f20c096348815-1"><span class="crayon-v">http</span><span class="crayon-o">:</span><span class="crayon-c">//buyer.trade.taobao.com/trade/itemlist/list_bought_items.htm</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0001 seconds] -->
<p>另外还有页码的参数。</p>
<p>重新构建一个带有cookie的opener，将上面的带有st的URL打开，保存它的cookie，然后再利用这个opener打开已买到的宝贝的页面，你就会得到已买到的宝贝页面详情了。</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->

		<div id="crayon-5a69274d8f20f433352869" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; float: left; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="切换是否显示行编号"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="纯文本显示代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="切换自动换行"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="点击展开代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="复制代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="在新窗口中显示代码"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea  class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
#获得已买到的宝贝页面
def getGoodsPage(self,pageIndex):
    goodsURL = 'http://buyer.trade.taobao.com/trade/itemlist/listBoughtItems.htm?action=itemlist/QueryAction&amp;event_submit_do_query=1&amp;pageNum=' + str(pageIndex)
    response = self.newOpener.open(goodsURL)
    page =  response.read().decode('gbk')
    return page</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5a69274d8f20f433352869-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f20f433352869-2">2</div><div class="crayon-num" data-line="crayon-5a69274d8f20f433352869-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f20f433352869-4">4</div><div class="crayon-num" data-line="crayon-5a69274d8f20f433352869-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f20f433352869-6">6</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5a69274d8f20f433352869-1"><span class="crayon-p">#获得已买到的宝贝页面</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f20f433352869-2"><span class="crayon-e">def </span><span class="crayon-e">getGoodsPage</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">,</span><span class="crayon-v">pageIndex</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5a69274d8f20f433352869-3"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">goodsURL</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'http://buyer.trade.taobao.com/trade/itemlist/listBoughtItems.htm?action=itemlist/QueryAction&amp;event_submit_do_query=1&amp;pageNum='</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-e">str</span><span class="crayon-sy">(</span><span class="crayon-v">pageIndex</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f20f433352869-4"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">response</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">newOpener</span><span class="crayon-sy">.</span><span class="crayon-e">open</span><span class="crayon-sy">(</span><span class="crayon-v">goodsURL</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5a69274d8f20f433352869-5"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">page</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-v">response</span><span class="crayon-sy">.</span><span class="crayon-e">read</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-e">decode</span><span class="crayon-sy">(</span><span class="crayon-s">'gbk'</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f20f433352869-6"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">page</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0005 seconds] -->
<p>正则表达式提取信息</p>
<p>这是我的已买到的宝贝界面，审查元素可以看到，每一个宝贝都是tbody标签包围着。</p>
<p><a href="http://qiniu.cuiqingcai.com/wp-content/uploads/2015/02/QQ截图20150225223302.jpg"><img class="alignnone size-full wp-image-1094" src="http://qiniu.cuiqingcai.com/wp-content/uploads/2015/02/QQ截图20150225223302.jpg" alt="QQ截图20150225223302" width="1276" height="666" srcset="https://qiniu.cuiqingcai.com/wp-content/uploads/2015/02/QQ截图20150225223302.jpg 1276w, https://qiniu.cuiqingcai.com/wp-content/uploads/2015/02/QQ截图20150225223302-300x157.jpg 300w, https://qiniu.cuiqingcai.com/wp-content/uploads/2015/02/QQ截图20150225223302-1024x534.jpg 1024w" sizes="(max-width: 1276px) 100vw, 1276px" /></a>我们现在想获取订单时间，订单号，卖家店铺名称，宝贝名称，原价，购买数量，最后付款多少，交易状态这几个量，具体就不再分析啦，正则表达式还不熟悉的同学请参考前面所说的正则表达式的用法，在这里，正则表达式匹配的代码是</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->

		<div id="crayon-5a69274d8f212748998124" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; float: left; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="切换是否显示行编号"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="纯文本显示代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="切换自动换行"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="点击展开代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="复制代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="在新窗口中显示代码"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea  class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
#u'\u8ba2\u5355\u53f7'是订单号的编码
pattern = re.compile(u'dealtime.*?&gt;(.*?)&lt;/span&gt;.*?\u8ba2\u5355\u53f7.*?&lt;em&gt;(.*?)&lt;/em&gt;.*?shopname.*?title="(.*?)".*?baobei-name"&gt;.*?&lt;a.*?&gt;(.*?)&lt;/a&gt;.*?'
                     u'price.*?title="(.*?)".*?quantity.*?title="(.*?)".*?amount.*?em.*?&gt;(.*?)&lt;/em&gt;.*?trade-status.*?&lt;a.*?&gt;(.*?)&lt;/a&gt;',re.S)
result = re.findall(pattern,page)
for item in result:
    print '------------------------------------------------------------'
    print "购买日期:",item[0].strip(), '订单号:',item[1].strip(),'卖家店铺:',item[2].strip()
    print '宝贝名称:',item[3].strip()
    print '原价:',item[4].strip(),'购买数量:',item[5].strip(),'实际支付:',item[6].strip(),'交易状态',item[7].strip()</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5a69274d8f212748998124-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f212748998124-2">2</div><div class="crayon-num" data-line="crayon-5a69274d8f212748998124-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f212748998124-4">4</div><div class="crayon-num" data-line="crayon-5a69274d8f212748998124-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f212748998124-6">6</div><div class="crayon-num" data-line="crayon-5a69274d8f212748998124-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f212748998124-8">8</div><div class="crayon-num" data-line="crayon-5a69274d8f212748998124-9">9</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5a69274d8f212748998124-1"><span class="crayon-p">#u'\u8ba2\u5355\u53f7'是订单号的编码</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f212748998124-2"><span class="crayon-v">pattern</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">re</span><span class="crayon-sy">.</span><span class="crayon-e">compile</span><span class="crayon-sy">(</span><span class="crayon-i">u</span><span class="crayon-s">'dealtime.*?&gt;(.*?)&lt;/span&gt;.*?\u8ba2\u5355\u53f7.*?&lt;em&gt;(.*?)&lt;/em&gt;.*?shopname.*?title="(.*?)".*?baobei-name"&gt;.*?&lt;a.*?&gt;(.*?)&lt;/a&gt;.*?'</span></div><div class="crayon-line" id="crayon-5a69274d8f212748998124-3"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-i">u</span><span class="crayon-s">'price.*?title="(.*?)".*?quantity.*?title="(.*?)".*?amount.*?em.*?&gt;(.*?)&lt;/em&gt;.*?trade-status.*?&lt;a.*?&gt;(.*?)&lt;/a&gt;'</span><span class="crayon-sy">,</span><span class="crayon-v">re</span><span class="crayon-sy">.</span><span class="crayon-v">S</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f212748998124-4"><span class="crayon-v">result</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">re</span><span class="crayon-sy">.</span><span class="crayon-e">findall</span><span class="crayon-sy">(</span><span class="crayon-v">pattern</span><span class="crayon-sy">,</span><span class="crayon-v">page</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5a69274d8f212748998124-5"><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-e">item </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-v">result</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f212748998124-6"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">print</span><span class="crayon-h"> </span><span class="crayon-s">'------------------------------------------------------------'</span></div><div class="crayon-line" id="crayon-5a69274d8f212748998124-7"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">print</span><span class="crayon-h"> </span><span class="crayon-s">"购买日期:"</span><span class="crayon-sy">,</span><span class="crayon-v">item</span><span class="crayon-sy">[</span><span class="crayon-cn">0</span><span class="crayon-sy">]</span><span class="crayon-sy">.</span><span class="crayon-e">strip</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">'订单号:'</span><span class="crayon-sy">,</span><span class="crayon-v">item</span><span class="crayon-sy">[</span><span class="crayon-cn">1</span><span class="crayon-sy">]</span><span class="crayon-sy">.</span><span class="crayon-e">strip</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span><span class="crayon-s">'卖家店铺:'</span><span class="crayon-sy">,</span><span class="crayon-v">item</span><span class="crayon-sy">[</span><span class="crayon-cn">2</span><span class="crayon-sy">]</span><span class="crayon-sy">.</span><span class="crayon-e">strip</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f212748998124-8"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">print</span><span class="crayon-h"> </span><span class="crayon-s">'宝贝名称:'</span><span class="crayon-sy">,</span><span class="crayon-v">item</span><span class="crayon-sy">[</span><span class="crayon-cn">3</span><span class="crayon-sy">]</span><span class="crayon-sy">.</span><span class="crayon-e">strip</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5a69274d8f212748998124-9"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">print</span><span class="crayon-h"> </span><span class="crayon-s">'原价:'</span><span class="crayon-sy">,</span><span class="crayon-v">item</span><span class="crayon-sy">[</span><span class="crayon-cn">4</span><span class="crayon-sy">]</span><span class="crayon-sy">.</span><span class="crayon-e">strip</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span><span class="crayon-s">'购买数量:'</span><span class="crayon-sy">,</span><span class="crayon-v">item</span><span class="crayon-sy">[</span><span class="crayon-cn">5</span><span class="crayon-sy">]</span><span class="crayon-sy">.</span><span class="crayon-e">strip</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span><span class="crayon-s">'实际支付:'</span><span class="crayon-sy">,</span><span class="crayon-v">item</span><span class="crayon-sy">[</span><span class="crayon-cn">6</span><span class="crayon-sy">]</span><span class="crayon-sy">.</span><span class="crayon-e">strip</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span><span class="crayon-s">'交易状态'</span><span class="crayon-sy">,</span><span class="crayon-v">item</span><span class="crayon-sy">[</span><span class="crayon-cn">7</span><span class="crayon-sy">]</span><span class="crayon-sy">.</span><span class="crayon-e">strip</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0011 seconds] -->
<p></p>
<h2>最终代码整理</h2>
<p>恩，你懂得，最重要的东西来了，经过博主2天多的奋战，代码基本就构建完成。写了两个类，其中提取页面信息的方法我单独放到了一个类中，叫 tool.py，类名为 Tool。</p>
<p>先看一下运行结果吧~</p>
<p><a href="http://qiniu.cuiqingcai.com/wp-content/uploads/2015/02/QQ截图20150225234414.jpg"><img class="alignnone size-full wp-image-1095" src="http://qiniu.cuiqingcai.com/wp-content/uploads/2015/02/QQ截图20150225234414.jpg" alt="QQ截图20150225234414" width="976" height="581" srcset="https://qiniu.cuiqingcai.com/wp-content/uploads/2015/02/QQ截图20150225234414.jpg 976w, https://qiniu.cuiqingcai.com/wp-content/uploads/2015/02/QQ截图20150225234414-300x179.jpg 300w" sizes="(max-width: 976px) 100vw, 976px" /></a></p>
<p>最终代码如下</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->

		<div id="crayon-5a69274d8f216814287993" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; float: left; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="切换是否显示行编号"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="纯文本显示代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="切换自动换行"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="点击展开代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="复制代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="在新窗口中显示代码"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea  class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
tool.py</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5a69274d8f216814287993-1">1</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5a69274d8f216814287993-1"><span class="crayon-v">tool</span><span class="crayon-sy">.</span><span class="crayon-v">py</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0001 seconds] -->
<p></p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->

		<div id="crayon-5a69274d8f218673533601" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; float: left; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="切换是否显示行编号"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="纯文本显示代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="切换自动换行"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="点击展开代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="复制代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="在新窗口中显示代码"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea  class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
__author__ = 'CQC'
# -*- coding:utf-8 -*-

import re

#处理获得的宝贝页面
class Tool:

    #初始化
    def __init__(self):
        pass


    #获得页码数
    def getPageNum(self,page):
        pattern = re.compile(u'&lt;div class="total"&gt;.*?\u5171(.*?)\u9875',re.S)
        result = re.search(pattern,page)
        if result:
            print "找到了共多少页"
            pageNum = result.group(1).strip()
            print '共',pageNum,'页'
            return pageNum

    def getGoodsInfo(self,page):
        #u'\u8ba2\u5355\u53f7'是订单号的编码
        pattern = re.compile(u'dealtime.*?&gt;(.*?)&lt;/span&gt;.*?\u8ba2\u5355\u53f7.*?&lt;em&gt;(.*?)&lt;/em&gt;.*?shopname.*?title="(.*?)".*?baobei-name"&gt;.*?&lt;a.*?&gt;(.*?)&lt;/a&gt;.*?'
                             u'price.*?title="(.*?)".*?quantity.*?title="(.*?)".*?amount.*?em.*?&gt;(.*?)&lt;/em&gt;.*?trade-status.*?&lt;a.*?&gt;(.*?)&lt;/a&gt;',re.S)
        result = re.findall(pattern,page)
        for item in result:
            print '------------------------------------------------------------'
            print "购买日期:",item[0].strip(), '订单号:',item[1].strip(),'卖家店铺:',item[2].strip()
            print '宝贝名称:',item[3].strip()
            print '原价:',item[4].strip(),'购买数量:',item[5].strip(),'实际支付:',item[6].strip(),'交易状态',item[7].strip()</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5a69274d8f218673533601-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f218673533601-2">2</div><div class="crayon-num" data-line="crayon-5a69274d8f218673533601-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f218673533601-4">4</div><div class="crayon-num" data-line="crayon-5a69274d8f218673533601-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f218673533601-6">6</div><div class="crayon-num" data-line="crayon-5a69274d8f218673533601-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f218673533601-8">8</div><div class="crayon-num" data-line="crayon-5a69274d8f218673533601-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f218673533601-10">10</div><div class="crayon-num" data-line="crayon-5a69274d8f218673533601-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f218673533601-12">12</div><div class="crayon-num" data-line="crayon-5a69274d8f218673533601-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f218673533601-14">14</div><div class="crayon-num" data-line="crayon-5a69274d8f218673533601-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f218673533601-16">16</div><div class="crayon-num" data-line="crayon-5a69274d8f218673533601-17">17</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f218673533601-18">18</div><div class="crayon-num" data-line="crayon-5a69274d8f218673533601-19">19</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f218673533601-20">20</div><div class="crayon-num" data-line="crayon-5a69274d8f218673533601-21">21</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f218673533601-22">22</div><div class="crayon-num" data-line="crayon-5a69274d8f218673533601-23">23</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f218673533601-24">24</div><div class="crayon-num" data-line="crayon-5a69274d8f218673533601-25">25</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f218673533601-26">26</div><div class="crayon-num" data-line="crayon-5a69274d8f218673533601-27">27</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f218673533601-28">28</div><div class="crayon-num" data-line="crayon-5a69274d8f218673533601-29">29</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f218673533601-30">30</div><div class="crayon-num" data-line="crayon-5a69274d8f218673533601-31">31</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f218673533601-32">32</div><div class="crayon-num" data-line="crayon-5a69274d8f218673533601-33">33</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5a69274d8f218673533601-1"><span class="crayon-v">__author__</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'CQC'</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f218673533601-2"><span class="crayon-p"># -*- coding:utf-8 -*-</span></div><div class="crayon-line" id="crayon-5a69274d8f218673533601-3">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f218673533601-4"><span class="crayon-e">import </span><span class="crayon-v">re</span></div><div class="crayon-line" id="crayon-5a69274d8f218673533601-5">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f218673533601-6"><span class="crayon-p">#处理获得的宝贝页面</span></div><div class="crayon-line" id="crayon-5a69274d8f218673533601-7"><span class="crayon-t">class</span><span class="crayon-h"> </span><span class="crayon-v">Tool</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f218673533601-8">&nbsp;</div><div class="crayon-line" id="crayon-5a69274d8f218673533601-9"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#初始化</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f218673533601-10"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">def </span><span class="crayon-e">__init__</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5a69274d8f218673533601-11"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">pass</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f218673533601-12">&nbsp;</div><div class="crayon-line" id="crayon-5a69274d8f218673533601-13">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f218673533601-14"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#获得页码数</span></div><div class="crayon-line" id="crayon-5a69274d8f218673533601-15"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">def </span><span class="crayon-e">getPageNum</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">,</span><span class="crayon-v">page</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f218673533601-16"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">pattern</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">re</span><span class="crayon-sy">.</span><span class="crayon-e">compile</span><span class="crayon-sy">(</span><span class="crayon-i">u</span><span class="crayon-s">'&lt;div class="total"&gt;.*?\u5171(.*?)\u9875'</span><span class="crayon-sy">,</span><span class="crayon-v">re</span><span class="crayon-sy">.</span><span class="crayon-v">S</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5a69274d8f218673533601-17"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">result</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">re</span><span class="crayon-sy">.</span><span class="crayon-e">search</span><span class="crayon-sy">(</span><span class="crayon-v">pattern</span><span class="crayon-sy">,</span><span class="crayon-v">page</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f218673533601-18"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">result</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5a69274d8f218673533601-19"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">print</span><span class="crayon-h"> </span><span class="crayon-s">"找到了共多少页"</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f218673533601-20"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">pageNum</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">result</span><span class="crayon-sy">.</span><span class="crayon-e">group</span><span class="crayon-sy">(</span><span class="crayon-cn">1</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-e">strip</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5a69274d8f218673533601-21"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">print</span><span class="crayon-h"> </span><span class="crayon-s">'共'</span><span class="crayon-sy">,</span><span class="crayon-v">pageNum</span><span class="crayon-sy">,</span><span class="crayon-s">'页'</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f218673533601-22"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-e">pageNum</span></div><div class="crayon-line" id="crayon-5a69274d8f218673533601-23">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f218673533601-24"><span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">def </span><span class="crayon-e">getGoodsInfo</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">,</span><span class="crayon-v">page</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5a69274d8f218673533601-25"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#u'\u8ba2\u5355\u53f7'是订单号的编码</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f218673533601-26"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">pattern</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">re</span><span class="crayon-sy">.</span><span class="crayon-e">compile</span><span class="crayon-sy">(</span><span class="crayon-i">u</span><span class="crayon-s">'dealtime.*?&gt;(.*?)&lt;/span&gt;.*?\u8ba2\u5355\u53f7.*?&lt;em&gt;(.*?)&lt;/em&gt;.*?shopname.*?title="(.*?)".*?baobei-name"&gt;.*?&lt;a.*?&gt;(.*?)&lt;/a&gt;.*?'</span></div><div class="crayon-line" id="crayon-5a69274d8f218673533601-27"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-i">u</span><span class="crayon-s">'price.*?title="(.*?)".*?quantity.*?title="(.*?)".*?amount.*?em.*?&gt;(.*?)&lt;/em&gt;.*?trade-status.*?&lt;a.*?&gt;(.*?)&lt;/a&gt;'</span><span class="crayon-sy">,</span><span class="crayon-v">re</span><span class="crayon-sy">.</span><span class="crayon-v">S</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f218673533601-28"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">result</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">re</span><span class="crayon-sy">.</span><span class="crayon-e">findall</span><span class="crayon-sy">(</span><span class="crayon-v">pattern</span><span class="crayon-sy">,</span><span class="crayon-v">page</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5a69274d8f218673533601-29"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-e">item </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-v">result</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f218673533601-30"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">print</span><span class="crayon-h"> </span><span class="crayon-s">'------------------------------------------------------------'</span></div><div class="crayon-line" id="crayon-5a69274d8f218673533601-31"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">print</span><span class="crayon-h"> </span><span class="crayon-s">"购买日期:"</span><span class="crayon-sy">,</span><span class="crayon-v">item</span><span class="crayon-sy">[</span><span class="crayon-cn">0</span><span class="crayon-sy">]</span><span class="crayon-sy">.</span><span class="crayon-e">strip</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">'订单号:'</span><span class="crayon-sy">,</span><span class="crayon-v">item</span><span class="crayon-sy">[</span><span class="crayon-cn">1</span><span class="crayon-sy">]</span><span class="crayon-sy">.</span><span class="crayon-e">strip</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span><span class="crayon-s">'卖家店铺:'</span><span class="crayon-sy">,</span><span class="crayon-v">item</span><span class="crayon-sy">[</span><span class="crayon-cn">2</span><span class="crayon-sy">]</span><span class="crayon-sy">.</span><span class="crayon-e">strip</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f218673533601-32"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">print</span><span class="crayon-h"> </span><span class="crayon-s">'宝贝名称:'</span><span class="crayon-sy">,</span><span class="crayon-v">item</span><span class="crayon-sy">[</span><span class="crayon-cn">3</span><span class="crayon-sy">]</span><span class="crayon-sy">.</span><span class="crayon-e">strip</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5a69274d8f218673533601-33"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">print</span><span class="crayon-h"> </span><span class="crayon-s">'原价:'</span><span class="crayon-sy">,</span><span class="crayon-v">item</span><span class="crayon-sy">[</span><span class="crayon-cn">4</span><span class="crayon-sy">]</span><span class="crayon-sy">.</span><span class="crayon-e">strip</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span><span class="crayon-s">'购买数量:'</span><span class="crayon-sy">,</span><span class="crayon-v">item</span><span class="crayon-sy">[</span><span class="crayon-cn">5</span><span class="crayon-sy">]</span><span class="crayon-sy">.</span><span class="crayon-e">strip</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span><span class="crayon-s">'实际支付:'</span><span class="crayon-sy">,</span><span class="crayon-v">item</span><span class="crayon-sy">[</span><span class="crayon-cn">6</span><span class="crayon-sy">]</span><span class="crayon-sy">.</span><span class="crayon-e">strip</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span><span class="crayon-s">'交易状态'</span><span class="crayon-sy">,</span><span class="crayon-v">item</span><span class="crayon-sy">[</span><span class="crayon-cn">7</span><span class="crayon-sy">]</span><span class="crayon-sy">.</span><span class="crayon-e">strip</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0020 seconds] -->
<p></p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->

		<div id="crayon-5a69274d8f21c384019576" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; float: left; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="切换是否显示行编号"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="纯文本显示代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="切换自动换行"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="点击展开代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="复制代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="在新窗口中显示代码"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea  class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
taobao.py</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5a69274d8f21c384019576-1">1</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5a69274d8f21c384019576-1"><span class="crayon-v">taobao</span><span class="crayon-sy">.</span><span class="crayon-v">py</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0001 seconds] -->
<p></p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->

		<div id="crayon-5a69274d8f21e286066230" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; float: left; font-size: 12px !important; line-height: 15px !important;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="切换是否显示行编号"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="纯文本显示代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="切换自动换行"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="点击展开代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="复制代码"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="在新窗口中显示代码"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea  class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 15px !important;">
__author__ = 'CQC'
# -*- coding:utf-8 -*-

import urllib
import urllib2
import cookielib
import re
import webbrowser
import tool

#模拟登录淘宝类
class Taobao:

    #初始化方法
    def __init__(self):
        #登录的URL
        self.loginURL = "https://login.taobao.com/member/login.jhtml"
        #代理IP地址，防止自己的IP被封禁
        self.proxyURL = 'http://120.193.146.97:843'
        #登录POST数据时发送的头部信息
        self.loginHeaders =  {
            'Host':'login.taobao.com',
            'User-Agent' : 'Mozilla/5.0 (Windows NT 6.1; WOW64; rv:35.0) Gecko/20100101 Firefox/35.0',
            'Referer' : 'https://login.taobao.com/member/login.jhtml',
            'Content-Type': 'application/x-www-form-urlencoded',
            'Connection' : 'Keep-Alive'
        }
        #用户名
        self.username = 'cqcre'
        #ua字符串，经过淘宝ua算法计算得出，包含了时间戳,浏览器,屏幕分辨率,随机数,鼠标移动,鼠标点击,其实还有键盘输入记录,鼠标移动的记录、点击的记录等等的信息
        self.ua = '191UW5TcyMNYQwiAiwTR3tCf0J/QnhEcUpkMmQ=|Um5Ockt0TXdPc011TXVKdyE=|U2xMHDJ+H2QJZwBxX39Rb1d5WXcrSixAJ1kjDVsN|VGhXd1llXGNaYFhkWmJaYl1gV2pIdUtyTXRKfkN4Qn1FeEF6R31TBQ==|VWldfS0TMw8xDjYWKhAwHiUdOA9wCDEVaxgkATdcNU8iDFoM|VmNDbUMV|V2NDbUMV|WGRYeCgGZhtmH2VScVI2UT5fORtmD2gCawwuRSJHZAFsCWMOdVYyVTpbPR99HWAFYVMpUDUFORshHiQdJR0jAT0JPQc/BDoFPgooFDZtVBR5Fn9VOwt2EWhCOVQ4WSJPJFkHXhgoSDVIMRgnHyFqQ3xEezceIRkmahRqFDZLIkUvRiEDaA9qQ3xEezcZORc5bzk=|WWdHFy0TMw8vEy0UIQE0ADgYJBohGjoAOw4uEiwXLAw2DThuOA==|WmBAED5+KnIbdRh1GXgFQSZbGFdrUm1UblZqVGxQa1ZiTGxQcEp1I3U=|W2NDEz19KXENZwJjHkY7Ui9OJQsre09zSWlXY1oMLBExHzERLxsuE0UT|XGZGFjh4LHQdcx5zH34DRyBdHlFtVGtSaFBsUmpWbVBkSmpXd05zTnMlcw==|XWdHFzl5LXUJYwZnGkI/VitKIQ8vEzMKNws3YTc=|XmdaZ0d6WmVFeUB8XGJaYEB4TGxWbk5yTndXa0tyT29Ta0t1QGBeZDI='
        #密码，在这里不能输入真实密码，淘宝对此密码进行了加密处理，256位，此处为加密后的密码
        self.password2 = '7511aa6854629e45de220d29174f1066537a73420ef6dbb5b46f202396703a2d56b0312df8769d886e6ca63d587fdbb99ee73927e8c07d9c88cd02182e1a21edc13fb8e140a4a2a4b53bf38484bd0e08199e03eb9bf7b365a5c673c03407d812b91394f0d3c7564042e3f2b11d156aeea37ad6460118914125ab8f8ac466f'
        self.post = post = {
            'ua':self.ua,
            'TPL_checkcode':'',
            'CtrlVersion': '1,0,0,7',
            'TPL_password':'',
            'TPL_redirect_url':'http://i.taobao.com/my_taobao.htm?nekot=udm8087E1424147022443',
            'TPL_username':self.username,
            'loginsite':'0',
            'newlogin':'0',
            'from':'tb',
            'fc':'default',
            'style':'default',
            'css_style':'',
            'tid':'XOR_1_000000000000000000000000000000_625C4720470A0A050976770A',
            'support':'000001',
            'loginType':'4',
            'minititle':'',
            'minipara':'',
            'umto':'NaN',
            'pstrong':'3',
            'llnick':'',
            'sign':'',
            'need_sign':'',
            'isIgnore':'',
            'full_redirect':'',
            'popid':'',
            'callback':'',
            'guf':'',
            'not_duplite_str':'',
            'need_user_id':'',
            'poy':'',
            'gvfdcname':'10',
            'gvfdcre':'',
            'from_encoding ':'',
            'sub':'',
            'TPL_password_2':self.password2,
            'loginASR':'1',
            'loginASRSuc':'1',
            'allp':'',
            'oslanguage':'zh-CN',
            'sr':'1366*768',
            'osVer':'windows|6.1',
            'naviVer':'firefox|35'
        }
        #将POST的数据进行编码转换
        self.postData = urllib.urlencode(self.post)
        #设置代理
        self.proxy = urllib2.ProxyHandler({'http':self.proxyURL})
        #设置cookie
        self.cookie = cookielib.LWPCookieJar()
        #设置cookie处理器
        self.cookieHandler = urllib2.HTTPCookieProcessor(self.cookie)
        #设置登录时用到的opener，它的open方法相当于urllib2.urlopen
        self.opener = urllib2.build_opener(self.cookieHandler,self.proxy,urllib2.HTTPHandler)
        #赋值J_HToken
        self.J_HToken = ''
        #登录成功时，需要的Cookie
        self.newCookie = cookielib.CookieJar()
        #登陆成功时，需要的一个新的opener
        self.newOpener = urllib2.build_opener(urllib2.HTTPCookieProcessor(self.newCookie))
        #引入工具类
        self.tool = tool.Tool()


    #得到是否需要输入验证码，这次请求的相应有时会不同，有时需要验证有时不需要
    def needCheckCode(self):
        #第一次登录获取验证码尝试，构建request
        request = urllib2.Request(self.loginURL,self.postData,self.loginHeaders)
        #得到第一次登录尝试的相应
        response = self.opener.open(request)
        #获取其中的内容
        content = response.read().decode('gbk')
        #获取状态吗
        status = response.getcode()
        #状态码为200，获取成功
        if status == 200:
            print u"获取请求成功"
            #\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801这六个字是请输入验证码的utf-8编码
            pattern = re.compile(u'\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801',re.S)
            result = re.search(pattern,content)
            #如果找到该字符，代表需要输入验证码
            if result:
                print u"此次安全验证异常，您需要输入验证码"
                return content
            #否则不需要
            else:
                #返回结果直接带有J_HToken字样，表明直接验证通过
                tokenPattern = re.compile('id="J_HToken" value="(.*?)"')
                tokenMatch = re.search(tokenPattern,content)
                if tokenMatch:
                    self.J_HToken = tokenMatch.group(1)
                    print u"此次安全验证通过，您这次不需要输入验证码"
                    return False
        else:
            print u"获取请求失败"
            return None

    #得到验证码图片
    def getCheckCode(self,page):
        #得到验证码的图片
        pattern = re.compile('&lt;img id="J_StandardCode_m.*?data-src="(.*?)"',re.S)
        #匹配的结果
        matchResult = re.search(pattern,page)
        #已经匹配得到内容，并且验证码图片链接不为空
        if matchResult and matchResult.group(1):
            return matchResult.group(1)
        else:
            print u"没有找到验证码内容"
            return False


    #输入验证码，重新请求，如果验证成功，则返回J_HToken
    def loginWithCheckCode(self):
        #提示用户输入验证码
        checkcode = raw_input('请输入验证码:')
        #将验证码重新添加到post的数据中
        self.post['TPL_checkcode'] = checkcode
        #对post数据重新进行编码
        self.postData = urllib.urlencode(self.post)
        try:
            #再次构建请求，加入验证码之后的第二次登录尝试
            request = urllib2.Request(self.loginURL,self.postData,self.loginHeaders)
            #得到第一次登录尝试的相应
            response = self.opener.open(request)
            #获取其中的内容
            content = response.read().decode('gbk')
            #检测验证码错误的正则表达式，\u9a8c\u8bc1\u7801\u9519\u8bef 是验证码错误五个字的编码
            pattern = re.compile(u'\u9a8c\u8bc1\u7801\u9519\u8bef',re.S)
            result = re.search(pattern,content)
            #如果返回页面包括了，验证码错误五个字
            if result:
                print u"验证码输入错误"
                return False
            else:
                #返回结果直接带有J_HToken字样，说明验证码输入成功，成功跳转到了获取HToken的界面
                tokenPattern = re.compile('id="J_HToken" value="(.*?)"')
                tokenMatch = re.search(tokenPattern,content)
                #如果匹配成功，找到了J_HToken
                if tokenMatch:
                    print u"验证码输入正确"
                    self.J_HToken = tokenMatch.group(1)
                    return tokenMatch.group(1)
                else:
                    #匹配失败，J_Token获取失败
                    print u"J_Token获取失败"
                    return False
        except urllib2.HTTPError, e:
            print u"连接服务器出错，错误原因",e.reason
            return False


    #通过token获得st
    def getSTbyToken(self,token):
        tokenURL = 'https://passport.alipay.com/mini_apply_st.js?site=0&amp;token=%s&amp;callback=stCallback6' % token
        request = urllib2.Request(tokenURL)
        response = urllib2.urlopen(request)
        #处理st，获得用户淘宝主页的登录地址
        pattern = re.compile('{"st":"(.*?)"}',re.S)
        result = re.search(pattern,response.read())
        #如果成功匹配
        if result:
            print u"成功获取st码"
            #获取st的值
            st = result.group(1)
            return st
        else:
            print u"未匹配到st"
            return False

    #利用st码进行登录,获取重定向网址
    def loginByST(self,st,username):
        stURL = 'https://login.taobao.com/member/vst.htm?st=%s&amp;TPL_username=%s' % (st,username)
        headers = {
            'User-Agent' : 'Mozilla/5.0 (Windows NT 6.1; WOW64; rv:35.0) Gecko/20100101 Firefox/35.0',
            'Host':'login.taobao.com',
            'Connection' : 'Keep-Alive'
        }
        request = urllib2.Request(stURL,headers = headers)
        response = self.newOpener.open(request)
        content =  response.read().decode('gbk')
        #检测结果，看是否登录成功
        pattern = re.compile('top.location = "(.*?)"',re.S)
        match = re.search(pattern,content)
        if match:
            print u"登录网址成功"
            location = match.group(1)
            return True
        else:
            print "登录失败"
            return False


    #获得已买到的宝贝页面
    def getGoodsPage(self,pageIndex):
        goodsURL = 'http://buyer.trade.taobao.com/trade/itemlist/listBoughtItems.htm?action=itemlist/QueryAction&amp;event_submit_do_query=1' + '&amp;pageNum=' + str(pageIndex)
        response = self.newOpener.open(goodsURL)
        page =  response.read().decode('gbk')
        return page

    #获取所有已买到的宝贝信息
    def getAllGoods(self,pageNum):
        print u"获取到的商品列表如下"
        for x in range(1,int(pageNum)+1):
            page = self.getGoodsPage(x)
            self.tool.getGoodsInfo(page)



    #程序运行主干
    def main(self):
        #是否需要验证码，是则得到页面内容，不是则返回False
        needResult = self.needCheckCode()
        #请求获取失败，得到的结果是None
        if not needResult ==None:
            if not needResult == False:
                print u"您需要手动输入验证码"
                checkCode = self.getCheckCode(needResult)
                #得到了验证码的链接
                if not checkCode == False:
                    print u"验证码获取成功"
                    print u"请在浏览器中输入您看到的验证码"
                    webbrowser.open_new_tab(checkCode)
                    self.loginWithCheckCode()
                #验证码链接为空，无效验证码
                else:
                    print u"验证码获取失败，请重试"
            else:
                print u"不需要输入验证码"
        else:
            print u"请求登录页面失败，无法确认是否需要验证码"


        #判断token是否正常获取到
        if not self.J_HToken:
            print "获取Token失败，请重试"
            return
        #获取st码
        st = self.getSTbyToken(self.J_HToken)
        #利用st进行登录
        result = self.loginByST(st,self.username)
        if result:
            #获得所有宝贝的页面
            page = self.getGoodsPage(1)
            pageNum = self.tool.getPageNum(page)
            self.getAllGoods(pageNum)
        else:
            print u"登录失败"



taobao = Taobao()
taobao.main()</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5a69274d8f21e286066230-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f21e286066230-2">2</div><div class="crayon-num" data-line="crayon-5a69274d8f21e286066230-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f21e286066230-4">4</div><div class="crayon-num" data-line="crayon-5a69274d8f21e286066230-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f21e286066230-6">6</div><div class="crayon-num" data-line="crayon-5a69274d8f21e286066230-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f21e286066230-8">8</div><div class="crayon-num" data-line="crayon-5a69274d8f21e286066230-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f21e286066230-10">10</div><div class="crayon-num" data-line="crayon-5a69274d8f21e286066230-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f21e286066230-12">12</div><div class="crayon-num" data-line="crayon-5a69274d8f21e286066230-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f21e286066230-14">14</div><div class="crayon-num" data-line="crayon-5a69274d8f21e286066230-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f21e286066230-16">16</div><div class="crayon-num" data-line="crayon-5a69274d8f21e286066230-17">17</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f21e286066230-18">18</div><div class="crayon-num" data-line="crayon-5a69274d8f21e286066230-19">19</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f21e286066230-20">20</div><div class="crayon-num" data-line="crayon-5a69274d8f21e286066230-21">21</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f21e286066230-22">22</div><div class="crayon-num" data-line="crayon-5a69274d8f21e286066230-23">23</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f21e286066230-24">24</div><div class="crayon-num" data-line="crayon-5a69274d8f21e286066230-25">25</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f21e286066230-26">26</div><div class="crayon-num" data-line="crayon-5a69274d8f21e286066230-27">27</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f21e286066230-28">28</div><div class="crayon-num" data-line="crayon-5a69274d8f21e286066230-29">29</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f21e286066230-30">30</div><div class="crayon-num" data-line="crayon-5a69274d8f21e286066230-31">31</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f21e286066230-32">32</div><div class="crayon-num" data-line="crayon-5a69274d8f21e286066230-33">33</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f21e286066230-34">34</div><div class="crayon-num" data-line="crayon-5a69274d8f21e286066230-35">35</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f21e286066230-36">36</div><div class="crayon-num" data-line="crayon-5a69274d8f21e286066230-37">37</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f21e286066230-38">38</div><div class="crayon-num" data-line="crayon-5a69274d8f21e286066230-39">39</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f21e286066230-40">40</div><div class="crayon-num" data-line="crayon-5a69274d8f21e286066230-41">41</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f21e286066230-42">42</div><div class="crayon-num" data-line="crayon-5a69274d8f21e286066230-43">43</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f21e286066230-44">44</div><div class="crayon-num" data-line="crayon-5a69274d8f21e286066230-45">45</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f21e286066230-46">46</div><div class="crayon-num" data-line="crayon-5a69274d8f21e286066230-47">47</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f21e286066230-48">48</div><div class="crayon-num" data-line="crayon-5a69274d8f21e286066230-49">49</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f21e286066230-50">50</div><div class="crayon-num" data-line="crayon-5a69274d8f21e286066230-51">51</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f21e286066230-52">52</div><div class="crayon-num" data-line="crayon-5a69274d8f21e286066230-53">53</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f21e286066230-54">54</div><div class="crayon-num" data-line="crayon-5a69274d8f21e286066230-55">55</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f21e286066230-56">56</div><div class="crayon-num" data-line="crayon-5a69274d8f21e286066230-57">57</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f21e286066230-58">58</div><div class="crayon-num" data-line="crayon-5a69274d8f21e286066230-59">59</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f21e286066230-60">60</div><div class="crayon-num" data-line="crayon-5a69274d8f21e286066230-61">61</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f21e286066230-62">62</div><div class="crayon-num" data-line="crayon-5a69274d8f21e286066230-63">63</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f21e286066230-64">64</div><div class="crayon-num" data-line="crayon-5a69274d8f21e286066230-65">65</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f21e286066230-66">66</div><div class="crayon-num" data-line="crayon-5a69274d8f21e286066230-67">67</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f21e286066230-68">68</div><div class="crayon-num" data-line="crayon-5a69274d8f21e286066230-69">69</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f21e286066230-70">70</div><div class="crayon-num" data-line="crayon-5a69274d8f21e286066230-71">71</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f21e286066230-72">72</div><div class="crayon-num" data-line="crayon-5a69274d8f21e286066230-73">73</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f21e286066230-74">74</div><div class="crayon-num" data-line="crayon-5a69274d8f21e286066230-75">75</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f21e286066230-76">76</div><div class="crayon-num" data-line="crayon-5a69274d8f21e286066230-77">77</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f21e286066230-78">78</div><div class="crayon-num" data-line="crayon-5a69274d8f21e286066230-79">79</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f21e286066230-80">80</div><div class="crayon-num" data-line="crayon-5a69274d8f21e286066230-81">81</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f21e286066230-82">82</div><div class="crayon-num" data-line="crayon-5a69274d8f21e286066230-83">83</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f21e286066230-84">84</div><div class="crayon-num" data-line="crayon-5a69274d8f21e286066230-85">85</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f21e286066230-86">86</div><div class="crayon-num" data-line="crayon-5a69274d8f21e286066230-87">87</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f21e286066230-88">88</div><div class="crayon-num" data-line="crayon-5a69274d8f21e286066230-89">89</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f21e286066230-90">90</div><div class="crayon-num" data-line="crayon-5a69274d8f21e286066230-91">91</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f21e286066230-92">92</div><div class="crayon-num" data-line="crayon-5a69274d8f21e286066230-93">93</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f21e286066230-94">94</div><div class="crayon-num" data-line="crayon-5a69274d8f21e286066230-95">95</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f21e286066230-96">96</div><div class="crayon-num" data-line="crayon-5a69274d8f21e286066230-97">97</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f21e286066230-98">98</div><div class="crayon-num" data-line="crayon-5a69274d8f21e286066230-99">99</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f21e286066230-100">100</div><div class="crayon-num" data-line="crayon-5a69274d8f21e286066230-101">101</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f21e286066230-102">102</div><div class="crayon-num" data-line="crayon-5a69274d8f21e286066230-103">103</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f21e286066230-104">104</div><div class="crayon-num" data-line="crayon-5a69274d8f21e286066230-105">105</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f21e286066230-106">106</div><div class="crayon-num" data-line="crayon-5a69274d8f21e286066230-107">107</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f21e286066230-108">108</div><div class="crayon-num" data-line="crayon-5a69274d8f21e286066230-109">109</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f21e286066230-110">110</div><div class="crayon-num" data-line="crayon-5a69274d8f21e286066230-111">111</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f21e286066230-112">112</div><div class="crayon-num" data-line="crayon-5a69274d8f21e286066230-113">113</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f21e286066230-114">114</div><div class="crayon-num" data-line="crayon-5a69274d8f21e286066230-115">115</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f21e286066230-116">116</div><div class="crayon-num" data-line="crayon-5a69274d8f21e286066230-117">117</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f21e286066230-118">118</div><div class="crayon-num" data-line="crayon-5a69274d8f21e286066230-119">119</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f21e286066230-120">120</div><div class="crayon-num" data-line="crayon-5a69274d8f21e286066230-121">121</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f21e286066230-122">122</div><div class="crayon-num" data-line="crayon-5a69274d8f21e286066230-123">123</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f21e286066230-124">124</div><div class="crayon-num" data-line="crayon-5a69274d8f21e286066230-125">125</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f21e286066230-126">126</div><div class="crayon-num" data-line="crayon-5a69274d8f21e286066230-127">127</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f21e286066230-128">128</div><div class="crayon-num" data-line="crayon-5a69274d8f21e286066230-129">129</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f21e286066230-130">130</div><div class="crayon-num" data-line="crayon-5a69274d8f21e286066230-131">131</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f21e286066230-132">132</div><div class="crayon-num" data-line="crayon-5a69274d8f21e286066230-133">133</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f21e286066230-134">134</div><div class="crayon-num" data-line="crayon-5a69274d8f21e286066230-135">135</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f21e286066230-136">136</div><div class="crayon-num" data-line="crayon-5a69274d8f21e286066230-137">137</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f21e286066230-138">138</div><div class="crayon-num" data-line="crayon-5a69274d8f21e286066230-139">139</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f21e286066230-140">140</div><div class="crayon-num" data-line="crayon-5a69274d8f21e286066230-141">141</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f21e286066230-142">142</div><div class="crayon-num" data-line="crayon-5a69274d8f21e286066230-143">143</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f21e286066230-144">144</div><div class="crayon-num" data-line="crayon-5a69274d8f21e286066230-145">145</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f21e286066230-146">146</div><div class="crayon-num" data-line="crayon-5a69274d8f21e286066230-147">147</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f21e286066230-148">148</div><div class="crayon-num" data-line="crayon-5a69274d8f21e286066230-149">149</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f21e286066230-150">150</div><div class="crayon-num" data-line="crayon-5a69274d8f21e286066230-151">151</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f21e286066230-152">152</div><div class="crayon-num" data-line="crayon-5a69274d8f21e286066230-153">153</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f21e286066230-154">154</div><div class="crayon-num" data-line="crayon-5a69274d8f21e286066230-155">155</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f21e286066230-156">156</div><div class="crayon-num" data-line="crayon-5a69274d8f21e286066230-157">157</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f21e286066230-158">158</div><div class="crayon-num" data-line="crayon-5a69274d8f21e286066230-159">159</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f21e286066230-160">160</div><div class="crayon-num" data-line="crayon-5a69274d8f21e286066230-161">161</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f21e286066230-162">162</div><div class="crayon-num" data-line="crayon-5a69274d8f21e286066230-163">163</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f21e286066230-164">164</div><div class="crayon-num" data-line="crayon-5a69274d8f21e286066230-165">165</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f21e286066230-166">166</div><div class="crayon-num" data-line="crayon-5a69274d8f21e286066230-167">167</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f21e286066230-168">168</div><div class="crayon-num" data-line="crayon-5a69274d8f21e286066230-169">169</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f21e286066230-170">170</div><div class="crayon-num" data-line="crayon-5a69274d8f21e286066230-171">171</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f21e286066230-172">172</div><div class="crayon-num" data-line="crayon-5a69274d8f21e286066230-173">173</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f21e286066230-174">174</div><div class="crayon-num" data-line="crayon-5a69274d8f21e286066230-175">175</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f21e286066230-176">176</div><div class="crayon-num" data-line="crayon-5a69274d8f21e286066230-177">177</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f21e286066230-178">178</div><div class="crayon-num" data-line="crayon-5a69274d8f21e286066230-179">179</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f21e286066230-180">180</div><div class="crayon-num" data-line="crayon-5a69274d8f21e286066230-181">181</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f21e286066230-182">182</div><div class="crayon-num" data-line="crayon-5a69274d8f21e286066230-183">183</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f21e286066230-184">184</div><div class="crayon-num" data-line="crayon-5a69274d8f21e286066230-185">185</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f21e286066230-186">186</div><div class="crayon-num" data-line="crayon-5a69274d8f21e286066230-187">187</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f21e286066230-188">188</div><div class="crayon-num" data-line="crayon-5a69274d8f21e286066230-189">189</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f21e286066230-190">190</div><div class="crayon-num" data-line="crayon-5a69274d8f21e286066230-191">191</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f21e286066230-192">192</div><div class="crayon-num" data-line="crayon-5a69274d8f21e286066230-193">193</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f21e286066230-194">194</div><div class="crayon-num" data-line="crayon-5a69274d8f21e286066230-195">195</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f21e286066230-196">196</div><div class="crayon-num" data-line="crayon-5a69274d8f21e286066230-197">197</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f21e286066230-198">198</div><div class="crayon-num" data-line="crayon-5a69274d8f21e286066230-199">199</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f21e286066230-200">200</div><div class="crayon-num" data-line="crayon-5a69274d8f21e286066230-201">201</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f21e286066230-202">202</div><div class="crayon-num" data-line="crayon-5a69274d8f21e286066230-203">203</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f21e286066230-204">204</div><div class="crayon-num" data-line="crayon-5a69274d8f21e286066230-205">205</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f21e286066230-206">206</div><div class="crayon-num" data-line="crayon-5a69274d8f21e286066230-207">207</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f21e286066230-208">208</div><div class="crayon-num" data-line="crayon-5a69274d8f21e286066230-209">209</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f21e286066230-210">210</div><div class="crayon-num" data-line="crayon-5a69274d8f21e286066230-211">211</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f21e286066230-212">212</div><div class="crayon-num" data-line="crayon-5a69274d8f21e286066230-213">213</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f21e286066230-214">214</div><div class="crayon-num" data-line="crayon-5a69274d8f21e286066230-215">215</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f21e286066230-216">216</div><div class="crayon-num" data-line="crayon-5a69274d8f21e286066230-217">217</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f21e286066230-218">218</div><div class="crayon-num" data-line="crayon-5a69274d8f21e286066230-219">219</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f21e286066230-220">220</div><div class="crayon-num" data-line="crayon-5a69274d8f21e286066230-221">221</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f21e286066230-222">222</div><div class="crayon-num" data-line="crayon-5a69274d8f21e286066230-223">223</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f21e286066230-224">224</div><div class="crayon-num" data-line="crayon-5a69274d8f21e286066230-225">225</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f21e286066230-226">226</div><div class="crayon-num" data-line="crayon-5a69274d8f21e286066230-227">227</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f21e286066230-228">228</div><div class="crayon-num" data-line="crayon-5a69274d8f21e286066230-229">229</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f21e286066230-230">230</div><div class="crayon-num" data-line="crayon-5a69274d8f21e286066230-231">231</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f21e286066230-232">232</div><div class="crayon-num" data-line="crayon-5a69274d8f21e286066230-233">233</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f21e286066230-234">234</div><div class="crayon-num" data-line="crayon-5a69274d8f21e286066230-235">235</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f21e286066230-236">236</div><div class="crayon-num" data-line="crayon-5a69274d8f21e286066230-237">237</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f21e286066230-238">238</div><div class="crayon-num" data-line="crayon-5a69274d8f21e286066230-239">239</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f21e286066230-240">240</div><div class="crayon-num" data-line="crayon-5a69274d8f21e286066230-241">241</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f21e286066230-242">242</div><div class="crayon-num" data-line="crayon-5a69274d8f21e286066230-243">243</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f21e286066230-244">244</div><div class="crayon-num" data-line="crayon-5a69274d8f21e286066230-245">245</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f21e286066230-246">246</div><div class="crayon-num" data-line="crayon-5a69274d8f21e286066230-247">247</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f21e286066230-248">248</div><div class="crayon-num" data-line="crayon-5a69274d8f21e286066230-249">249</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f21e286066230-250">250</div><div class="crayon-num" data-line="crayon-5a69274d8f21e286066230-251">251</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f21e286066230-252">252</div><div class="crayon-num" data-line="crayon-5a69274d8f21e286066230-253">253</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f21e286066230-254">254</div><div class="crayon-num" data-line="crayon-5a69274d8f21e286066230-255">255</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f21e286066230-256">256</div><div class="crayon-num" data-line="crayon-5a69274d8f21e286066230-257">257</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f21e286066230-258">258</div><div class="crayon-num" data-line="crayon-5a69274d8f21e286066230-259">259</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f21e286066230-260">260</div><div class="crayon-num" data-line="crayon-5a69274d8f21e286066230-261">261</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f21e286066230-262">262</div><div class="crayon-num" data-line="crayon-5a69274d8f21e286066230-263">263</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f21e286066230-264">264</div><div class="crayon-num" data-line="crayon-5a69274d8f21e286066230-265">265</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f21e286066230-266">266</div><div class="crayon-num" data-line="crayon-5a69274d8f21e286066230-267">267</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f21e286066230-268">268</div><div class="crayon-num" data-line="crayon-5a69274d8f21e286066230-269">269</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f21e286066230-270">270</div><div class="crayon-num" data-line="crayon-5a69274d8f21e286066230-271">271</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f21e286066230-272">272</div><div class="crayon-num" data-line="crayon-5a69274d8f21e286066230-273">273</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f21e286066230-274">274</div><div class="crayon-num" data-line="crayon-5a69274d8f21e286066230-275">275</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f21e286066230-276">276</div><div class="crayon-num" data-line="crayon-5a69274d8f21e286066230-277">277</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f21e286066230-278">278</div><div class="crayon-num" data-line="crayon-5a69274d8f21e286066230-279">279</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f21e286066230-280">280</div><div class="crayon-num" data-line="crayon-5a69274d8f21e286066230-281">281</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f21e286066230-282">282</div><div class="crayon-num" data-line="crayon-5a69274d8f21e286066230-283">283</div><div class="crayon-num crayon-striped-num" data-line="crayon-5a69274d8f21e286066230-284">284</div><div class="crayon-num" data-line="crayon-5a69274d8f21e286066230-285">285</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5a69274d8f21e286066230-1"><span class="crayon-v">__author__</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'CQC'</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f21e286066230-2"><span class="crayon-p"># -*- coding:utf-8 -*-</span></div><div class="crayon-line" id="crayon-5a69274d8f21e286066230-3">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f21e286066230-4"><span class="crayon-e">import </span><span class="crayon-e">urllib</span></div><div class="crayon-line" id="crayon-5a69274d8f21e286066230-5"><span class="crayon-e">import </span><span class="crayon-e">urllib2</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f21e286066230-6"><span class="crayon-e">import </span><span class="crayon-e">cookielib</span></div><div class="crayon-line" id="crayon-5a69274d8f21e286066230-7"><span class="crayon-e">import </span><span class="crayon-e">re</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f21e286066230-8"><span class="crayon-e">import </span><span class="crayon-e">webbrowser</span></div><div class="crayon-line" id="crayon-5a69274d8f21e286066230-9"><span class="crayon-e">import </span><span class="crayon-v">tool</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f21e286066230-10">&nbsp;</div><div class="crayon-line" id="crayon-5a69274d8f21e286066230-11"><span class="crayon-p">#模拟登录淘宝类</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f21e286066230-12"><span class="crayon-t">class</span><span class="crayon-h"> </span><span class="crayon-v">Taobao</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5a69274d8f21e286066230-13">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f21e286066230-14"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#初始化方法</span></div><div class="crayon-line" id="crayon-5a69274d8f21e286066230-15"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">def </span><span class="crayon-e">__init__</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f21e286066230-16"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#登录的URL</span></div><div class="crayon-line" id="crayon-5a69274d8f21e286066230-17"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">loginURL</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">"https://login.taobao.com/member/login.jhtml"</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f21e286066230-18"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#代理IP地址，防止自己的IP被封禁</span></div><div class="crayon-line" id="crayon-5a69274d8f21e286066230-19"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">proxyURL</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'http://120.193.146.97:843'</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f21e286066230-20"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#登录POST数据时发送的头部信息</span></div><div class="crayon-line" id="crayon-5a69274d8f21e286066230-21"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">loginHeaders</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f21e286066230-22"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'Host'</span><span class="crayon-o">:</span><span class="crayon-s">'login.taobao.com'</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5a69274d8f21e286066230-23"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'User-Agent'</span><span class="crayon-h"> </span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">'Mozilla/5.0 (Windows NT 6.1; WOW64; rv:35.0) Gecko/20100101 Firefox/35.0'</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f21e286066230-24"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'Referer'</span><span class="crayon-h"> </span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">'https://login.taobao.com/member/login.jhtml'</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5a69274d8f21e286066230-25"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'Content-Type'</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">'application/x-www-form-urlencoded'</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f21e286066230-26"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'Connection'</span><span class="crayon-h"> </span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">'Keep-Alive'</span></div><div class="crayon-line" id="crayon-5a69274d8f21e286066230-27"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f21e286066230-28"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#用户名</span></div><div class="crayon-line" id="crayon-5a69274d8f21e286066230-29"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">username</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'cqcre'</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f21e286066230-30"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#ua字符串，经过淘宝ua算法计算得出，包含了时间戳,浏览器,屏幕分辨率,随机数,鼠标移动,鼠标点击,其实还有键盘输入记录,鼠标移动的记录、点击的记录等等的信息</span></div><div class="crayon-line" id="crayon-5a69274d8f21e286066230-31"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">ua</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'191UW5TcyMNYQwiAiwTR3tCf0J/QnhEcUpkMmQ=|Um5Ockt0TXdPc011TXVKdyE=|U2xMHDJ+H2QJZwBxX39Rb1d5WXcrSixAJ1kjDVsN|VGhXd1llXGNaYFhkWmJaYl1gV2pIdUtyTXRKfkN4Qn1FeEF6R31TBQ==|VWldfS0TMw8xDjYWKhAwHiUdOA9wCDEVaxgkATdcNU8iDFoM|VmNDbUMV|V2NDbUMV|WGRYeCgGZhtmH2VScVI2UT5fORtmD2gCawwuRSJHZAFsCWMOdVYyVTpbPR99HWAFYVMpUDUFORshHiQdJR0jAT0JPQc/BDoFPgooFDZtVBR5Fn9VOwt2EWhCOVQ4WSJPJFkHXhgoSDVIMRgnHyFqQ3xEezceIRkmahRqFDZLIkUvRiEDaA9qQ3xEezcZORc5bzk=|WWdHFy0TMw8vEy0UIQE0ADgYJBohGjoAOw4uEiwXLAw2DThuOA==|WmBAED5+KnIbdRh1GXgFQSZbGFdrUm1UblZqVGxQa1ZiTGxQcEp1I3U=|W2NDEz19KXENZwJjHkY7Ui9OJQsre09zSWlXY1oMLBExHzERLxsuE0UT|XGZGFjh4LHQdcx5zH34DRyBdHlFtVGtSaFBsUmpWbVBkSmpXd05zTnMlcw==|XWdHFzl5LXUJYwZnGkI/VitKIQ8vEzMKNws3YTc=|XmdaZ0d6WmVFeUB8XGJaYEB4TGxWbk5yTndXa0tyT29Ta0t1QGBeZDI='</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f21e286066230-32"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#密码，在这里不能输入真实密码，淘宝对此密码进行了加密处理，256位，此处为加密后的密码</span></div><div class="crayon-line" id="crayon-5a69274d8f21e286066230-33"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">password2</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'7511aa6854629e45de220d29174f1066537a73420ef6dbb5b46f202396703a2d56b0312df8769d886e6ca63d587fdbb99ee73927e8c07d9c88cd02182e1a21edc13fb8e140a4a2a4b53bf38484bd0e08199e03eb9bf7b365a5c673c03407d812b91394f0d3c7564042e3f2b11d156aeea37ad6460118914125ab8f8ac466f'</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f21e286066230-34"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">post</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">post</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a69274d8f21e286066230-35"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'ua'</span><span class="crayon-o">:</span><span class="crayon-v">self</span><span class="crayon-sy">.</span><span class="crayon-v">ua</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f21e286066230-36"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'TPL_checkcode'</span><span class="crayon-o">:</span><span class="crayon-s">''</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5a69274d8f21e286066230-37"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'CtrlVersion'</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">'1,0,0,7'</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f21e286066230-38"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'TPL_password'</span><span class="crayon-o">:</span><span class="crayon-s">''</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5a69274d8f21e286066230-39"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'TPL_redirect_url'</span><span class="crayon-o">:</span><span class="crayon-s">'http://i.taobao.com/my_taobao.htm?nekot=udm8087E1424147022443'</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f21e286066230-40"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'TPL_username'</span><span class="crayon-o">:</span><span class="crayon-v">self</span><span class="crayon-sy">.</span><span class="crayon-v">username</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5a69274d8f21e286066230-41"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'loginsite'</span><span class="crayon-o">:</span><span class="crayon-s">'0'</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f21e286066230-42"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'newlogin'</span><span class="crayon-o">:</span><span class="crayon-s">'0'</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5a69274d8f21e286066230-43"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'from'</span><span class="crayon-o">:</span><span class="crayon-s">'tb'</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f21e286066230-44"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'fc'</span><span class="crayon-o">:</span><span class="crayon-s">'default'</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5a69274d8f21e286066230-45"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'style'</span><span class="crayon-o">:</span><span class="crayon-s">'default'</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f21e286066230-46"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'css_style'</span><span class="crayon-o">:</span><span class="crayon-s">''</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5a69274d8f21e286066230-47"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'tid'</span><span class="crayon-o">:</span><span class="crayon-s">'XOR_1_000000000000000000000000000000_625C4720470A0A050976770A'</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f21e286066230-48"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'support'</span><span class="crayon-o">:</span><span class="crayon-s">'000001'</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5a69274d8f21e286066230-49"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'loginType'</span><span class="crayon-o">:</span><span class="crayon-s">'4'</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f21e286066230-50"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'minititle'</span><span class="crayon-o">:</span><span class="crayon-s">''</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5a69274d8f21e286066230-51"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'minipara'</span><span class="crayon-o">:</span><span class="crayon-s">''</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f21e286066230-52"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'umto'</span><span class="crayon-o">:</span><span class="crayon-s">'NaN'</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5a69274d8f21e286066230-53"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'pstrong'</span><span class="crayon-o">:</span><span class="crayon-s">'3'</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f21e286066230-54"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'llnick'</span><span class="crayon-o">:</span><span class="crayon-s">''</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5a69274d8f21e286066230-55"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'sign'</span><span class="crayon-o">:</span><span class="crayon-s">''</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f21e286066230-56"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'need_sign'</span><span class="crayon-o">:</span><span class="crayon-s">''</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5a69274d8f21e286066230-57"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'isIgnore'</span><span class="crayon-o">:</span><span class="crayon-s">''</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f21e286066230-58"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'full_redirect'</span><span class="crayon-o">:</span><span class="crayon-s">''</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5a69274d8f21e286066230-59"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'popid'</span><span class="crayon-o">:</span><span class="crayon-s">''</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f21e286066230-60"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'callback'</span><span class="crayon-o">:</span><span class="crayon-s">''</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5a69274d8f21e286066230-61"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'guf'</span><span class="crayon-o">:</span><span class="crayon-s">''</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f21e286066230-62"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'not_duplite_str'</span><span class="crayon-o">:</span><span class="crayon-s">''</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5a69274d8f21e286066230-63"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'need_user_id'</span><span class="crayon-o">:</span><span class="crayon-s">''</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f21e286066230-64"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'poy'</span><span class="crayon-o">:</span><span class="crayon-s">''</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5a69274d8f21e286066230-65"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'gvfdcname'</span><span class="crayon-o">:</span><span class="crayon-s">'10'</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f21e286066230-66"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'gvfdcre'</span><span class="crayon-o">:</span><span class="crayon-s">''</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5a69274d8f21e286066230-67"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'from_encoding '</span><span class="crayon-o">:</span><span class="crayon-s">''</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f21e286066230-68"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'sub'</span><span class="crayon-o">:</span><span class="crayon-s">''</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5a69274d8f21e286066230-69"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'TPL_password_2'</span><span class="crayon-o">:</span><span class="crayon-v">self</span><span class="crayon-sy">.</span><span class="crayon-v">password2</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f21e286066230-70"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'loginASR'</span><span class="crayon-o">:</span><span class="crayon-s">'1'</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5a69274d8f21e286066230-71"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'loginASRSuc'</span><span class="crayon-o">:</span><span class="crayon-s">'1'</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f21e286066230-72"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'allp'</span><span class="crayon-o">:</span><span class="crayon-s">''</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5a69274d8f21e286066230-73"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'oslanguage'</span><span class="crayon-o">:</span><span class="crayon-s">'zh-CN'</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f21e286066230-74"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'sr'</span><span class="crayon-o">:</span><span class="crayon-s">'1366*768'</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5a69274d8f21e286066230-75"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'osVer'</span><span class="crayon-o">:</span><span class="crayon-s">'windows|6.1'</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f21e286066230-76"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'naviVer'</span><span class="crayon-o">:</span><span class="crayon-s">'firefox|35'</span></div><div class="crayon-line" id="crayon-5a69274d8f21e286066230-77"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f21e286066230-78"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#将POST的数据进行编码转换</span></div><div class="crayon-line" id="crayon-5a69274d8f21e286066230-79"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">postData</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">urllib</span><span class="crayon-sy">.</span><span class="crayon-e">urlencode</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">post</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f21e286066230-80"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#设置代理</span></div><div class="crayon-line" id="crayon-5a69274d8f21e286066230-81"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">proxy</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">urllib2</span><span class="crayon-sy">.</span><span class="crayon-e">ProxyHandler</span><span class="crayon-sy">(</span><span class="crayon-sy">{</span><span class="crayon-s">'http'</span><span class="crayon-o">:</span><span class="crayon-v">self</span><span class="crayon-sy">.</span><span class="crayon-v">proxyURL</span><span class="crayon-sy">}</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f21e286066230-82"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#设置cookie</span></div><div class="crayon-line" id="crayon-5a69274d8f21e286066230-83"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">cookie</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">cookielib</span><span class="crayon-sy">.</span><span class="crayon-e">LWPCookieJar</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f21e286066230-84"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#设置cookie处理器</span></div><div class="crayon-line" id="crayon-5a69274d8f21e286066230-85"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">cookieHandler</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">urllib2</span><span class="crayon-sy">.</span><span class="crayon-e">HTTPCookieProcessor</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">cookie</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f21e286066230-86"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#设置登录时用到的opener，它的open方法相当于urllib2.urlopen</span></div><div class="crayon-line" id="crayon-5a69274d8f21e286066230-87"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">opener</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">urllib2</span><span class="crayon-sy">.</span><span class="crayon-e">build_opener</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">cookieHandler</span><span class="crayon-sy">,</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">proxy</span><span class="crayon-sy">,</span><span class="crayon-v">urllib2</span><span class="crayon-sy">.</span><span class="crayon-v">HTTPHandler</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f21e286066230-88"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#赋值J_HToken</span></div><div class="crayon-line" id="crayon-5a69274d8f21e286066230-89"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">J_HToken</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">''</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f21e286066230-90"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#登录成功时，需要的Cookie</span></div><div class="crayon-line" id="crayon-5a69274d8f21e286066230-91"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">newCookie</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">cookielib</span><span class="crayon-sy">.</span><span class="crayon-e">CookieJar</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f21e286066230-92"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#登陆成功时，需要的一个新的opener</span></div><div class="crayon-line" id="crayon-5a69274d8f21e286066230-93"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">newOpener</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">urllib2</span><span class="crayon-sy">.</span><span class="crayon-e">build_opener</span><span class="crayon-sy">(</span><span class="crayon-v">urllib2</span><span class="crayon-sy">.</span><span class="crayon-e">HTTPCookieProcessor</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">newCookie</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f21e286066230-94"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#引入工具类</span></div><div class="crayon-line" id="crayon-5a69274d8f21e286066230-95"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">tool</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">tool</span><span class="crayon-sy">.</span><span class="crayon-e">Tool</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f21e286066230-96">&nbsp;</div><div class="crayon-line" id="crayon-5a69274d8f21e286066230-97">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f21e286066230-98"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#得到是否需要输入验证码，这次请求的相应有时会不同，有时需要验证有时不需要</span></div><div class="crayon-line" id="crayon-5a69274d8f21e286066230-99"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">def </span><span class="crayon-e">needCheckCode</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f21e286066230-100"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#第一次登录获取验证码尝试，构建request</span></div><div class="crayon-line" id="crayon-5a69274d8f21e286066230-101"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">request</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">urllib2</span><span class="crayon-sy">.</span><span class="crayon-e">Request</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">loginURL</span><span class="crayon-sy">,</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">postData</span><span class="crayon-sy">,</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">loginHeaders</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f21e286066230-102"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#得到第一次登录尝试的相应</span></div><div class="crayon-line" id="crayon-5a69274d8f21e286066230-103"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">response</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">opener</span><span class="crayon-sy">.</span><span class="crayon-e">open</span><span class="crayon-sy">(</span><span class="crayon-v">request</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f21e286066230-104"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#获取其中的内容</span></div><div class="crayon-line" id="crayon-5a69274d8f21e286066230-105"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">content</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">response</span><span class="crayon-sy">.</span><span class="crayon-e">read</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-e">decode</span><span class="crayon-sy">(</span><span class="crayon-s">'gbk'</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f21e286066230-106"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#获取状态吗</span></div><div class="crayon-line" id="crayon-5a69274d8f21e286066230-107"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">status</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">response</span><span class="crayon-sy">.</span><span class="crayon-e">getcode</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f21e286066230-108"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#状态码为200，获取成功</span></div><div class="crayon-line" id="crayon-5a69274d8f21e286066230-109"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">status</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-cn">200</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f21e286066230-110"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">print</span><span class="crayon-h"> </span><span class="crayon-i">u</span><span class="crayon-s">"获取请求成功"</span></div><div class="crayon-line" id="crayon-5a69274d8f21e286066230-111"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801这六个字是请输入验证码的utf-8编码</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f21e286066230-112"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">pattern</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">re</span><span class="crayon-sy">.</span><span class="crayon-e">compile</span><span class="crayon-sy">(</span><span class="crayon-i">u</span><span class="crayon-s">'\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801'</span><span class="crayon-sy">,</span><span class="crayon-v">re</span><span class="crayon-sy">.</span><span class="crayon-v">S</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5a69274d8f21e286066230-113"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">result</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">re</span><span class="crayon-sy">.</span><span class="crayon-e">search</span><span class="crayon-sy">(</span><span class="crayon-v">pattern</span><span class="crayon-sy">,</span><span class="crayon-v">content</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f21e286066230-114"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#如果找到该字符，代表需要输入验证码</span></div><div class="crayon-line" id="crayon-5a69274d8f21e286066230-115"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">result</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f21e286066230-116"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">print</span><span class="crayon-h"> </span><span class="crayon-i">u</span><span class="crayon-s">"此次安全验证异常，您需要输入验证码"</span></div><div class="crayon-line" id="crayon-5a69274d8f21e286066230-117"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">content</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f21e286066230-118"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#否则不需要</span></div><div class="crayon-line" id="crayon-5a69274d8f21e286066230-119"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">else</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f21e286066230-120"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#返回结果直接带有J_HToken字样，表明直接验证通过</span></div><div class="crayon-line" id="crayon-5a69274d8f21e286066230-121"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">tokenPattern</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">re</span><span class="crayon-sy">.</span><span class="crayon-e">compile</span><span class="crayon-sy">(</span><span class="crayon-s">'id="J_HToken" value="(.*?)"'</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f21e286066230-122"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">tokenMatch</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">re</span><span class="crayon-sy">.</span><span class="crayon-e">search</span><span class="crayon-sy">(</span><span class="crayon-v">tokenPattern</span><span class="crayon-sy">,</span><span class="crayon-v">content</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5a69274d8f21e286066230-123"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">tokenMatch</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f21e286066230-124"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">J_HToken</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">tokenMatch</span><span class="crayon-sy">.</span><span class="crayon-e">group</span><span class="crayon-sy">(</span><span class="crayon-cn">1</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5a69274d8f21e286066230-125"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">print</span><span class="crayon-h"> </span><span class="crayon-i">u</span><span class="crayon-s">"此次安全验证通过，您这次不需要输入验证码"</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f21e286066230-126"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-t">False</span></div><div class="crayon-line" id="crayon-5a69274d8f21e286066230-127"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">else</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f21e286066230-128"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">print</span><span class="crayon-h"> </span><span class="crayon-i">u</span><span class="crayon-s">"获取请求失败"</span></div><div class="crayon-line" id="crayon-5a69274d8f21e286066230-129"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">None</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f21e286066230-130">&nbsp;</div><div class="crayon-line" id="crayon-5a69274d8f21e286066230-131"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#得到验证码图片</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f21e286066230-132"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">def </span><span class="crayon-e">getCheckCode</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">,</span><span class="crayon-v">page</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5a69274d8f21e286066230-133"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#得到验证码的图片</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f21e286066230-134"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">pattern</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">re</span><span class="crayon-sy">.</span><span class="crayon-e">compile</span><span class="crayon-sy">(</span><span class="crayon-s">'&lt;img id="J_StandardCode_m.*?data-src="(.*?)"'</span><span class="crayon-sy">,</span><span class="crayon-v">re</span><span class="crayon-sy">.</span><span class="crayon-v">S</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5a69274d8f21e286066230-135"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#匹配的结果</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f21e286066230-136"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">matchResult</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">re</span><span class="crayon-sy">.</span><span class="crayon-e">search</span><span class="crayon-sy">(</span><span class="crayon-v">pattern</span><span class="crayon-sy">,</span><span class="crayon-v">page</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5a69274d8f21e286066230-137"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#已经匹配得到内容，并且验证码图片链接不为空</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f21e286066230-138"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-e">matchResult </span><span class="crayon-st">and</span><span class="crayon-h"> </span><span class="crayon-v">matchResult</span><span class="crayon-sy">.</span><span class="crayon-e">group</span><span class="crayon-sy">(</span><span class="crayon-cn">1</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5a69274d8f21e286066230-139"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">matchResult</span><span class="crayon-sy">.</span><span class="crayon-e">group</span><span class="crayon-sy">(</span><span class="crayon-cn">1</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f21e286066230-140"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">else</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5a69274d8f21e286066230-141"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">print</span><span class="crayon-h"> </span><span class="crayon-i">u</span><span class="crayon-s">"没有找到验证码内容"</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f21e286066230-142"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-t">False</span></div><div class="crayon-line" id="crayon-5a69274d8f21e286066230-143">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f21e286066230-144">&nbsp;</div><div class="crayon-line" id="crayon-5a69274d8f21e286066230-145"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#输入验证码，重新请求，如果验证成功，则返回J_HToken</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f21e286066230-146"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">def </span><span class="crayon-e">loginWithCheckCode</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5a69274d8f21e286066230-147"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#提示用户输入验证码</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f21e286066230-148"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">checkcode</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">raw_input</span><span class="crayon-sy">(</span><span class="crayon-s">'请输入验证码:'</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5a69274d8f21e286066230-149"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#将验证码重新添加到post的数据中</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f21e286066230-150"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">post</span><span class="crayon-sy">[</span><span class="crayon-s">'TPL_checkcode'</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">checkcode</span></div><div class="crayon-line" id="crayon-5a69274d8f21e286066230-151"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#对post数据重新进行编码</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f21e286066230-152"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">postData</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">urllib</span><span class="crayon-sy">.</span><span class="crayon-e">urlencode</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">post</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5a69274d8f21e286066230-153"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">try</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f21e286066230-154"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#再次构建请求，加入验证码之后的第二次登录尝试</span></div><div class="crayon-line" id="crayon-5a69274d8f21e286066230-155"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">request</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">urllib2</span><span class="crayon-sy">.</span><span class="crayon-e">Request</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">loginURL</span><span class="crayon-sy">,</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">postData</span><span class="crayon-sy">,</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">loginHeaders</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f21e286066230-156"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#得到第一次登录尝试的相应</span></div><div class="crayon-line" id="crayon-5a69274d8f21e286066230-157"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">response</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">opener</span><span class="crayon-sy">.</span><span class="crayon-e">open</span><span class="crayon-sy">(</span><span class="crayon-v">request</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f21e286066230-158"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#获取其中的内容</span></div><div class="crayon-line" id="crayon-5a69274d8f21e286066230-159"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">content</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">response</span><span class="crayon-sy">.</span><span class="crayon-e">read</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-e">decode</span><span class="crayon-sy">(</span><span class="crayon-s">'gbk'</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f21e286066230-160"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#检测验证码错误的正则表达式，\u9a8c\u8bc1\u7801\u9519\u8bef 是验证码错误五个字的编码</span></div><div class="crayon-line" id="crayon-5a69274d8f21e286066230-161"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">pattern</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">re</span><span class="crayon-sy">.</span><span class="crayon-e">compile</span><span class="crayon-sy">(</span><span class="crayon-i">u</span><span class="crayon-s">'\u9a8c\u8bc1\u7801\u9519\u8bef'</span><span class="crayon-sy">,</span><span class="crayon-v">re</span><span class="crayon-sy">.</span><span class="crayon-v">S</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f21e286066230-162"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">result</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">re</span><span class="crayon-sy">.</span><span class="crayon-e">search</span><span class="crayon-sy">(</span><span class="crayon-v">pattern</span><span class="crayon-sy">,</span><span class="crayon-v">content</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5a69274d8f21e286066230-163"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#如果返回页面包括了，验证码错误五个字</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f21e286066230-164"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">result</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5a69274d8f21e286066230-165"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">print</span><span class="crayon-h"> </span><span class="crayon-i">u</span><span class="crayon-s">"验证码输入错误"</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f21e286066230-166"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-t">False</span></div><div class="crayon-line" id="crayon-5a69274d8f21e286066230-167"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">else</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f21e286066230-168"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#返回结果直接带有J_HToken字样，说明验证码输入成功，成功跳转到了获取HToken的界面</span></div><div class="crayon-line" id="crayon-5a69274d8f21e286066230-169"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">tokenPattern</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">re</span><span class="crayon-sy">.</span><span class="crayon-e">compile</span><span class="crayon-sy">(</span><span class="crayon-s">'id="J_HToken" value="(.*?)"'</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f21e286066230-170"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">tokenMatch</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">re</span><span class="crayon-sy">.</span><span class="crayon-e">search</span><span class="crayon-sy">(</span><span class="crayon-v">tokenPattern</span><span class="crayon-sy">,</span><span class="crayon-v">content</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5a69274d8f21e286066230-171"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#如果匹配成功，找到了J_HToken</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f21e286066230-172"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">tokenMatch</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5a69274d8f21e286066230-173"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">print</span><span class="crayon-h"> </span><span class="crayon-i">u</span><span class="crayon-s">"验证码输入正确"</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f21e286066230-174"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">J_HToken</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">tokenMatch</span><span class="crayon-sy">.</span><span class="crayon-e">group</span><span class="crayon-sy">(</span><span class="crayon-cn">1</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5a69274d8f21e286066230-175"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">tokenMatch</span><span class="crayon-sy">.</span><span class="crayon-e">group</span><span class="crayon-sy">(</span><span class="crayon-cn">1</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f21e286066230-176"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">else</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5a69274d8f21e286066230-177"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#匹配失败，J_Token获取失败</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f21e286066230-178"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">print</span><span class="crayon-h"> </span><span class="crayon-i">u</span><span class="crayon-s">"J_Token获取失败"</span></div><div class="crayon-line" id="crayon-5a69274d8f21e286066230-179"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-t">False</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f21e286066230-180"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">except </span><span class="crayon-v">urllib2</span><span class="crayon-sy">.</span><span class="crayon-v">HTTPError</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">e</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5a69274d8f21e286066230-181"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">print</span><span class="crayon-h"> </span><span class="crayon-i">u</span><span class="crayon-s">"连接服务器出错，错误原因"</span><span class="crayon-sy">,</span><span class="crayon-v">e</span><span class="crayon-sy">.</span><span class="crayon-e">reason</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f21e286066230-182"><span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-t">False</span></div><div class="crayon-line" id="crayon-5a69274d8f21e286066230-183">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f21e286066230-184">&nbsp;</div><div class="crayon-line" id="crayon-5a69274d8f21e286066230-185"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#通过token获得st</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f21e286066230-186"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">def </span><span class="crayon-e">getSTbyToken</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">,</span><span class="crayon-v">token</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5a69274d8f21e286066230-187"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">tokenURL</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'https://passport.alipay.com/mini_apply_st.js?site=0&amp;token=%s&amp;callback=stCallback6'</span><span class="crayon-h"> </span><span class="crayon-o">%</span><span class="crayon-h"> </span><span class="crayon-e">token</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f21e286066230-188"><span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">request</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">urllib2</span><span class="crayon-sy">.</span><span class="crayon-e">Request</span><span class="crayon-sy">(</span><span class="crayon-v">tokenURL</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5a69274d8f21e286066230-189"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">response</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">urllib2</span><span class="crayon-sy">.</span><span class="crayon-e">urlopen</span><span class="crayon-sy">(</span><span class="crayon-v">request</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f21e286066230-190"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#处理st，获得用户淘宝主页的登录地址</span></div><div class="crayon-line" id="crayon-5a69274d8f21e286066230-191"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">pattern</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">re</span><span class="crayon-sy">.</span><span class="crayon-e">compile</span><span class="crayon-sy">(</span><span class="crayon-s">'{"st":"(.*?)"}'</span><span class="crayon-sy">,</span><span class="crayon-v">re</span><span class="crayon-sy">.</span><span class="crayon-v">S</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f21e286066230-192"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">result</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">re</span><span class="crayon-sy">.</span><span class="crayon-e">search</span><span class="crayon-sy">(</span><span class="crayon-v">pattern</span><span class="crayon-sy">,</span><span class="crayon-v">response</span><span class="crayon-sy">.</span><span class="crayon-e">read</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5a69274d8f21e286066230-193"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#如果成功匹配</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f21e286066230-194"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">result</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5a69274d8f21e286066230-195"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">print</span><span class="crayon-h"> </span><span class="crayon-i">u</span><span class="crayon-s">"成功获取st码"</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f21e286066230-196"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#获取st的值</span></div><div class="crayon-line" id="crayon-5a69274d8f21e286066230-197"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">st</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">result</span><span class="crayon-sy">.</span><span class="crayon-e">group</span><span class="crayon-sy">(</span><span class="crayon-cn">1</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f21e286066230-198"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-e">st</span></div><div class="crayon-line" id="crayon-5a69274d8f21e286066230-199"><span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">else</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f21e286066230-200"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">print</span><span class="crayon-h"> </span><span class="crayon-i">u</span><span class="crayon-s">"未匹配到st"</span></div><div class="crayon-line" id="crayon-5a69274d8f21e286066230-201"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-t">False</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f21e286066230-202">&nbsp;</div><div class="crayon-line" id="crayon-5a69274d8f21e286066230-203"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#利用st码进行登录,获取重定向网址</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f21e286066230-204"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">def </span><span class="crayon-e">loginByST</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">,</span><span class="crayon-v">st</span><span class="crayon-sy">,</span><span class="crayon-v">username</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5a69274d8f21e286066230-205"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">stURL</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'https://login.taobao.com/member/vst.htm?st=%s&amp;TPL_username=%s'</span><span class="crayon-h"> </span><span class="crayon-o">%</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">st</span><span class="crayon-sy">,</span><span class="crayon-v">username</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f21e286066230-206"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">headers</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5a69274d8f21e286066230-207"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'User-Agent'</span><span class="crayon-h"> </span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">'Mozilla/5.0 (Windows NT 6.1; WOW64; rv:35.0) Gecko/20100101 Firefox/35.0'</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f21e286066230-208"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'Host'</span><span class="crayon-o">:</span><span class="crayon-s">'login.taobao.com'</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5a69274d8f21e286066230-209"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'Connection'</span><span class="crayon-h"> </span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">'Keep-Alive'</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f21e286066230-210"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-5a69274d8f21e286066230-211"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">request</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">urllib2</span><span class="crayon-sy">.</span><span class="crayon-e">Request</span><span class="crayon-sy">(</span><span class="crayon-v">stURL</span><span class="crayon-sy">,</span><span class="crayon-v">headers</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">headers</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f21e286066230-212"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">response</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">newOpener</span><span class="crayon-sy">.</span><span class="crayon-e">open</span><span class="crayon-sy">(</span><span class="crayon-v">request</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5a69274d8f21e286066230-213"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">content</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-v">response</span><span class="crayon-sy">.</span><span class="crayon-e">read</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-e">decode</span><span class="crayon-sy">(</span><span class="crayon-s">'gbk'</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f21e286066230-214"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#检测结果，看是否登录成功</span></div><div class="crayon-line" id="crayon-5a69274d8f21e286066230-215"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">pattern</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">re</span><span class="crayon-sy">.</span><span class="crayon-e">compile</span><span class="crayon-sy">(</span><span class="crayon-s">'top.location = "(.*?)"'</span><span class="crayon-sy">,</span><span class="crayon-v">re</span><span class="crayon-sy">.</span><span class="crayon-v">S</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f21e286066230-216"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">match</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">re</span><span class="crayon-sy">.</span><span class="crayon-e">search</span><span class="crayon-sy">(</span><span class="crayon-v">pattern</span><span class="crayon-sy">,</span><span class="crayon-v">content</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5a69274d8f21e286066230-217"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">match</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f21e286066230-218"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">print</span><span class="crayon-h"> </span><span class="crayon-i">u</span><span class="crayon-s">"登录网址成功"</span></div><div class="crayon-line" id="crayon-5a69274d8f21e286066230-219"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">location</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">match</span><span class="crayon-sy">.</span><span class="crayon-e">group</span><span class="crayon-sy">(</span><span class="crayon-cn">1</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f21e286066230-220"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-t">True</span></div><div class="crayon-line" id="crayon-5a69274d8f21e286066230-221"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">else</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f21e286066230-222"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">print</span><span class="crayon-h"> </span><span class="crayon-s">"登录失败"</span></div><div class="crayon-line" id="crayon-5a69274d8f21e286066230-223"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-t">False</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f21e286066230-224">&nbsp;</div><div class="crayon-line" id="crayon-5a69274d8f21e286066230-225">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f21e286066230-226"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#获得已买到的宝贝页面</span></div><div class="crayon-line" id="crayon-5a69274d8f21e286066230-227"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">def </span><span class="crayon-e">getGoodsPage</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">,</span><span class="crayon-v">pageIndex</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f21e286066230-228"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">goodsURL</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'http://buyer.trade.taobao.com/trade/itemlist/listBoughtItems.htm?action=itemlist/QueryAction&amp;event_submit_do_query=1'</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-s">'&amp;pageNum='</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-e">str</span><span class="crayon-sy">(</span><span class="crayon-v">pageIndex</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5a69274d8f21e286066230-229"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">response</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">newOpener</span><span class="crayon-sy">.</span><span class="crayon-e">open</span><span class="crayon-sy">(</span><span class="crayon-v">goodsURL</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f21e286066230-230"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">page</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-v">response</span><span class="crayon-sy">.</span><span class="crayon-e">read</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-e">decode</span><span class="crayon-sy">(</span><span class="crayon-s">'gbk'</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5a69274d8f21e286066230-231"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">page</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f21e286066230-232">&nbsp;</div><div class="crayon-line" id="crayon-5a69274d8f21e286066230-233"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#获取所有已买到的宝贝信息</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f21e286066230-234"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">def </span><span class="crayon-e">getAllGoods</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">,</span><span class="crayon-v">pageNum</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5a69274d8f21e286066230-235"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">print</span><span class="crayon-h"> </span><span class="crayon-i">u</span><span class="crayon-s">"获取到的商品列表如下"</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f21e286066230-236"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-i">x</span><span class="crayon-h"> </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-e">range</span><span class="crayon-sy">(</span><span class="crayon-cn">1</span><span class="crayon-sy">,</span><span class="crayon-t">int</span><span class="crayon-sy">(</span><span class="crayon-v">pageNum</span><span class="crayon-sy">)</span><span class="crayon-o">+</span><span class="crayon-cn">1</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5a69274d8f21e286066230-237"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">page</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-e">getGoodsPage</span><span class="crayon-sy">(</span><span class="crayon-v">x</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f21e286066230-238"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">tool</span><span class="crayon-sy">.</span><span class="crayon-e">getGoodsInfo</span><span class="crayon-sy">(</span><span class="crayon-v">page</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5a69274d8f21e286066230-239">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f21e286066230-240">&nbsp;</div><div class="crayon-line" id="crayon-5a69274d8f21e286066230-241">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f21e286066230-242"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#程序运行主干</span></div><div class="crayon-line" id="crayon-5a69274d8f21e286066230-243"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">def </span><span class="crayon-e">main</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f21e286066230-244"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#是否需要验证码，是则得到页面内容，不是则返回False</span></div><div class="crayon-line" id="crayon-5a69274d8f21e286066230-245"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">needResult</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-e">needCheckCode</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f21e286066230-246"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#请求获取失败，得到的结果是None</span></div><div class="crayon-line" id="crayon-5a69274d8f21e286066230-247"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-st">not</span><span class="crayon-h"> </span><span class="crayon-v">needResult</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-v">None</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f21e286066230-248"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-st">not</span><span class="crayon-h"> </span><span class="crayon-v">needResult</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-t">False</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5a69274d8f21e286066230-249"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">print</span><span class="crayon-h"> </span><span class="crayon-i">u</span><span class="crayon-s">"您需要手动输入验证码"</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f21e286066230-250"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">checkCode</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-e">getCheckCode</span><span class="crayon-sy">(</span><span class="crayon-v">needResult</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5a69274d8f21e286066230-251"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#得到了验证码的链接</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f21e286066230-252"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-st">not</span><span class="crayon-h"> </span><span class="crayon-v">checkCode</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-t">False</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5a69274d8f21e286066230-253"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">print</span><span class="crayon-h"> </span><span class="crayon-i">u</span><span class="crayon-s">"验证码获取成功"</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f21e286066230-254"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">print</span><span class="crayon-h"> </span><span class="crayon-i">u</span><span class="crayon-s">"请在浏览器中输入您看到的验证码"</span></div><div class="crayon-line" id="crayon-5a69274d8f21e286066230-255"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">webbrowser</span><span class="crayon-sy">.</span><span class="crayon-e">open_new_tab</span><span class="crayon-sy">(</span><span class="crayon-v">checkCode</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f21e286066230-256"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-e">loginWithCheckCode</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5a69274d8f21e286066230-257"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#验证码链接为空，无效验证码</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f21e286066230-258"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">else</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5a69274d8f21e286066230-259"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">print</span><span class="crayon-h"> </span><span class="crayon-i">u</span><span class="crayon-s">"验证码获取失败，请重试"</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f21e286066230-260"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">else</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5a69274d8f21e286066230-261"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">print</span><span class="crayon-h"> </span><span class="crayon-i">u</span><span class="crayon-s">"不需要输入验证码"</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f21e286066230-262"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">else</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5a69274d8f21e286066230-263"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">print</span><span class="crayon-h"> </span><span class="crayon-i">u</span><span class="crayon-s">"请求登录页面失败，无法确认是否需要验证码"</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f21e286066230-264">&nbsp;</div><div class="crayon-line" id="crayon-5a69274d8f21e286066230-265">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f21e286066230-266"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#判断token是否正常获取到</span></div><div class="crayon-line" id="crayon-5a69274d8f21e286066230-267"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-st">not</span><span class="crayon-h"> </span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">J_HToken</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f21e286066230-268"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">print</span><span class="crayon-h"> </span><span class="crayon-s">"获取Token失败，请重试"</span></div><div class="crayon-line" id="crayon-5a69274d8f21e286066230-269"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f21e286066230-270"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#获取st码</span></div><div class="crayon-line" id="crayon-5a69274d8f21e286066230-271"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">st</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-e">getSTbyToken</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">J_HToken</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f21e286066230-272"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#利用st进行登录</span></div><div class="crayon-line" id="crayon-5a69274d8f21e286066230-273"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">result</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-e">loginByST</span><span class="crayon-sy">(</span><span class="crayon-v">st</span><span class="crayon-sy">,</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">username</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f21e286066230-274"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">result</span><span class="crayon-o">:</span></div><div class="crayon-line" id="crayon-5a69274d8f21e286066230-275"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-p">#获得所有宝贝的页面</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f21e286066230-276"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">page</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-e">getGoodsPage</span><span class="crayon-sy">(</span><span class="crayon-cn">1</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5a69274d8f21e286066230-277"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">pageNum</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">tool</span><span class="crayon-sy">.</span><span class="crayon-e">getPageNum</span><span class="crayon-sy">(</span><span class="crayon-v">page</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f21e286066230-278"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-e">getAllGoods</span><span class="crayon-sy">(</span><span class="crayon-v">pageNum</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5a69274d8f21e286066230-279"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">else</span><span class="crayon-o">:</span></div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f21e286066230-280"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">print</span><span class="crayon-h"> </span><span class="crayon-i">u</span><span class="crayon-s">"登录失败"</span></div><div class="crayon-line" id="crayon-5a69274d8f21e286066230-281">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f21e286066230-282">&nbsp;</div><div class="crayon-line" id="crayon-5a69274d8f21e286066230-283">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5a69274d8f21e286066230-284"><span class="crayon-v">taobao</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">Taobao</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5a69274d8f21e286066230-285"><span class="crayon-v">taobao</span><span class="crayon-sy">.</span><span class="crayon-e">main</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div></div></td>
					</tr>
				</table>
			</div>
		</div>
<!-- [Format Time: 0.0133 seconds] -->
<p>好啦，运行结果就是上面贴的图片，可以成功获取到自己的商品列表，前提是把你们的 用户名，ua，password2这三个设置好。</p>
<p>以上均为博主亲身所敲，代码写的不好，谨在此贴出和大家一起分享经验~</p>
<p>小伙伴们试一下吧，希望对大家有帮助~</p>
<p>转载请注明：<a href="https://cuiqingcai.com">静觅</a> &raquo; <a href="https://cuiqingcai.com/1076.html">Python爬虫实战五之模拟登录淘宝并获取所有订单</a></p>

      
<div class="article-social">
			<a href="javascript:;" data-action="ding" data-id="1076" id="Addlike" class="action"><i class="fa fa-heart-o"></i>喜欢 (<span class="count">343</span>)</a><span class="or">or</span><span class="action action-share bdsharebuttonbox"><i class="fa fa-share-alt"></i>分享 (<span class="bds_count" data-cmd="count" title="累计分享0次">0</span>)<div class="action-popover"><div class="popover top in"><div class="arrow"></div><div class="popover-content"><a href="#" class="sinaweibo fa fa-weibo" data-cmd="tsina" title="分享到新浪微博"></a><a href="#" class="bds_qzone fa fa-star" data-cmd="qzone" title="分享到QQ空间"></a><a href="#" class="tencentweibo fa fa-tencent-weibo" data-cmd="tqq" title="分享到腾讯微博"></a><a href="#" class="qq fa fa-qq" data-cmd="sqq" title="分享到QQ好友"></a><a href="#" class="bds_renren fa fa-renren" data-cmd="renren" title="分享到人人网"></a><a href="#" class="bds_weixin fa fa-weixin" data-cmd="weixin" title="分享到微信"></a><a href="#" class="bds_more fa fa-ellipsis-h" data-cmd="more"></a></div></div></div></span>	
</div>
	</article>	
				<div style="background:#fff;padding-bottom:20px;font-size:14px;">
			<p style="text-align: center;margin-bottom:20px;padding:0px 20px">您的支持是博主写作最大的动力，如果您喜欢我的文章，感觉我的文章对您有帮助，请狠狠点击下面的</p>
			<p style="text-align: center;"><a href="http://cuiqingcai.com/donate"> <input style="width: 310px; margin: 10px auto 0px; background-color: #f58a87; color: #ffffff; height: 40px; border: none; font-family: 'Microsoft Yahei'; font-size: 16px; letter-spacing: 2px;" type="button" value="我要小额赞助" /></a>
		</div>
		<div class="">
    <div id="qrcodes">
        <div class="row">
            <div class="col-xs-12 col-md-4">
                <div class="p-sm" style="overflow: hidden; padding-bottom: 15px;">
                    <p class="text-center">想结交更多的朋友吗?</p>
                    <p class="text-center">来进击的Coder瞧瞧吧</p>
                    <div class="text-center">
                        <img class="code-img"
                             src="http://qiniu.cuiqingcai.com/wp-content/uploads/2017/05/QRCode1.png"/>
                    </div>
                    <div class="text-center">
                        <p style="color: #e9415a; font-size: 15px;">进击的Coder</p>
                        <p>
                            <span>QQ群号 </span><span style="color: #e9415a; font-size: 15px; margin-bottom: 45px;"> 99350970  </span><a class="btn btn-xs btn-danger"
                                                                                                                                       href="http://shang.qq.com/wpa/qunwpa?idkey=31ed8a7d15339353ad090379bb9243118f90220324a7a0f4b453bce52dcd02b6"
                                                                                                                                       target="_blank">立即加入</a>
                        </p>
                    </div>
                </div>
            </div>

            <div class="col-xs-12 col-md-4">
                <div class="p-sm" style="overflow: hidden; padding-bottom: 15px;">
                    <p class="text-center">进击的Coder灌水太多?</p>
                    <p class="text-center">这里是纯粹的技术领地</p>
                    <div class="text-center">
                        <img class="code-img"
                             src="http://qiniu.cuiqingcai.com/wp-content/uploads/2017/05/QRCode2.png"/>
                    </div>
                    <div class="text-center">
                        <p style="color: #18A57D; font-size: 15px;">激进的Coder</p>
                        <p>
                            <span>QQ群号 </span><span style="color: #18A57D; font-size: 15px; margin-bottom: 45px;"> 627725766  </span><a target="_blank" class="btn btn-xs" style="background-color: #18A57D"
                                                                                                                                        href="//shang.qq.com/wpa/qunwpa?idkey=6096ee3de52a5a948a9fe45178ed9e9ba9084b909815c5f7775b85f4734fdda1">立即加入</a>
                        </p>
                    </div>
                </div>
            </div>
            <div class="col-xs-12 col-md-4">
                <div class="p-sm" style="overflow: hidden; padding-bottom: 15px;">
                    <p class="text-center">想找人聊天解闷？想要学习干货？</p>
                    <p class="text-center">微信公众号进击的Coder为你打造</p>
                    <div class="text-center">
                        <img class="code-img"
                             src="http://qiniu.cuiqingcai.com/wp-content/uploads/2017/05/qrcode_for_gh_5b0546ddd2d0_430.jpg"/>
                    </div>
                    <div class="text-center">
                        <p style="color: #e9415a; font-size: 15px;">进击的Coder</p>
                        <p>
                            <span>微信公众号 </span><span style="color: #e9415a; font-size: 15px; margin-bottom: 45px;"> 扫一扫关注</span>
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <style>
    #qrcodes {
        min-height: 350px;
    background: white;
    }
    #qrcodes .btn {
        background-color: #eb586f;
        height: 22px;
        line-height: 22px !important;
        font-size: 12px;
        color: white;padding: initial;font-size: 12px;width: 65px;
    }
    .article-content #qrcodes{
        text-indent: 0px !important;
    }
    .article-content #qrcodes a {
        color: white;
    }
    #qrcodes .btn:hover {
        color: white;
    }
    #qrcodes .code-img {
        width: 180px;
    }
    </style>
    <style>
        #qrcodes * {
            -webkit-box-sizing: border-box;
            -moz-box-sizing: border-box;
            box-sizing: border-box;
        }
        *:before,
        *:after {
            -webkit-box-sizing: border-box;
            -moz-box-sizing: border-box;
            box-sizing: border-box;
        }
        .row {
            margin-right: -15px;
            margin-left: -15px;
        }
        .col-xs-1, .col-sm-1, .col-md-1, .col-lg-1, .col-xs-2, .col-sm-2, .col-md-2, .col-lg-2, .col-xs-3, .col-sm-3, .col-md-3, .col-lg-3, .col-xs-4, .col-sm-4, .col-md-4, .col-lg-4, .col-xs-5, .col-sm-5, .col-md-5, .col-lg-5, .col-xs-6, .col-sm-6, .col-md-6, .col-lg-6, .col-xs-7, .col-sm-7, .col-md-7, .col-lg-7, .col-xs-8, .col-sm-8, .col-md-8, .col-lg-8, .col-xs-9, .col-sm-9, .col-md-9, .col-lg-9, .col-xs-10, .col-sm-10, .col-md-10, .col-lg-10, .col-xs-11, .col-sm-11, .col-md-11, .col-lg-11, .col-xs-12, .col-sm-12, .col-md-12, .col-lg-12 {
            position: relative;
            min-height: 1px;
            padding-right: 15px;
            padding-left: 15px;
        }
        .col-xs-1, .col-xs-2, .col-xs-3, .col-xs-4, .col-xs-5, .col-xs-6, .col-xs-7, .col-xs-8, .col-xs-9, .col-xs-10, .col-xs-11, .col-xs-12 {
            float: left;
        }
        .col-xs-12 {
            width: 100%;
        }
        .col-xs-11 {
            width: 91.66666667%;
        }
        .col-xs-10 {
            width: 83.33333333%;
        }
        .col-xs-9 {
            width: 75%;
        }
        .col-xs-8 {
            width: 66.66666667%;
        }
        .col-xs-7 {
            width: 58.33333333%;
        }
        .col-xs-6 {
            width: 50%;
        }
        .col-xs-5 {
            width: 41.66666667%;
        }
        .col-xs-4 {
            width: 33.33333333%;
        }
        .col-xs-3 {
            width: 25%;
        }
        .col-xs-2 {
            width: 16.66666667%;
        }
        .col-xs-1 {
            width: 8.33333333%;
        }
        .col-xs-pull-12 {
            right: 100%;
        }
        .col-xs-pull-11 {
            right: 91.66666667%;
        }
        .col-xs-pull-10 {
            right: 83.33333333%;
        }
        .col-xs-pull-9 {
            right: 75%;
        }
        .col-xs-pull-8 {
            right: 66.66666667%;
        }
        .col-xs-pull-7 {
            right: 58.33333333%;
        }
        .col-xs-pull-6 {
            right: 50%;
        }
        .col-xs-pull-5 {
            right: 41.66666667%;
        }
        .col-xs-pull-4 {
            right: 33.33333333%;
        }
        .col-xs-pull-3 {
            right: 25%;
        }
        .col-xs-pull-2 {
            right: 16.66666667%;
        }
        .col-xs-pull-1 {
            right: 8.33333333%;
        }
        .col-xs-pull-0 {
            right: auto;
        }
        .col-xs-push-12 {
            left: 100%;
        }
        .col-xs-push-11 {
            left: 91.66666667%;
        }
        .col-xs-push-10 {
            left: 83.33333333%;
        }
        .col-xs-push-9 {
            left: 75%;
        }
        .col-xs-push-8 {
            left: 66.66666667%;
        }
        .col-xs-push-7 {
            left: 58.33333333%;
        }
        .col-xs-push-6 {
            left: 50%;
        }
        .col-xs-push-5 {
            left: 41.66666667%;
        }
        .col-xs-push-4 {
            left: 33.33333333%;
        }
        .col-xs-push-3 {
            left: 25%;
        }
        .col-xs-push-2 {
            left: 16.66666667%;
        }
        .col-xs-push-1 {
            left: 8.33333333%;
        }
        .col-xs-push-0 {
            left: auto;
        }
        .col-xs-offset-12 {
            margin-left: 100%;
        }
        .col-xs-offset-11 {
            margin-left: 91.66666667%;
        }
        .col-xs-offset-10 {
            margin-left: 83.33333333%;
        }
        .col-xs-offset-9 {
            margin-left: 75%;
        }
        .col-xs-offset-8 {
            margin-left: 66.66666667%;
        }
        .col-xs-offset-7 {
            margin-left: 58.33333333%;
        }
        .col-xs-offset-6 {
            margin-left: 50%;
        }
        .col-xs-offset-5 {
            margin-left: 41.66666667%;
        }
        .col-xs-offset-4 {
            margin-left: 33.33333333%;
        }
        .col-xs-offset-3 {
            margin-left: 25%;
        }
        .col-xs-offset-2 {
            margin-left: 16.66666667%;
        }
        .col-xs-offset-1 {
            margin-left: 8.33333333%;
        }
        .col-xs-offset-0 {
            margin-left: 0;
        }
        @media (min-width: 768px) {
            .col-sm-1, .col-sm-2, .col-sm-3, .col-sm-4, .col-sm-5, .col-sm-6, .col-sm-7, .col-sm-8, .col-sm-9, .col-sm-10, .col-sm-11, .col-sm-12 {
                float: left;
            }
            .col-sm-12 {
                width: 100%;
            }
            .col-sm-11 {
                width: 91.66666667%;
            }
            .col-sm-10 {
                width: 83.33333333%;
            }
            .col-sm-9 {
                width: 75%;
            }
            .col-sm-8 {
                width: 66.66666667%;
            }
            .col-sm-7 {
                width: 58.33333333%;
            }
            .col-sm-6 {
                width: 50%;
            }
            .col-sm-5 {
                width: 41.66666667%;
            }
            .col-sm-4 {
                width: 33.33333333%;
            }
            .col-sm-3 {
                width: 25%;
            }
            .col-sm-2 {
                width: 16.66666667%;
            }
            .col-sm-1 {
                width: 8.33333333%;
            }
            .col-sm-pull-12 {
                right: 100%;
            }
            .col-sm-pull-11 {
                right: 91.66666667%;
            }
            .col-sm-pull-10 {
                right: 83.33333333%;
            }
            .col-sm-pull-9 {
                right: 75%;
            }
            .col-sm-pull-8 {
                right: 66.66666667%;
            }
            .col-sm-pull-7 {
                right: 58.33333333%;
            }
            .col-sm-pull-6 {
                right: 50%;
            }
            .col-sm-pull-5 {
                right: 41.66666667%;
            }
            .col-sm-pull-4 {
                right: 33.33333333%;
            }
            .col-sm-pull-3 {
                right: 25%;
            }
            .col-sm-pull-2 {
                right: 16.66666667%;
            }
            .col-sm-pull-1 {
                right: 8.33333333%;
            }
            .col-sm-pull-0 {
                right: auto;
            }
            .col-sm-push-12 {
                left: 100%;
            }
            .col-sm-push-11 {
                left: 91.66666667%;
            }
            .col-sm-push-10 {
                left: 83.33333333%;
            }
            .col-sm-push-9 {
                left: 75%;
            }
            .col-sm-push-8 {
                left: 66.66666667%;
            }
            .col-sm-push-7 {
                left: 58.33333333%;
            }
            .col-sm-push-6 {
                left: 50%;
            }
            .col-sm-push-5 {
                left: 41.66666667%;
            }
            .col-sm-push-4 {
                left: 33.33333333%;
            }
            .col-sm-push-3 {
                left: 25%;
            }
            .col-sm-push-2 {
                left: 16.66666667%;
            }
            .col-sm-push-1 {
                left: 8.33333333%;
            }
            .col-sm-push-0 {
                left: auto;
            }
            .col-sm-offset-12 {
                margin-left: 100%;
            }
            .col-sm-offset-11 {
                margin-left: 91.66666667%;
            }
            .col-sm-offset-10 {
                margin-left: 83.33333333%;
            }
            .col-sm-offset-9 {
                margin-left: 75%;
            }
            .col-sm-offset-8 {
                margin-left: 66.66666667%;
            }
            .col-sm-offset-7 {
                margin-left: 58.33333333%;
            }
            .col-sm-offset-6 {
                margin-left: 50%;
            }
            .col-sm-offset-5 {
                margin-left: 41.66666667%;
            }
            .col-sm-offset-4 {
                margin-left: 33.33333333%;
            }
            .col-sm-offset-3 {
                margin-left: 25%;
            }
            .col-sm-offset-2 {
                margin-left: 16.66666667%;
            }
            .col-sm-offset-1 {
                margin-left: 8.33333333%;
            }
            .col-sm-offset-0 {
                margin-left: 0;
            }
        }
        @media (min-width: 992px) {
            .col-md-1, .col-md-2, .col-md-3, .col-md-4, .col-md-5, .col-md-6, .col-md-7, .col-md-8, .col-md-9, .col-md-10, .col-md-11, .col-md-12 {
                float: left;
            }
            .col-md-12 {
                width: 100%;
            }
            .col-md-11 {
                width: 91.66666667%;
            }
            .col-md-10 {
                width: 83.33333333%;
            }
            .col-md-9 {
                width: 75%;
            }
            .col-md-8 {
                width: 66.66666667%;
            }
            .col-md-7 {
                width: 58.33333333%;
            }
            .col-md-6 {
                width: 50%;
            }
            .col-md-5 {
                width: 41.66666667%;
            }
            .col-md-4 {
                width: 33.33333333%;
            }
            .col-md-3 {
                width: 25%;
            }
            .col-md-2 {
                width: 16.66666667%;
            }
            .col-md-1 {
                width: 8.33333333%;
            }
            .col-md-pull-12 {
                right: 100%;
            }
            .col-md-pull-11 {
                right: 91.66666667%;
            }
            .col-md-pull-10 {
                right: 83.33333333%;
            }
            .col-md-pull-9 {
                right: 75%;
            }
            .col-md-pull-8 {
                right: 66.66666667%;
            }
            .col-md-pull-7 {
                right: 58.33333333%;
            }
            .col-md-pull-6 {
                right: 50%;
            }
            .col-md-pull-5 {
                right: 41.66666667%;
            }
            .col-md-pull-4 {
                right: 33.33333333%;
            }
            .col-md-pull-3 {
                right: 25%;
            }
            .col-md-pull-2 {
                right: 16.66666667%;
            }
            .col-md-pull-1 {
                right: 8.33333333%;
            }
            .col-md-pull-0 {
                right: auto;
            }
            .col-md-push-12 {
                left: 100%;
            }
            .col-md-push-11 {
                left: 91.66666667%;
            }
            .col-md-push-10 {
                left: 83.33333333%;
            }
            .col-md-push-9 {
                left: 75%;
            }
            .col-md-push-8 {
                left: 66.66666667%;
            }
            .col-md-push-7 {
                left: 58.33333333%;
            }
            .col-md-push-6 {
                left: 50%;
            }
            .col-md-push-5 {
                left: 41.66666667%;
            }
            .col-md-push-4 {
                left: 33.33333333%;
            }
            .col-md-push-3 {
                left: 25%;
            }
            .col-md-push-2 {
                left: 16.66666667%;
            }
            .col-md-push-1 {
                left: 8.33333333%;
            }
            .col-md-push-0 {
                left: auto;
            }
            .col-md-offset-12 {
                margin-left: 100%;
            }
            .col-md-offset-11 {
                margin-left: 91.66666667%;
            }
            .col-md-offset-10 {
                margin-left: 83.33333333%;
            }
            .col-md-offset-9 {
                margin-left: 75%;
            }
            .col-md-offset-8 {
                margin-left: 66.66666667%;
            }
            .col-md-offset-7 {
                margin-left: 58.33333333%;
            }
            .col-md-offset-6 {
                margin-left: 50%;
            }
            .col-md-offset-5 {
                margin-left: 41.66666667%;
            }
            .col-md-offset-4 {
                margin-left: 33.33333333%;
            }
            .col-md-offset-3 {
                margin-left: 25%;
            }
            .col-md-offset-2 {
                margin-left: 16.66666667%;
            }
            .col-md-offset-1 {
                margin-left: 8.33333333%;
            }
            .col-md-offset-0 {
                margin-left: 0;
            }
        }
        @media (min-width: 1200px) {
            .col-lg-1, .col-lg-2, .col-lg-3, .col-lg-4, .col-lg-5, .col-lg-6, .col-lg-7, .col-lg-8, .col-lg-9, .col-lg-10, .col-lg-11, .col-lg-12 {
                float: left;
            }
            .col-lg-12 {
                width: 100%;
            }
            .col-lg-11 {
                width: 91.66666667%;
            }
            .col-lg-10 {
                width: 83.33333333%;
            }
            .col-lg-9 {
                width: 75%;
            }
            .col-lg-8 {
                width: 66.66666667%;
            }
            .col-lg-7 {
                width: 58.33333333%;
            }
            .col-lg-6 {
                width: 50%;
            }
            .col-lg-5 {
                width: 41.66666667%;
            }
            .col-lg-4 {
                width: 33.33333333%;
            }
            .col-lg-3 {
                width: 25%;
            }
            .col-lg-2 {
                width: 16.66666667%;
            }
            .col-lg-1 {
                width: 8.33333333%;
            }
            .col-lg-pull-12 {
                right: 100%;
            }
            .col-lg-pull-11 {
                right: 91.66666667%;
            }
            .col-lg-pull-10 {
                right: 83.33333333%;
            }
            .col-lg-pull-9 {
                right: 75%;
            }
            .col-lg-pull-8 {
                right: 66.66666667%;
            }
            .col-lg-pull-7 {
                right: 58.33333333%;
            }
            .col-lg-pull-6 {
                right: 50%;
            }
            .col-lg-pull-5 {
                right: 41.66666667%;
            }
            .col-lg-pull-4 {
                right: 33.33333333%;
            }
            .col-lg-pull-3 {
                right: 25%;
            }
            .col-lg-pull-2 {
                right: 16.66666667%;
            }
            .col-lg-pull-1 {
                right: 8.33333333%;
            }
            .col-lg-pull-0 {
                right: auto;
            }
            .col-lg-push-12 {
                left: 100%;
            }
            .col-lg-push-11 {
                left: 91.66666667%;
            }
            .col-lg-push-10 {
                left: 83.33333333%;
            }
            .col-lg-push-9 {
                left: 75%;
            }
            .col-lg-push-8 {
                left: 66.66666667%;
            }
            .col-lg-push-7 {
                left: 58.33333333%;
            }
            .col-lg-push-6 {
                left: 50%;
            }
            .col-lg-push-5 {
                left: 41.66666667%;
            }
            .col-lg-push-4 {
                left: 33.33333333%;
            }
            .col-lg-push-3 {
                left: 25%;
            }
            .col-lg-push-2 {
                left: 16.66666667%;
            }
            .col-lg-push-1 {
                left: 8.33333333%;
            }
            .col-lg-push-0 {
                left: auto;
            }
            .col-lg-offset-12 {
                margin-left: 100%;
            }
            .col-lg-offset-11 {
                margin-left: 91.66666667%;
            }
            .col-lg-offset-10 {
                margin-left: 83.33333333%;
            }
            .col-lg-offset-9 {
                margin-left: 75%;
            }
            .col-lg-offset-8 {
                margin-left: 66.66666667%;
            }
            .col-lg-offset-7 {
                margin-left: 58.33333333%;
            }
            .col-lg-offset-6 {
                margin-left: 50%;
            }
            .col-lg-offset-5 {
                margin-left: 41.66666667%;
            }
            .col-lg-offset-4 {
                margin-left: 33.33333333%;
            }
            .col-lg-offset-3 {
                margin-left: 25%;
            }
            .col-lg-offset-2 {
                margin-left: 16.66666667%;
            }
            .col-lg-offset-1 {
                margin-left: 8.33333333%;
            }
            .col-lg-offset-0 {
                margin-left: 0;
            }
        }
    </style>
</div>
		<footer class="article-footer">
			<div class="article-tags"><i class="fa fa-tags"></i><a href="https://cuiqingcai.com/tag/python" rel="tag">Python</a><a href="https://cuiqingcai.com/tag/%e7%88%ac%e8%99%ab" rel="tag">爬虫</a></div>		</footer>
	<nav class="article-nav">
			<span class="article-nav-prev"><i class="fa fa-angle-double-left"></i> <a href="https://cuiqingcai.com/1070.html" rel="prev">WordPress解决修改style.css不生效问题三步走！</a></span>
			<span class="article-nav-next"><a href="https://cuiqingcai.com/1186.html" rel="next">PHP高级特性一之正则表达式用法</a>  <i class="fa fa-angle-double-right"></i></span>
		</nav>

		<div class="related_top">
			<div class="related_posts"><ul class="related_img">

		<li class="related_box"  >
		<a href="https://cuiqingcai.com/5006.html" title="在阿里云上测试Gerapy教程" target="_blank">
<img src="https://cuiqingcai.com/wp-content/themes/Yusi/timthumb.php?src=https://qiniu.cuiqingcai.com/wp-content/uploads/2018/01/Selection_020.png&h=110&w=185&q=90&zc=1&ct=1" alt="在阿里云上测试Gerapy教程" />	<br><span class="r_title">在阿里云上测试Gerapy教程</span></a>
		</li>
	
		<li class="related_box"  >
		<a href="https://cuiqingcai.com/4959.html" title="跟繁琐的命令行说拜拜！Gerapy分布式爬虫管理框架来袭！" target="_blank">
<img src="https://cuiqingcai.com/wp-content/themes/Yusi/timthumb.php?src=https://qiniu.cuiqingcai.com/wp-content/uploads/2018/01/49.jpeg&h=110&w=185&q=90&zc=1&ct=1" alt="跟繁琐的命令行说拜拜！Gerapy分布式爬虫管理框架来袭！" />	<br><span class="r_title">跟繁琐的命令行说拜拜！Gerapy分布式爬虫管理框架来袭！</span></a>
		</li>
	
		<li class="related_box"  >
		<a href="https://cuiqingcai.com/4816.html" title="自建免费PYTHON爬虫代理IP池" target="_blank">
<img src="https://cuiqingcai.com/wp-content/themes/Yusi/timthumb.php?src=http://qiniu.cuiqingcai.com/wp-content/uploads/2016/10/9555112.jpg&h=110&w=185&q=90&zc=1&ct=1" alt="自建免费PYTHON爬虫代理IP池" />	<br><span class="r_title">自建免费PYTHON爬虫代理IP池</span></a>
		</li>
	
		<li class="related_box"  >
		<a href="https://cuiqingcai.com/4791.html" title="轻型爬虫框架" target="_blank">
<img src="https://cuiqingcai.com/wp-content/themes/Yusi/timthumb.php?src=http://qiniu.cuiqingcai.com/wp-content/uploads/2017/02/QQ图片20170205084843.jpg&h=110&w=185&q=90&zc=1&ct=1" alt="轻型爬虫框架" />	<br><span class="r_title">轻型爬虫框架</span></a>
		</li>
	</ul>

<div class="relates">
<ul>
<li><i class="fa fa-minus"></i><a href="https://cuiqingcai.com/5006.html">在阿里云上测试Gerapy教程</a></li><li><i class="fa fa-minus"></i><a href="https://cuiqingcai.com/4959.html">跟繁琐的命令行说拜拜！Gerapy分布式爬虫管理框架来袭！</a></li><li><i class="fa fa-minus"></i><a href="https://cuiqingcai.com/4816.html">自建免费PYTHON爬虫代理IP池</a></li><li><i class="fa fa-minus"></i><a href="https://cuiqingcai.com/4791.html">轻型爬虫框架</a></li><li><i class="fa fa-minus"></i><a href="https://cuiqingcai.com/4778.html">Neo4j简介及Py2Neo的用法</a></li><li><i class="fa fa-minus"></i><a href="https://cuiqingcai.com/4607.html">获取知乎问题答案并转换为MarkDown文件</a></li><li><i class="fa fa-minus"></i><a href="https://cuiqingcai.com/4465.html">密码保护：免登录新浪微博爬虫系列之第一篇  单博主微博及评论数据</a></li><li><i class="fa fa-minus"></i><a href="https://cuiqingcai.com/4380.html">利用Scrapy爬取知乎用户详细信息并存至MongoDB</a></li>
</ul></div></div>		</div>
						<a name="comments"></a>
<div id="SOHUCS" sid="1076"></div> 
<script type="text/javascript"> 
(function(){ 
    var appid = 'cyse2vKeA'; 
    var conf = 'prod_e440e40ef998fc11db594040d810aefb'; 
    var width = window.innerWidth || document.documentElement.clientWidth; 
    if (width < 960) { 
        window.document.write('<script id="changyan_mobile_js" charset="utf-8" type="text/javascript" src="https://changyan.sohu.com/upload/mobile/wap-js/changyan_mobile.js?client_id=' + appid + '&conf=' + conf + '"><\/script>'); 
    } else { 
        var loadJs=function(d,a){var c=document.getElementsByTagName("head")[0]||document.head||document.documentElement;var b=document.createElement("script");b.setAttribute("type","text/javascript");b.setAttribute("charset","UTF-8");b.setAttribute("src",d);if(typeof a==="function"){if(window.attachEvent){b.onreadystatechange=function(){var e=b.readyState;if(e==="loaded"||e==="complete"){b.onreadystatechange=null;a()}}}else{b.onload=a}}c.appendChild(b)};loadJs("https://changyan.sohu.com/upload/changyan.js",function(){window.changyan.api.config({appid:appid,conf:conf})}); 
    }})(); 
</script>            
<div id="ds-ssr" style="display:none">
				<nav id="comment-nav-above">
			<h1 class="assistive-text">Comment navigation</h1>
			<div class="nav-previous"><a href="https://cuiqingcai.com/1076.html/comment-page-4#comments" >&larr; Older Comments</a></div>
			<div class="nav-next"></div>
		</nav>
		            <ol id="commentlist">
                		<li class="comment even thread-even depth-1" id="li-comment-4240">
			<article id="comment-4240" class="comment">
				<footer class="comment-meta">
					<cite class="comment-author vcard">
						<span class="fn">Roc-J</span> on <a rel="nofollow" href="https://cuiqingcai.com/1076.html/comment-page-5#comment-4240"><time pubdate datetime="2017-07-13T22:39:20+00:00">2017年7月13日 at 下午10:39</time></a> <span class="says">said:</span>					</cite>
				</footer>
	
				<div class="comment-content"><p>楼主，貌似现在淘宝模拟登陆跳转的是js文件，word天，我暂时不知道怎么解决</p>
</div>
				
			</article>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-4677">
			<article id="comment-4677" class="comment">
				<footer class="comment-meta">
					<cite class="comment-author vcard">
						<span class="fn">ps_sisyphus</span> on <a rel="nofollow" href="https://cuiqingcai.com/1076.html/comment-page-5#comment-4677"><time pubdate datetime="2017-06-27T14:58:30+00:00">2017年6月27日 at 下午2:58</time></a> <span class="says">said:</span>					</cite>
				</footer>
	
				<div class="comment-content"><p>请问在 105 行，<br />
        content = response.read().decode(&#8216;gbk&#8217;)</p>
<p>decode使用的是‘gbk’编码，<br />
然而在第111行，搜索的是‘utf-8‘编码<br />
        pattern = re.compile(u&#8217;\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801&#8242;,re.S)</p>
<p>为什么会用不同的编码去搜索？</p>
<p>第二个问题是淘宝前端新的编码方式，似乎不只是gbk了，我在python 2.7.10里遇到以下问题：<br />
        content = response.read().decode(&#8216;gbk&#8217;)<br />
        UnicodeDecodeError: &#8216;gbk&#8217; codec can&#8217;t decode bytes in position 1-2: illegal multibyte sequence</p>
<p>我使用了‘ignore’，然而获得的仍然是乱码，请问有什么方式解决。<br />
        content = response.read().decode(&#8216;gbk&#8217;, &#8216;ignore&#8217;)</p>
<p>打扰。</p>
</div>
				
			</article>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="li-comment-4678">
			<article id="comment-4678" class="comment">
				<footer class="comment-meta">
					<cite class="comment-author vcard">
						<span class="fn">挥戈</span> on <a rel="nofollow" href="https://cuiqingcai.com/1076.html/comment-page-5#comment-4678"><time pubdate datetime="2017-06-12T10:25:17+00:00">2017年6月12日 at 上午10:25</time></a> <span class="says">said:</span>					</cite>
				</footer>
	
				<div class="comment-content"><p>现在的已买到商品页面已经不能通过传入页数来获得相应的页，已买到商品URL：https://buyertrade.taobao.com/trade/itemlist/list_bought_items.htm?spm=a1z02.1.1997525045.2.x07Gtt没有pagenum这个参数。请问有其它的方法获取指定页面吗？</p>
</div>
				
			</article>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-4679">
			<article id="comment-4679" class="comment">
				<footer class="comment-meta">
					<cite class="comment-author vcard">
						<span class="fn">yinxuan9</span> on <a rel="nofollow" href="https://cuiqingcai.com/1076.html/comment-page-5#comment-4679"><time pubdate datetime="2017-06-04T14:23:41+00:00">2017年6月4日 at 下午2:23</time></a> <span class="says">said:</span>					</cite>
				</footer>
	
				<div class="comment-content"><p>现在表单只有两个数据233333333333333333333333然后也没有验证码</p>
</div>
				
			</article>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="li-comment-4122">
			<article id="comment-4122" class="comment">
				<footer class="comment-meta">
					<cite class="comment-author vcard">
						<span class="fn">伦语</span> on <a rel="nofollow" href="https://cuiqingcai.com/1076.html/comment-page-5#comment-4122"><time pubdate datetime="2017-05-25T14:39:53+00:00">2017年5月25日 at 下午2:39</time></a> <span class="says">said:</span>					</cite>
				</footer>
	
				<div class="comment-content"><p>很好很强大！！！！</p>
</div>
				
			</article>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-3415">
			<article id="comment-3415" class="comment">
				<footer class="comment-meta">
					<cite class="comment-author vcard">
						<span class="fn"><a href='https://yangzheng0515.github.io/' rel='external nofollow' class='url'>yangzheng</a></span> on <a rel="nofollow" href="https://cuiqingcai.com/1076.html/comment-page-5#comment-3415"><time pubdate datetime="2017-02-24T09:16:59+00:00">2017年2月24日 at 上午9:16</time></a> <span class="says">said:</span>					</cite>
				</footer>
	
				<div class="comment-content"><p>我今天登陆后查看订单，并没有出现验证码和滑块。</p>
</div>
				
			</article>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="li-comment-2884">
			<article id="comment-2884" class="comment">
				<footer class="comment-meta">
					<cite class="comment-author vcard">
						<span class="fn"><a href='http://t.qq.com/wuxiankun1996wuxia' rel='external nofollow' class='url'>吴听</a></span> on <a rel="nofollow" href="https://cuiqingcai.com/1076.html/comment-page-5#comment-2884"><time pubdate datetime="2016-12-02T23:37:34+00:00">2016年12月2日 at 下午11:37</time></a> <span class="says">said:</span>					</cite>
				</footer>
	
				<div class="comment-content"><p>请问你们有什么交流群吗  方便加一下我吗</p>
</div>
				
			</article>
		<ul class="children">
		<li class="comment byuser comment-author-cqcre bypostauthor odd alt depth-2" id="li-comment-2914">
			<article id="comment-2914" class="comment">
				<footer class="comment-meta">
					<cite class="comment-author vcard">
						<span class="fn"><a href='http://www.baidu.com/p/崔庆才' rel='external nofollow' class='url'>崔庆才</a></span> on <a rel="nofollow" href="https://cuiqingcai.com/1076.html/comment-page-5#comment-2914"><time pubdate datetime="2016-12-06T22:48:23+00:00">2016年12月6日 at 下午10:48</time></a> <span class="says">said:</span>					</cite>
				</footer>
	
				<div class="comment-content"><p>在右边不是可以看到吗，99350970</p>
</div>
				
			</article>
		</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
		<li class="comment even thread-odd thread-alt depth-1" id="li-comment-2483">
			<article id="comment-2483" class="comment">
				<footer class="comment-meta">
					<cite class="comment-author vcard">
						<span class="fn">洛冰雨</span> on <a rel="nofollow" href="https://cuiqingcai.com/1076.html/comment-page-5#comment-2483"><time pubdate datetime="2016-09-28T16:23:22+00:00">2016年9月28日 at 下午4:23</time></a> <span class="says">said:</span>					</cite>
				</footer>
	
				<div class="comment-content"><p>楼主，如果我模拟登录一个不需要验证的网站（京东，没有遇到需要验证的 <img src="http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/e9/sk_org.gif" /> ），那么是否是直接返回的content就应该是：j-token?，但我的content返回的直接是登录页面的源码，这是怎么回事？求解 <img src="http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/9d/sada_org.gif" />  <img src="http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/1a/bs_org.gif" /> </p>
</div>
				
			</article>
		<ul class="children">
		<li class="comment byuser comment-author-cqcre bypostauthor odd alt depth-2" id="li-comment-2529">
			<article id="comment-2529" class="comment">
				<footer class="comment-meta">
					<cite class="comment-author vcard">
						<span class="fn"><a href='http://www.baidu.com/p/崔庆才' rel='external nofollow' class='url'>崔庆才</a></span> on <a rel="nofollow" href="https://cuiqingcai.com/1076.html/comment-page-5#comment-2529"><time pubdate datetime="2016-10-11T12:57:58+00:00">2016年10月11日 at 下午12:57</time></a> <span class="says">said:</span>					</cite>
				</footer>
	
				<div class="comment-content"><p>京东和这个不一样哇，我没有试过哎，我建议用selenium来模拟登录手机端</p>
</div>
				
			</article>
		</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="li-comment-3879">
			<article id="comment-3879" class="comment">
				<footer class="comment-meta">
					<cite class="comment-author vcard">
						<span class="fn">Leon?</span> on <a rel="nofollow" href="https://cuiqingcai.com/1076.html/comment-page-5#comment-3879"><time pubdate datetime="2016-09-21T11:55:53+00:00">2016年9月21日 at 上午11:55</time></a> <span class="says">said:</span>					</cite>
				</footer>
	
				<div class="comment-content"><p>用验证码扫描登录？把图片提取出来给用户扫描然后登录？？这样可以吗</p>
</div>
				
			</article>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-2429">
			<article id="comment-2429" class="comment">
				<footer class="comment-meta">
					<cite class="comment-author vcard">
						<span class="fn">Leon?</span> on <a rel="nofollow" href="https://cuiqingcai.com/1076.html/comment-page-5#comment-2429"><time pubdate datetime="2016-09-21T11:55:53+00:00">2016年9月21日 at 上午11:55</time></a> <span class="says">said:</span>					</cite>
				</footer>
	
				<div class="comment-content"><p>用验证码扫描登录？把图片提取出来给用户扫描然后登录？？这样可以吗</p>
</div>
				
			</article>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="li-comment-2243">
			<article id="comment-2243" class="comment">
				<footer class="comment-meta">
					<cite class="comment-author vcard">
						<span class="fn"><a href='http://www.xevip.cn' rel='external nofollow' class='url'>小易分享网</a></span> on <a rel="nofollow" href="https://cuiqingcai.com/1076.html/comment-page-5#comment-2243"><time pubdate datetime="2016-08-16T09:56:35+00:00">2016年8月16日 at 上午9:56</time></a> <span class="says">said:</span>					</cite>
				</footer>
	
				<div class="comment-content"><p>不错哦，赞一个，求认识，求回访   <a href="http://www.xevip.cn" rel="nofollow">http://www.xevip.cn</a></p>
</div>
				
			</article>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-1837">
			<article id="comment-1837" class="comment">
				<footer class="comment-meta">
					<cite class="comment-author vcard">
						<span class="fn">蚯蚓先生</span> on <a rel="nofollow" href="https://cuiqingcai.com/1076.html/comment-page-5#comment-1837"><time pubdate datetime="2016-07-04T10:47:37+00:00">2016年7月4日 at 上午10:47</time></a> <span class="says">said:</span>					</cite>
				</footer>
	
				<div class="comment-content"><p>可以使用手机网址啊</p>
</div>
				
			</article>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="li-comment-1838">
			<article id="comment-1838" class="comment">
				<footer class="comment-meta">
					<cite class="comment-author vcard">
						<span class="fn">Hey_Mashushu</span> on <a rel="nofollow" href="https://cuiqingcai.com/1076.html/comment-page-5#comment-1838"><time pubdate datetime="2016-06-24T17:45:24+00:00">2016年6月24日 at 下午5:45</time></a> <span class="says">said:</span>					</cite>
				</footer>
	
				<div class="comment-content"><p>都已经把返回的内容打印出来，还没有找到J_NcoToken字段的:(</p>
</div>
				
			</article>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-1746">
			<article id="comment-1746" class="comment">
				<footer class="comment-meta">
					<cite class="comment-author vcard">
						<span class="fn">我就是熊孩子</span> on <a rel="nofollow" href="https://cuiqingcai.com/1076.html/comment-page-5#comment-1746"><time pubdate datetime="2016-06-16T11:08:54+00:00">2016年6月16日 at 上午11:08</time></a> <span class="says">said:</span>					</cite>
				</footer>
	
				<div class="comment-content"><p>你好  ，  我今天登录的淘宝没有滑块验证呐，也没有图片验证码 </p>
</div>
				
			</article>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="li-comment-1646">
			<article id="comment-1646" class="comment">
				<footer class="comment-meta">
					<cite class="comment-author vcard">
						<span class="fn">静觅博客</span> on <a rel="nofollow" href="https://cuiqingcai.com/1076.html/comment-page-5#comment-1646"><time pubdate datetime="2016-05-20T22:31:12+00:00">2016年5月20日 at 下午10:31</time></a> <span class="says">said:</span>					</cite>
				</footer>
	
				<div class="comment-content"><p>这个建议用selenium来模拟，直接打开浏览器登录</p>
</div>
				
			</article>
		</li><!-- #comment-## -->
            </ol>

				<nav id="comment-nav-below">
			<h1 class="assistive-text">Comment navigation</h1>
			<div class="nav-previous"><a href="https://cuiqingcai.com/1076.html/comment-page-4#comments" >&larr; Older Comments</a></div>
			<div class="nav-next"></div>
		</nav>
		    </div>
			
	</div>
</div>
<aside class="sidebar">	
<div class="widget widget_text"><div class="textwidget"><div class="social">

<a href="https://weibo.com/cuiqingcai" rel="external nofollow" title="新浪微博" target="_blank"><i class="sinaweibo fa fa-weibo"></i></a><a  href="http://t.qq.com/CQCcqc123456?preview" rel="external nofollow" title="腾讯微博" target="_blank"><i class="tencentweibo fa fa-tencent-weibo"></i></a><a class="weixin"><i class="weixins fa fa-weixin"></i><div class="weixin-popover"><div class="popover bottom in"><div class="arrow"></div><div class="popover-title"></div><div class="popover-content"><img src="https://cuiqingcai.com/wp-content/themes/Yusi/img/weixin.gif" ></div></div></div></a>
<a href="http://mail.qq.com/cgi-bin/qm_share?t=qm_mailme&email=cqc@cuiqingcai.com" rel="external nofollow" title="Email" target="_blank"><i class="email fa fa-envelope-o"></i></a><a href="?feed=rss2" rel="external nofollow" target="_blank"  title="订阅本站"><i class="rss fa fa-rss"></i></a>
</div></div></div>

<div class="widget widget_metaslider_widget"><div class="title"><h2>热门专题</h2></div><!-- meta slider -->
<div style="width: 100%;" class="metaslider metaslider-nivo metaslider-2698 ml-slider meta-slider">
    
    <div id="metaslider_container_2698">
        <div class='slider-wrapper theme-bar'>
            <div class='ribbon'></div>
            <div id='metaslider_2698' class='nivoSlider'>
                <a href="https://cuiqingcai.com/1052.html" target="_blank"><img src="https://qiniu.cuiqingcai.com/wp-content/uploads/2015/04/wallpaper_5263464.jpg" height="300" width="320" data-title="Python爬虫学习系列教程" title="Python爬虫学习系列教程" alt="Python爬虫学习系列教程" class="slider-2698 slide-1720" /></a>
                <a href="https://cuiqingcai.com/4320.html" target="_blank"><img src="https://qiniu.cuiqingcai.com/wp-content/uploads/2015/02/wallpaper_5226849-1.jpg" height="300" width="320" data-title="Python3爬虫学习视频教程" title="OpenGL绘图系列教程" alt="OpenGL绘图系列教程" class="slider-2698 slide-951" /></a>
                <a href="https://cuiqingcai.com/4352.html" target="_blank"><img src="https://qiniu.cuiqingcai.com/wp-content/uploads/2016/03/20-234x220.jpg" height="300" width="320" data-title="小白学爬虫系列教程" alt="" class="slider-2698 slide-4372" /></a>
            </div>
        </div>
        
    </div>
    <script type="text/javascript">
        var metaslider_2698 = function($) {
            $('#metaslider_2698').nivoSlider({ 
                boxCols:7,
                boxRows:5,
                pauseTime:3000,
                effect:"random",
                controlNav:false,
                directionNav:true,
                pauseOnHover:true,
                animSpeed:600,
                prevText:"&lt;",
                nextText:"&gt;",
                slices:15,
                manualAdvance:false
            });
        };
        var timer_metaslider_2698 = function() {
            var slider = !window.jQuery ? window.setTimeout(timer_metaslider_2698, 100) : !jQuery.isReady ? window.setTimeout(timer_metaslider_2698, 1) : metaslider_2698(window.jQuery);
        };
        timer_metaslider_2698();
    </script>
</div>
<!--// meta slider--></div><div class="widget widget_text">			<div class="textwidget"><img src="https://qiniu.cuiqingcai.com/wp-content/uploads/2018/01/zhifubao.png"/></div>
		</div><div class="widget widget_archive"><div class="title"><h2>文章归档</h2></div>		<ul>
			<li><a href='https://cuiqingcai.com/date/2018/01'>2018年一月</a></li>
	<li><a href='https://cuiqingcai.com/date/2017/12'>2017年十二月</a></li>
	<li><a href='https://cuiqingcai.com/date/2017/11'>2017年十一月</a></li>
	<li><a href='https://cuiqingcai.com/date/2017/10'>2017年十月</a></li>
	<li><a href='https://cuiqingcai.com/date/2017/09'>2017年九月</a></li>
	<li><a href='https://cuiqingcai.com/date/2017/08'>2017年八月</a></li>
	<li><a href='https://cuiqingcai.com/date/2017/07'>2017年七月</a></li>
	<li><a href='https://cuiqingcai.com/date/2017/06'>2017年六月</a></li>
	<li><a href='https://cuiqingcai.com/date/2017/05'>2017年五月</a></li>
	<li><a href='https://cuiqingcai.com/date/2017/04'>2017年四月</a></li>
	<li><a href='https://cuiqingcai.com/date/2017/03'>2017年三月</a></li>
	<li><a href='https://cuiqingcai.com/date/2017/02'>2017年二月</a></li>
	<li><a href='https://cuiqingcai.com/date/2017/01'>2017年一月</a></li>
	<li><a href='https://cuiqingcai.com/date/2016/12'>2016年十二月</a></li>
	<li><a href='https://cuiqingcai.com/date/2016/11'>2016年十一月</a></li>
	<li><a href='https://cuiqingcai.com/date/2016/10'>2016年十月</a></li>
	<li><a href='https://cuiqingcai.com/date/2016/09'>2016年九月</a></li>
	<li><a href='https://cuiqingcai.com/date/2016/08'>2016年八月</a></li>
	<li><a href='https://cuiqingcai.com/date/2016/07'>2016年七月</a></li>
	<li><a href='https://cuiqingcai.com/date/2016/06'>2016年六月</a></li>
	<li><a href='https://cuiqingcai.com/date/2016/03'>2016年三月</a></li>
	<li><a href='https://cuiqingcai.com/date/2016/02'>2016年二月</a></li>
	<li><a href='https://cuiqingcai.com/date/2016/01'>2016年一月</a></li>
	<li><a href='https://cuiqingcai.com/date/2015/12'>2015年十二月</a></li>
	<li><a href='https://cuiqingcai.com/date/2015/11'>2015年十一月</a></li>
	<li><a href='https://cuiqingcai.com/date/2015/10'>2015年十月</a></li>
	<li><a href='https://cuiqingcai.com/date/2015/09'>2015年九月</a></li>
	<li><a href='https://cuiqingcai.com/date/2015/08'>2015年八月</a></li>
	<li><a href='https://cuiqingcai.com/date/2015/07'>2015年七月</a></li>
	<li><a href='https://cuiqingcai.com/date/2015/06'>2015年六月</a></li>
	<li><a href='https://cuiqingcai.com/date/2015/05'>2015年五月</a></li>
	<li><a href='https://cuiqingcai.com/date/2015/04'>2015年四月</a></li>
	<li><a href='https://cuiqingcai.com/date/2015/03'>2015年三月</a></li>
	<li><a href='https://cuiqingcai.com/date/2015/02'>2015年二月</a></li>
	<li><a href='https://cuiqingcai.com/date/2015/01'>2015年一月</a></li>
	<li><a href='https://cuiqingcai.com/date/2014/12'>2014年十二月</a></li>
	<li><a href='https://cuiqingcai.com/date/2014/11'>2014年十一月</a></li>
	<li><a href='https://cuiqingcai.com/date/2014/10'>2014年十月</a></li>
	<li><a href='https://cuiqingcai.com/date/2014/09'>2014年九月</a></li>
		</ul>
		</div><div class="widget widget_text"><div class="title"><h2>交流分享</h2></div>			<div class="textwidget"><div class="p-sm" style="overflow:hidden;padding-bottom:15px">
<p class="text-center">
想一起交流学习经验吗？来进击的Coder瞧瞧吧
</p>
<div class="text-center" style="float:left">
<img src="http://qiniu.cuiqingcai.com/wp-content/uploads/2016/12/QQqun.png" style="width:250px"/>
</div>
<div class="text-left" style="float:left;padding-top: 10px;width:90px">
<p>学习？交流？分享？吐槽？</p>
<p>尽在</p>
<p style="
    color: #E9415A;
    font-size: 15px;">进击的Coder</p>
<p>QQ群号</p>
<p style="
    color: #E9415A;
    font-size: 15px;margin-bottom:45px">99350970</p>
<a style="background-color: #EB586F;
    height: 16px;
    display: block;
    line-height: 16px;
    font-size: 13px;" class="btn btn-xs btn-danger" target="_blank" href="http://shang.qq.com/wpa/qunwpa?idkey=31ed8a7d15339353ad090379bb9243118f90220324a7a0f4b453bce52dcd02b6">立即加入</a>
</div>
</div></div>
		</div><div class="widget widget_text"><div class="title"><h2>微信公众号</h2></div>			<div class="textwidget"><div class="p-sm" style="overflow:hidden;padding-bottom:12px">
<p class="text-center">
学习累了吧，扫个码玩玩吧~
</p>
<div class="text-center" style="float:left">
<img src="http://qiniu.cuiqingcai.com/wp-content/uploads/2017/05/qrcode_for_gh_5b0546ddd2d0_430.jpg" style="width:250px"/>
</div>
<div class="text-left" style="float:left;padding-top: 10px;width:90px">
<p>想找人聊天解闷？<br />想要学习干货？<br />想要更多福利？</p>
<p>尽在</p>
<p style="
    color: #E9415A;
    font-size: 15px;">进击的Coder</p>
<p>公众号搜索</p>
<a style="background-color: #EB586F;
    height: 16px;
    display: block;
    line-height: 14px; width: 70px;
    font-size: 12px;" class="btn btn-xs btn-danger" target="_blank">进击的Coder</a>
</div>
</div></div>
		</div><div class="widget d_postlist"><div class="title"><h2>猜你喜欢</h2></div><ul><li><a href="https://cuiqingcai.com/990.html" title="Python爬虫实战一之爬取糗事百科段子" ><span class="thumbnail"><img src="https://cuiqingcai.com/wp-content/themes/Yusi/timthumb.php?src=https://qiniu.cuiqingcai.com/wp-content/uploads/2015/02/wallpaper_5228661.jpg&h=64&w=100&q=90&zc=1&ct=1" alt="Python爬虫实战一之爬取糗事百科段子" /></span><span class="text">Python爬虫实战一之爬取糗事百科段子</span><span class="muted">2015-02-17</span><span class="muted">644评论</span></a></li>
<li><a href="https://cuiqingcai.com/993.html" title="Python爬虫实战二之爬取百度贴吧帖子" ><span class="thumbnail"><img src="https://cuiqingcai.com/wp-content/themes/Yusi/timthumb.php?src=https://qiniu.cuiqingcai.com/wp-content/uploads/2015/02/wallpaper_5265936.jpg&h=64&w=100&q=90&zc=1&ct=1" alt="Python爬虫实战二之爬取百度贴吧帖子" /></span><span class="text">Python爬虫实战二之爬取百度贴吧帖子</span><span class="muted">2015-02-17</span><span class="muted">215评论</span></a></li>
<li><a href="https://cuiqingcai.com/3179.html" title="小白爬虫第一弹之抓取妹子图" ><span class="thumbnail"><img src="https://cuiqingcai.com/wp-content/themes/Yusi/timthumb.php?src=https://qiniu.cuiqingcai.com/wp-content/uploads/2016/10/1-1506261ZI7.jpg&h=64&w=100&q=90&zc=1&ct=1" alt="小白爬虫第一弹之抓取妹子图" /></span><span class="text">小白爬虫第一弹之抓取妹子图</span><span class="muted">2016-10-28</span><span class="muted">175评论</span></a></li>
<li><a href="https://cuiqingcai.com/1001.html" title="Python爬虫实战四之抓取淘宝MM照片" ><span class="thumbnail"><img src="https://cuiqingcai.com/wp-content/themes/Yusi/timthumb.php?src=https://qiniu.cuiqingcai.com/wp-content/uploads/2015/02/wallpaper_5270641.jpg&h=64&w=100&q=90&zc=1&ct=1" alt="Python爬虫实战四之抓取淘宝MM照片" /></span><span class="text">Python爬虫实战四之抓取淘宝MM照片</span><span class="muted">2015-02-20</span><span class="muted">160评论</span></a></li>
<li><a href="https://cuiqingcai.com/2652.html" title="Python爬虫进阶四之PySpider的用法" ><span class="thumbnail"><img src="https://cuiqingcai.com/wp-content/themes/Yusi/timthumb.php?src=https://qiniu.cuiqingcai.com/wp-content/uploads/2016/03/兔小妖39.jpg&h=64&w=100&q=90&zc=1&ct=1" alt="Python爬虫进阶四之PySpider的用法" /></span><span class="text">Python爬虫进阶四之PySpider的用法</span><span class="muted">2016-03-26</span><span class="muted">156评论</span></a></li>
<li><a href="https://cuiqingcai.com/1076.html" title="Python爬虫实战五之模拟登录淘宝并获取所有订单" ><span class="thumbnail"><img src="https://cuiqingcai.com/wp-content/themes/Yusi/timthumb.php?src=https://qiniu.cuiqingcai.com/wp-content/uploads/2015/02/wallpaper_5226152.jpg&h=64&w=100&q=90&zc=1&ct=1" alt="Python爬虫实战五之模拟登录淘宝并获取所有订单" /></span><span class="text">Python爬虫实战五之模拟登录淘宝并获取所有订单</span><span class="muted">2015-02-24</span><span class="muted">136评论</span></a></li>
<li><a href="https://cuiqingcai.com/968.html" title="Python爬虫入门六之Cookie的使用" ><span class="thumbnail"><img src="https://cuiqingcai.com/wp-content/themes/Yusi/timthumb.php?src=https://qiniu.cuiqingcai.com/wp-content/uploads/2015/02/wallpaper_5258536-1.jpg&h=64&w=100&q=90&zc=1&ct=1" alt="Python爬虫入门六之Cookie的使用" /></span><span class="text">Python爬虫入门六之Cookie的使用</span><span class="muted">2015-02-15</span><span class="muted">132评论</span></a></li>
<li><a href="https://cuiqingcai.com/3472.html" title="小白进阶之Scrapy第一篇" ><span class="thumbnail"><img src="https://cuiqingcai.com/wp-content/themes/Yusi/timthumb.php?src=https://qiniu.cuiqingcai.com/wp-content/uploads/2016/07/DSC00123.jpg&h=64&w=100&q=90&zc=1&ct=1" alt="小白进阶之Scrapy第一篇" /></span><span class="text">小白进阶之Scrapy第一篇</span><span class="muted">2016-12-07</span><span class="muted">123评论</span></a></li>
<li><a href="https://cuiqingcai.com/1052.html" title="Python爬虫学习系列教程" ><span class="thumbnail"><img src="https://cuiqingcai.com/wp-content/themes/Yusi/timthumb.php?src=https://qiniu.cuiqingcai.com/wp-content/uploads/2015/02/wallpaper_5254665-e1424499272248.jpg&h=64&w=100&q=90&zc=1&ct=1" alt="Python爬虫学习系列教程" /></span><span class="text">Python爬虫学习系列教程</span><span class="muted">2015-02-21</span><span class="muted">112评论</span></a></li>
<li><a href="https://cuiqingcai.com/2416.html" title="弃用多说，改用畅言" ><span class="thumbnail"><img src="https://cuiqingcai.com/wp-content/themes/Yusi/timthumb.php?src=https://qiniu.cuiqingcai.com/wp-content/uploads/2016/02/bg1-e1454442892955.jpg&h=64&w=100&q=90&zc=1&ct=1" alt="弃用多说，改用畅言" /></span><span class="text">弃用多说，改用畅言</span><span class="muted">2016-02-03</span><span class="muted">84评论</span></a></li>
</ul></div><div class="widget d_tag"><div class="title"><h2>标签云</h2></div><div class="d_tags"><a title="45个话题" href="https://cuiqingcai.com/tag/python">Python (45)</a><a title="39个话题" href="https://cuiqingcai.com/tag/%e7%88%ac%e8%99%ab">爬虫 (39)</a><a title="31个话题" href="https://cuiqingcai.com/tag/php">PHP (31)</a><a title="21个话题" href="https://cuiqingcai.com/tag/js">JS (21)</a><a title="12个话题" href="https://cuiqingcai.com/tag/html">HTML (12)</a><a title="11个话题" href="https://cuiqingcai.com/tag/opengl">OpenGL (11)</a><a title="9个话题" href="https://cuiqingcai.com/tag/jquery">jQuery (9)</a><a title="7个话题" href="https://cuiqingcai.com/tag/linux">Linux (7)</a><a title="7个话题" href="https://cuiqingcai.com/tag/wordpress">WordPress (7)</a><a title="7个话题" href="https://cuiqingcai.com/tag/winpcap">Winpcap (7)</a><a title="6个话题" href="https://cuiqingcai.com/tag/css">CSS (6)</a><a title="6个话题" href="https://cuiqingcai.com/tag/security">Security (6)</a><a title="6个话题" href="https://cuiqingcai.com/tag/%e6%b7%b1%e5%ba%a6%e5%ad%a6%e4%b9%a0">深度学习 (6)</a><a title="6个话题" href="https://cuiqingcai.com/tag/tensorflow">TensorFlow (6)</a><a title="4个话题" href="https://cuiqingcai.com/tag/git">Git (4)</a><a title="4个话题" href="https://cuiqingcai.com/tag/bootstrap">Bootstrap (4)</a><a title="4个话题" href="https://cuiqingcai.com/tag/net">Net (4)</a><a title="3个话题" href="https://cuiqingcai.com/tag/java">Java (3)</a><a title="3个话题" href="https://cuiqingcai.com/tag/mysql">Mysql (3)</a><a title="2个话题" href="https://cuiqingcai.com/tag/cocos2d-x">Cocos2d-x (2)</a><a title="2个话题" href="https://cuiqingcai.com/tag/jsp">JSP (2)</a><a title="2个话题" href="https://cuiqingcai.com/tag/matlab">Matlab (2)</a><a title="2个话题" href="https://cuiqingcai.com/tag/photoshop">Photoshop (2)</a><a title="2个话题" href="https://cuiqingcai.com/tag/less">LESS (2)</a><a title="2个话题" href="https://cuiqingcai.com/tag/sass">SASS (2)</a><a title="1个话题" href="https://cuiqingcai.com/tag/json">Json (1)</a><a title="1个话题" href="https://cuiqingcai.com/tag/redis">Redis (1)</a><a title="1个话题" href="https://cuiqingcai.com/tag/nginx">Nginx (1)</a><a title="1个话题" href="https://cuiqingcai.com/tag/appium">Appium (1)</a><a title="1个话题" href="https://cuiqingcai.com/tag/gulp">Gulp (1)</a><a title="1个话题" href="https://cuiqingcai.com/tag/laravel">Laravel (1)</a><a title="1个话题" href="https://cuiqingcai.com/tag/%e6%b5%8b%e8%af%95">测试 (1)</a><a title="1个话题" href="https://cuiqingcai.com/tag/app">APP (1)</a><a title="1个话题" href="https://cuiqingcai.com/tag/ssh">SSH (1)</a><a title="1个话题" href="https://cuiqingcai.com/tag/scrapy%e5%88%86%e5%b8%83%e5%bc%8f">Scrapy分布式 (1)</a><a title="1个话题" href="https://cuiqingcai.com/tag/%e8%a7%86%e9%a2%91">视频 (1)</a><a title="1个话题" href="https://cuiqingcai.com/tag/python3">Python3 (1)</a><a title="1个话题" href="https://cuiqingcai.com/tag/scrapy">Scrapy (1)</a><a title="1个话题" href="https://cuiqingcai.com/tag/%e7%9f%a5%e4%b9%8e">知乎 (1)</a><a title="1个话题" href="https://cuiqingcai.com/tag/neo4j">Neo4j (1)</a><a title="1个话题" href="https://cuiqingcai.com/tag/http">HTTP (1)</a></div></div><div class="widget widget_links"><div class="title"><h2>友情链接</h2></div>
	<ul class='xoxo blogroll'>
<li><a href="http://www.99banzou.com" target="_blank">99伴奏网</a></li>
<li><a href="http://www.anotherhome.net" target="_blank">Anotherhome</a></li>
<li><a href="http://zhouchenwen.com" rel="acquaintance" target="_blank">ColdCoder</a></li>
<li><a href="https://www.3maio.com" target="_blank">Cpphp</a></li>
<li><a href="http://www.spotty.com.cn/" target="_blank">DevNews</a></li>
<li><a href="http://www.findspace.name" target="_blank">Findspace</a></li>
<li><a href="http://blog.hickwu.com/" target="_blank">Hick</a></li>
<li><a href="http://www.jankl.com/">jank</a></li>
<li><a href="http://www.keen8.com/">keen8博客</a></li>
<li><a href="http://lise.io/" target="_blank">Keep It Simple</a></li>
<li><a href="http://www.k2zone.cn/" target="_blank">kTWO</a></li>
<li><a href="http://monkeyblog.cn/">Monkey前端博客</a></li>
<li><a href="http://www.newbieblog.cc/" target="_blank">newbie&#039;blog</a></li>
<li><a href="http://www.urselect.com/?aid=dnk9st" target="_blank">nopcommerce</a></li>
<li><a href="http://www.imop.us/" target="_blank">phper.yang</a></li>
<li><a href="http://www.shangzekai.xyz">Shang</a></li>
<li><a href="http://wonderlee.me">Wonder’s Land</a></li>
<li><a href="http://wxinjie.cn/">XJIE</a></li>
<li><a href="http://www.paurl.com/">互联网运营</a></li>
<li><a href="http://www.atrail.cn/" target="_blank">从前以后</a></li>
<li><a href="http://lanbing510.info" target="_blank">冰蓝</a></li>
<li><a href="http://www.61mon.com/" target="_blank">刘毅</a></li>
<li><a href="http://www.superqq.com/">刚刚在线</a></li>
<li><a href="http://qianxunclub.com/" target="_blank">千寻啊千寻</a></li>
<li><a href="http://kodcloud.com/">可道云</a></li>
<li><a href="http://www.lvtao.net" target="_blank">吕滔博客</a></li>
<li><a href="https://wujunze.com" target="_blank">吴钧泽博客</a></li>
<li><a href="http://www.hellobi.com/" target="_blank">天善智能</a></li>
<li><a href="http://www.fddcn.cn" target="_blank">奋斗的承诺</a></li>
<li><a href="http://www.jrady.cn/" target="_blank">宏愿</a></li>
<li><a href="http://www.cenchong.com/" target="_blank">岑冲个人博客</a></li>
<li><a href="https://upliu.net/" target="_blank">开飞机的小蜗牛</a></li>
<li><a href="http://www.chrafz.com/">张弦先生</a></li>
<li><a href="http://www.503error.com/">张志明的个人博客</a></li>
<li><a href="https://www.sastdoglcy.cn/" target="_blank">成长的柚子</a></li>
<li><a href="http://www.jishux.com/" target="_blank">技术栈</a></li>
<li><a href="https://seofangfa.com" target="_blank">方法SEO顾问</a></li>
<li><a href="http://www.lishengcn.cn/" target="_blank">李胜的脚步</a></li>
<li><a href="http://liaoyuming.cn" rel="acquaintance" target="_blank">永远站</a></li>
<li><a href="http://www.hubwiz.com" target="_blank">汇智网</a></li>
<li><a href="http://frankchen.xyz/" target="_blank">江南消夏</a></li>
<li><a href="http://bysocket.com" target="_blank">泥瓦匠BYSocket</a></li>
<li><a href="http://www.xiaoxiangyucuo.com/">潇湘雨错</a></li>
<li><a href="http://www.xiongge.club/">熊哥club</a></li>
<li><a href="https://geekspider.org/" target="_blank">爬虫实验室</a></li>
<li><a href="http://www.aihongxin.com/">爱红心 爱分享</a></li>
<li><a href="http://blog.wangjingxin.top/">王镜鑫的博客</a></li>
<li><a href="http://zerlong.com/" target="_blank">知语</a></li>
<li><a href="https://www.binblogs.cn" target="_blank">码农De边缘世界</a></li>
<li><a href="http://ibloger.net" target="_blank">程序喵</a></li>
<li><a href="http://www.numberer.net/" target="_blank">第二导航</a></li>
<li><a href="http://blog.csdn.net/lu_wei_wei">米四度的思考</a></li>
<li><a href="http://www.zoeys.cn/" target="_blank">糊糊</a></li>
<li><a href="https://www.carlstedt.cn/">紫杉倒影</a></li>
<li><a href="http://www.laodong.me" target="_blank">老董博客</a></li>
<li><a href="http://zangyiwei.com">臧义伟博客</a></li>
<li><a href="http://www.lanqibing.com/" target="_blank">蓝骑兵</a></li>
<li><a href="http://www.zhan0929.cc">詹加兵个人博客</a></li>
<li><a href="http://zhaoshuai.me/%20" target="_blank">赵帅的个人博客</a></li>
<li><a href="http://blog.zfuyun.top/">赵浮云博客</a></li>
<li><a href="http://www.leyle.com/" target="_blank">遗落岛</a></li>

	</ul>
</div>
<div class="widget widget_text"><div class="title"><h2>精品推荐</h2></div>			<div class="textwidget"><div class="side-ad">
<script type="text/javascript">
var cpro_id="u2578794";
(window["cproStyleApi"] = window["cproStyleApi"] || {})[cpro_id]={at:"3",rsi0:"300",rsi1:"250",pat:"17",tn:"baiduCustNativeAD",rss1:"#FFFFFF",conBW:"1",adp:"1",ptt:"0",titFF:"%E5%BE%AE%E8%BD%AF%E9%9B%85%E9%BB%91",titFS:"14",rss2:"#00a67c",titSU:"0"}
</script>
<script src="https://cpro.baidustatic.com/cpro/ui/c.js" type="text/javascript"></script>
</div>
<style>
#BAIDU_SSP__wrapper_u2578794_1 {
display:none;
}
#BAIDU_SSP__wrapper_u2578794_0 #iframeu2578794_0  .bd-logo2 {
display:none !important;
}
</style></div>
		</div><div class="widget widget_text"><div class="title"><h2>新浪微博</h2></div>			<div class="textwidget"><iframe width="100%" height="550" class="share_self"  frameborder="0" scrolling="no" src="http://widget.weibo.com/weiboshow/index.php?language=&width=0&height=550&fansRow=2&ptype=1&speed=0&skin=1&isTitle=0&noborder=0&isWeibo=1&isFans=1&uid=2830678474&verifier=7468dc7b&dpc=1"></iframe></div>
		</div><div class="widget widget_text"><div class="title"><h2>热门评论</h2></div>			<div class="textwidget"><div style="background:#fff;margin-top:5px;padding:0 20px 10px 10px;display:none">
			<div id="cyReping" role="cylabs" data-use="reping"></div>	
			<script type="text/javascript" charset="utf-8" src="http://changyan.itc.cn/js/lib/jquery.js"></script>
			<script type="text/javascript" charset="utf-8" src="https://changyan.sohu.com/js/changyan.labs.https.js?appid=cyse2vKeA"></script>
            	</div></div>
		</div><div class="widget widget_text"><div class="title"><h2>交流问答</h2></div>			<div class="textwidget"><div class="p-sm">
<p style="
    margin-left: 20px;
    color: #00a67c;
">遇到问题没有解决方案？来论坛提问吧</p><p style="
    margin-left: 10px;
">
<a href="http://bbs.cuiqingcai.com/">
<input type="button" value="点我提问" style="width: 310px; margin: 10px auto 0px; background-color: rgb(245, 138, 135); color: rgb(255, 255, 255); height: 40px; border: none; font-family: 'Microsoft Yahei'; font-size: 16px; letter-spacing: 2px;" onmouseover="this.style.backgroundColor='rgb(252, 125, 121)'" onmouseout="this.style.backgroundColor='#F58A87'"/></a>
</p></div></div>
		</div><div class="widget widget_text">			<div class="textwidget"><p><a href="https://edu.hellobi.com/course/157"><br />
<img src="http://qiniu.cuiqingcai.com/wp-content/uploads/2017/04/WechatIMG258.jpeg"/><br />
</a></p>
</div>
		</div></aside></section>
<footer class="footer">
    <div class="footer-inner">
        <div class="copyright pull-left">
         <a href="https://cuiqingcai.com " title="静觅">静觅</a> 版权所有丨采用<a href="http://yusi123.com/"> 欲思 </a>主题丨基于<a href="http://cn.wordpress.org/" title="WordPress"> WordPress </a>构建   © 2015丨托管于 <a rel="nofollow" target="_blank" href="http://www.aliyun.com/">阿里云主机</a> & <a rel="nofollow" target="_blank" href="http://www.qiniu.com/">七牛云存储 </a>丨鲁ICP备14030596号
		 <div>
			<script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_1253486800'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s4.cnzz.com/z_stat.php%3Fid%3D1253486800%26online%3D1%26show%3Dline' type='text/javascript'%3E%3C/script%3E"));</script>
		 </div>
		</div>
        
    </div>
</footer>

<link rel='stylesheet' id='metaslider-nivo-slider-css'  href='https://cuiqingcai.com/wp-content/plugins/ml-slider/assets/sliders/nivoslider/nivo-slider.css?ver=3.5' type='text/css' media='all' property='stylesheet' />
<link rel='stylesheet' id='metaslider-public-css'  href='https://cuiqingcai.com/wp-content/plugins/ml-slider/assets/metaslider/public.css?ver=3.5' type='text/css' media='all' property='stylesheet' />
<link rel='stylesheet' id='metaslider-nivo-slider-bar-css'  href='https://cuiqingcai.com/wp-content/plugins/ml-slider/assets/sliders/nivoslider/themes/bar/bar.css?ver=3.5' type='text/css' media='all' property='stylesheet' />
<script type='text/javascript'>
/* <![CDATA[ */
var viewsCacheL10n = {"admin_ajax_url":"https:\/\/cuiqingcai.com\/wp-admin\/admin-ajax.php","post_id":"1076"};
/* ]]> */
</script>
<script type='text/javascript' src='https://cuiqingcai.com/wp-content/plugins/wp-postviews/postviews-cache.js?ver=1.68'></script>
<script type='text/javascript' src='https://cuiqingcai.com/wp-content/themes/Yusi/js/jquery.js?ver=1.0'></script>
<script type='text/javascript' src='https://cuiqingcai.com/wp-includes/js/wp-embed.min.js?ver=4.7.3'></script>
<script type='text/javascript' src='https://cuiqingcai.com/wp-content/plugins/ml-slider/assets/sliders/nivoslider/jquery.nivo.slider.pack.js?ver=3.5'></script>
<script>with(document)0[(getElementsByTagName("head")[0]||body).appendChild(createElement("script")).src="http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion="+~(-new Date()/36e5)];</script><!-- xuanfu -->
 <script type="text/javascript">
    /*300*25 创建于 2015-02-23*/
    var cpro_id = "u1959047";
</script>
<script src="https://cpro.baidustatic.com/cpro/ui/s.js" type="text/javascript"></script>
<script type="text/javascript">
var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3F3ef185224776ec2561c9f7066ead4f24' type='text/javascript'%3E%3C/script%3E"));
</script>
<script>
setTimeout(function(){
	
$('#cpv6_left_lower,#cpv6_right_lower').css({
'width': 0
});
}, 500);
</script>
<script type="text/javascript">
$(document).ready(function(){
	var imgs = new Array();
	imgs[0] = 'http://qiniu.cuiqingcai.com/wp-content/uploads/2015/05/20150525111154.jpg';
	imgs[1] = 'http://qiniu.cuiqingcai.com/wp-content/uploads/2015/05/20150525111447.jpg';
	imgs[2] = 'http://qiniu.cuiqingcai.com/wp-content/uploads/2015/05/20150525112058.jpg';
	imgs[3] = 'http://qiniu.cuiqingcai.com/wp-content/uploads/2015/05/20150525112112.jpg';
	imgs[4] = 'http://qiniu.cuiqingcai.com/wp-content/uploads/2015/05/20150525112129.jpg';
	imgs[5] = 'http://qiniu.cuiqingcai.com/wp-content/uploads/2015/05/20150525112155.jpg';
	$('.ds-avatar img[src*="cdncache"], .ds-avatar img[src*="avatar-50"]').each(function(){
		var rand = Math.floor(Math.random()*imgs.length);
		$(this).attr("src",imgs[rand]);
	})
});
</script>
</body>
</html>
<!-- Dynamic page generated in 0.335 seconds. -->
<!-- Cached page generated by WP-Super-Cache on 2018-01-25 08:39:41 -->

<!-- super cache -->